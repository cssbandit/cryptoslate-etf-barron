/*! jQuery Migrate v3.4.1 | (c) OpenJS Foundation and other contributors | jquery.org/license */
"undefined"==typeof jQuery.migrateMute&&(jQuery.migrateMute=!0),function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],function(e){return t(e,window)}):"object"==typeof module&&module.exports?module.exports=t(require("jquery"),window):t(jQuery,window)}(function(s,n){"use strict";function e(e){return 0<=function(e,t){for(var r=/^(\d+)\.(\d+)\.(\d+)/,n=r.exec(e)||[],o=r.exec(t)||[],a=1;a<=3;a++){if(+o[a]<+n[a])return 1;if(+n[a]<+o[a])return-1}return 0}(s.fn.jquery,e)}s.migrateVersion="3.4.1";var t=Object.create(null);s.migrateDisablePatches=function(){for(var e=0;e<arguments.length;e++)t[arguments[e]]=!0},s.migrateEnablePatches=function(){for(var e=0;e<arguments.length;e++)delete t[arguments[e]]},s.migrateIsPatchEnabled=function(e){return!t[e]},n.console&&n.console.log&&(s&&e("3.0.0")&&!e("5.0.0")||n.console.log("JQMIGRATE: jQuery 3.x-4.x REQUIRED"),s.migrateWarnings&&n.console.log("JQMIGRATE: Migrate plugin loaded multiple times"),n.console.log("JQMIGRATE: Migrate is installed"+(s.migrateMute?"":" with logging active")+", version "+s.migrateVersion));var o={};function u(e,t){var r=n.console;!s.migrateIsPatchEnabled(e)||s.migrateDeduplicateWarnings&&o[t]||(o[t]=!0,s.migrateWarnings.push(t+" ["+e+"]"),r&&r.warn&&!s.migrateMute&&(r.warn("JQMIGRATE: "+t),s.migrateTrace&&r.trace&&r.trace()))}function r(e,t,r,n,o){Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get:function(){return u(n,o),r},set:function(e){u(n,o),r=e}})}function a(e,t,r,n,o){var a=e[t];e[t]=function(){return o&&u(n,o),(s.migrateIsPatchEnabled(n)?r:a||s.noop).apply(this,arguments)}}function c(e,t,r,n,o){if(!o)throw new Error("No warning message provided");return a(e,t,r,n,o),0}function i(e,t,r,n){return a(e,t,r,n),0}s.migrateDeduplicateWarnings=!0,s.migrateWarnings=[],void 0===s.migrateTrace&&(s.migrateTrace=!0),s.migrateReset=function(){o={},s.migrateWarnings.length=0},"BackCompat"===n.document.compatMode&&u("quirks","jQuery is not compatible with Quirks Mode");var d,l,p,f={},m=s.fn.init,y=s.find,h=/\[(\s*[-\w]+\s*)([~|^$*]?=)\s*([-\w#]*?#[-\w#]*)\s*\]/,g=/\[(\s*[-\w]+\s*)([~|^$*]?=)\s*([-\w#]*?#[-\w#]*)\s*\]/g,v=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;for(d in i(s.fn,"init",function(e){var t=Array.prototype.slice.call(arguments);return s.migrateIsPatchEnabled("selector-empty-id")&&"string"==typeof e&&"#"===e&&(u("selector-empty-id","jQuery( '#' ) is not a valid selector"),t[0]=[]),m.apply(this,t)},"selector-empty-id"),s.fn.init.prototype=s.fn,i(s,"find",function(t){var r=Array.prototype.slice.call(arguments);if("string"==typeof t&&h.test(t))try{n.document.querySelector(t)}catch(e){t=t.replace(g,function(e,t,r,n){return"["+t+r+'"'+n+'"]'});try{n.document.querySelector(t),u("selector-hash","Attribute selector with '#' must be quoted: "+r[0]),r[0]=t}catch(e){u("selector-hash","Attribute selector with '#' was not fixed: "+r[0])}}return y.apply(this,r)},"selector-hash"),y)Object.prototype.hasOwnProperty.call(y,d)&&(s.find[d]=y[d]);c(s.fn,"size",function(){return this.length},"size","jQuery.fn.size() is deprecated and removed; use the .length property"),c(s,"parseJSON",function(){return JSON.parse.apply(null,arguments)},"parseJSON","jQuery.parseJSON is deprecated; use JSON.parse"),c(s,"holdReady",s.holdReady,"holdReady","jQuery.holdReady is deprecated"),c(s,"unique",s.uniqueSort,"unique","jQuery.unique is deprecated; use jQuery.uniqueSort"),r(s.expr,"filters",s.expr.pseudos,"expr-pre-pseudos","jQuery.expr.filters is deprecated; use jQuery.expr.pseudos"),r(s.expr,":",s.expr.pseudos,"expr-pre-pseudos","jQuery.expr[':'] is deprecated; use jQuery.expr.pseudos"),e("3.1.1")&&c(s,"trim",function(e){return null==e?"":(e+"").replace(v,"$1")},"trim","jQuery.trim is deprecated; use String.prototype.trim"),e("3.2.0")&&(c(s,"nodeName",function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},"nodeName","jQuery.nodeName is deprecated"),c(s,"isArray",Array.isArray,"isArray","jQuery.isArray is deprecated; use Array.isArray")),e("3.3.0")&&(c(s,"isNumeric",function(e){var t=typeof e;return("number"==t||"string"==t)&&!isNaN(e-parseFloat(e))},"isNumeric","jQuery.isNumeric() is deprecated"),s.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){f["[object "+t+"]"]=t.toLowerCase()}),c(s,"type",function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?f[Object.prototype.toString.call(e)]||"object":typeof e},"type","jQuery.type is deprecated"),c(s,"isFunction",function(e){return"function"==typeof e},"isFunction","jQuery.isFunction() is deprecated"),c(s,"isWindow",function(e){return null!=e&&e===e.window},"isWindow","jQuery.isWindow() is deprecated")),s.ajax&&(l=s.ajax,p=/(=)\?(?=&|$)|\?\?/,i(s,"ajax",function(){var e=l.apply(this,arguments);return e.promise&&(c(e,"success",e.done,"jqXHR-methods","jQXHR.success is deprecated and removed"),c(e,"error",e.fail,"jqXHR-methods","jQXHR.error is deprecated and removed"),c(e,"complete",e.always,"jqXHR-methods","jQXHR.complete is deprecated and removed")),e},"jqXHR-methods"),e("4.0.0")||s.ajaxPrefilter("+json",function(e){!1!==e.jsonp&&(p.test(e.url)||"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&p.test(e.data))&&u("jsonp-promotion","JSON-to-JSONP auto-promotion is deprecated")}));var j=s.fn.removeAttr,b=s.fn.toggleClass,w=/\S+/g;function x(e){return e.replace(/-([a-z])/g,function(e,t){return t.toUpperCase()})}i(s.fn,"removeAttr",function(e){var r=this,n=!1;return s.each(e.match(w),function(e,t){s.expr.match.bool.test(t)&&r.each(function(){if(!1!==s(this).prop(t))return!(n=!0)}),n&&(u("removeAttr-bool","jQuery.fn.removeAttr no longer sets boolean properties: "+t),r.prop(t,!1))}),j.apply(this,arguments)},"removeAttr-bool"),i(s.fn,"toggleClass",function(t){return void 0!==t&&"boolean"!=typeof t?b.apply(this,arguments):(u("toggleClass-bool","jQuery.fn.toggleClass( boolean ) is deprecated"),this.each(function(){var e=this.getAttribute&&this.getAttribute("class")||"";e&&s.data(this,"__className__",e),this.setAttribute&&this.setAttribute("class",!e&&!1!==t&&s.data(this,"__className__")||"")}))},"toggleClass-bool");var Q,A,R=!1,C=/^[a-z]/,N=/^(?:Border(?:Top|Right|Bottom|Left)?(?:Width|)|(?:Margin|Padding)?(?:Top|Right|Bottom|Left)?|(?:Min|Max)?(?:Width|Height))$/;s.swap&&s.each(["height","width","reliableMarginRight"],function(e,t){var r=s.cssHooks[t]&&s.cssHooks[t].get;r&&(s.cssHooks[t].get=function(){var e;return R=!0,e=r.apply(this,arguments),R=!1,e})}),i(s,"swap",function(e,t,r,n){var o,a,i={};for(a in R||u("swap","jQuery.swap() is undocumented and deprecated"),t)i[a]=e.style[a],e.style[a]=t[a];for(a in o=r.apply(e,n||[]),t)e.style[a]=i[a];return o},"swap"),e("3.4.0")&&"undefined"!=typeof Proxy&&(s.cssProps=new Proxy(s.cssProps||{},{set:function(){return u("cssProps","jQuery.cssProps is deprecated"),Reflect.set.apply(this,arguments)}})),e("4.0.0")?(A={animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},"undefined"!=typeof Proxy?s.cssNumber=new Proxy(A,{get:function(){return u("css-number","jQuery.cssNumber is deprecated"),Reflect.get.apply(this,arguments)},set:function(){return u("css-number","jQuery.cssNumber is deprecated"),Reflect.set.apply(this,arguments)}}):s.cssNumber=A):A=s.cssNumber,Q=s.fn.css,i(s.fn,"css",function(e,t){var r,n,o=this;return e&&"object"==typeof e&&!Array.isArray(e)?(s.each(e,function(e,t){s.fn.css.call(o,e,t)}),this):("number"==typeof t&&(r=x(e),n=r,C.test(n)&&N.test(n[0].toUpperCase()+n.slice(1))||A[r]||u("css-number",'Number-typed values are deprecated for jQuery.fn.css( "'+e+'", value )')),Q.apply(this,arguments))},"css-number");var S,P,k,H,E=s.data;i(s,"data",function(e,t,r){var n,o,a;if(t&&"object"==typeof t&&2===arguments.length){for(a in n=s.hasData(e)&&E.call(this,e),o={},t)a!==x(a)?(u("data-camelCase","jQuery.data() always sets/gets camelCased names: "+a),n[a]=t[a]):o[a]=t[a];return E.call(this,e,o),t}return t&&"string"==typeof t&&t!==x(t)&&(n=s.hasData(e)&&E.call(this,e))&&t in n?(u("data-camelCase","jQuery.data() always sets/gets camelCased names: "+t),2<arguments.length&&(n[t]=r),n[t]):E.apply(this,arguments)},"data-camelCase"),s.fx&&(k=s.Tween.prototype.run,H=function(e){return e},i(s.Tween.prototype,"run",function(){1<s.easing[this.easing].length&&(u("easing-one-arg","'jQuery.easing."+this.easing.toString()+"' should use only one argument"),s.easing[this.easing]=H),k.apply(this,arguments)},"easing-one-arg"),S=s.fx.interval,P="jQuery.fx.interval is deprecated",n.requestAnimationFrame&&Object.defineProperty(s.fx,"interval",{configurable:!0,enumerable:!0,get:function(){return n.document.hidden||u("fx-interval",P),s.migrateIsPatchEnabled("fx-interval")&&void 0===S?13:S},set:function(e){u("fx-interval",P),S=e}}));var M=s.fn.load,q=s.event.add,O=s.event.fix;s.event.props=[],s.event.fixHooks={},r(s.event.props,"concat",s.event.props.concat,"event-old-patch","jQuery.event.props.concat() is deprecated and removed"),i(s.event,"fix",function(e){var t,r=e.type,n=this.fixHooks[r],o=s.event.props;if(o.length){u("event-old-patch","jQuery.event.props are deprecated and removed: "+o.join());while(o.length)s.event.addProp(o.pop())}if(n&&!n._migrated_&&(n._migrated_=!0,u("event-old-patch","jQuery.event.fixHooks are deprecated and removed: "+r),(o=n.props)&&o.length))while(o.length)s.event.addProp(o.pop());return t=O.call(this,e),n&&n.filter?n.filter(t,e):t},"event-old-patch"),i(s.event,"add",function(e,t){return e===n&&"load"===t&&"complete"===n.document.readyState&&u("load-after-event","jQuery(window).on('load'...) called after load event occurred"),q.apply(this,arguments)},"load-after-event"),s.each(["load","unload","error"],function(e,t){i(s.fn,t,function(){var e=Array.prototype.slice.call(arguments,0);return"load"===t&&"string"==typeof e[0]?M.apply(this,e):(u("shorthand-removed-v3","jQuery.fn."+t+"() is deprecated"),e.splice(0,0,t),arguments.length?this.on.apply(this,e):(this.triggerHandler.apply(this,e),this))},"shorthand-removed-v3")}),s.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,r){c(s.fn,r,function(e,t){return 0<arguments.length?this.on(r,null,e,t):this.trigger(r)},"shorthand-deprecated-v3","jQuery.fn."+r+"() event shorthand is deprecated")}),s(function(){s(n.document).triggerHandler("ready")}),s.event.special.ready={setup:function(){this===n.document&&u("ready-event","'ready' event is deprecated")}},c(s.fn,"bind",function(e,t,r){return this.on(e,null,t,r)},"pre-on-methods","jQuery.fn.bind() is deprecated"),c(s.fn,"unbind",function(e,t){return this.off(e,null,t)},"pre-on-methods","jQuery.fn.unbind() is deprecated"),c(s.fn,"delegate",function(e,t,r,n){return this.on(t,e,r,n)},"pre-on-methods","jQuery.fn.delegate() is deprecated"),c(s.fn,"undelegate",function(e,t,r){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",r)},"pre-on-methods","jQuery.fn.undelegate() is deprecated"),c(s.fn,"hover",function(e,t){return this.on("mouseenter",e).on("mouseleave",t||e)},"pre-on-methods","jQuery.fn.hover() is deprecated");function T(e){var t=n.document.implementation.createHTMLDocument("");return t.body.innerHTML=e,t.body&&t.body.innerHTML}var F=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi;s.UNSAFE_restoreLegacyHtmlPrefilter=function(){s.migrateEnablePatches("self-closed-tags")},i(s,"htmlPrefilter",function(e){var t,r;return(r=(t=e).replace(F,"<$1></$2>"))!==t&&T(t)!==T(r)&&u("self-closed-tags","HTML tags must be properly nested and closed: "+t),e.replace(F,"<$1></$2>")},"self-closed-tags"),s.migrateDisablePatches("self-closed-tags");var D,W,_,I=s.fn.offset;return i(s.fn,"offset",function(){var e=this[0];return!e||e.nodeType&&e.getBoundingClientRect?I.apply(this,arguments):(u("offset-valid-elem","jQuery.fn.offset() requires a valid DOM element"),arguments.length?this:void 0)},"offset-valid-elem"),s.ajax&&(D=s.param,i(s,"param",function(e,t){var r=s.ajaxSettings&&s.ajaxSettings.traditional;return void 0===t&&r&&(u("param-ajax-traditional","jQuery.param() no longer uses jQuery.ajaxSettings.traditional"),t=r),D.call(this,e,t)},"param-ajax-traditional")),c(s.fn,"andSelf",s.fn.addBack,"andSelf","jQuery.fn.andSelf() is deprecated and removed, use jQuery.fn.addBack()"),s.Deferred&&(W=s.Deferred,_=[["resolve","done",s.Callbacks("once memory"),s.Callbacks("once memory"),"resolved"],["reject","fail",s.Callbacks("once memory"),s.Callbacks("once memory"),"rejected"],["notify","progress",s.Callbacks("memory"),s.Callbacks("memory")]],i(s,"Deferred",function(e){var a=W(),i=a.promise();function t(){var o=arguments;return s.Deferred(function(n){s.each(_,function(e,t){var r="function"==typeof o[e]&&o[e];a[t[1]](function(){var e=r&&r.apply(this,arguments);e&&"function"==typeof e.promise?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[t[0]+"With"](this===i?n.promise():this,r?[e]:arguments)})}),o=null}).promise()}return c(a,"pipe",t,"deferred-pipe","deferred.pipe() is deprecated"),c(i,"pipe",t,"deferred-pipe","deferred.pipe() is deprecated"),e&&e.call(a,a),a},"deferred-pipe"),s.Deferred.exceptionHook=W.exceptionHook),s});

!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(e="undefined"!=typeof globalThis?globalThis:e||self).flatpickr=n()}(this,(function(){"use strict";var e=function(){return(e=Object.assign||function(e){for(var n,t=1,a=arguments.length;t<a;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e}).apply(this,arguments)};function n(){for(var e=0,n=0,t=arguments.length;n<t;n++)e+=arguments[n].length;var a=Array(e),i=0;for(n=0;n<t;n++)for(var o=arguments[n],r=0,l=o.length;r<l;r++,i++)a[i]=o[r];return a}var t=["onChange","onClose","onDayCreate","onDestroy","onKeyDown","onMonthChange","onOpen","onParseConfig","onReady","onValueUpdate","onYearChange","onPreCalendarPosition"],a={_disable:[],allowInput:!1,allowInvalidPreload:!1,altFormat:"F j, Y",altInput:!1,altInputClass:"form-control input",animate:"object"==typeof window&&-1===window.navigator.userAgent.indexOf("MSIE"),ariaDateFormat:"F j, Y",autoFillDefaultTime:!0,clickOpens:!0,closeOnSelect:!0,conjunction:", ",dateFormat:"Y-m-d",defaultHour:12,defaultMinute:0,defaultSeconds:0,disable:[],disableMobile:!1,enableSeconds:!1,enableTime:!1,errorHandler:function(e){return"undefined"!=typeof console&&console.warn(e)},getWeek:function(e){var n=new Date(e.getTime());n.setHours(0,0,0,0),n.setDate(n.getDate()+3-(n.getDay()+6)%7);var t=new Date(n.getFullYear(),0,4);return 1+Math.round(((n.getTime()-t.getTime())/864e5-3+(t.getDay()+6)%7)/7)},hourIncrement:1,ignoredFocusElements:[],inline:!1,locale:"default",minuteIncrement:5,mode:"single",monthSelectorType:"dropdown",nextArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>",noCalendar:!1,now:new Date,onChange:[],onClose:[],onDayCreate:[],onDestroy:[],onKeyDown:[],onMonthChange:[],onOpen:[],onParseConfig:[],onReady:[],onValueUpdate:[],onYearChange:[],onPreCalendarPosition:[],plugins:[],position:"auto",positionElement:void 0,prevArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>",shorthandCurrentMonth:!1,showMonths:1,static:!1,time_24hr:!1,weekNumbers:!1,wrap:!1},i={weekdays:{shorthand:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longhand:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},months:{shorthand:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longhand:["January","February","March","April","May","June","July","August","September","October","November","December"]},daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],firstDayOfWeek:0,ordinal:function(e){var n=e%100;if(n>3&&n<21)return"th";switch(n%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},rangeSeparator:" to ",weekAbbreviation:"Wk",scrollTitle:"Scroll to increment",toggleTitle:"Click to toggle",amPM:["AM","PM"],yearAriaLabel:"Year",monthAriaLabel:"Month",hourAriaLabel:"Hour",minuteAriaLabel:"Minute",time_24hr:!1},o=function(e,n){return void 0===n&&(n=2),("000"+e).slice(-1*n)},r=function(e){return!0===e?1:0};function l(e,n){var t;return function(){var a=this,i=arguments;clearTimeout(t),t=setTimeout((function(){return e.apply(a,i)}),n)}}var c=function(e){return e instanceof Array?e:[e]};function s(e,n,t){if(!0===t)return e.classList.add(n);e.classList.remove(n)}function d(e,n,t){var a=window.document.createElement(e);return n=n||"",t=t||"",a.className=n,void 0!==t&&(a.textContent=t),a}function u(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function f(e,n){return n(e)?e:e.parentNode?f(e.parentNode,n):void 0}function m(e,n){var t=d("div","numInputWrapper"),a=d("input","numInput "+e),i=d("span","arrowUp"),o=d("span","arrowDown");if(-1===navigator.userAgent.indexOf("MSIE 9.0")?a.type="number":(a.type="text",a.pattern="\\d*"),void 0!==n)for(var r in n)a.setAttribute(r,n[r]);return t.appendChild(a),t.appendChild(i),t.appendChild(o),t}function g(e){try{return"function"==typeof e.composedPath?e.composedPath()[0]:e.target}catch(n){return e.target}}var p=function(){},h=function(e,n,t){return t.months[n?"shorthand":"longhand"][e]},v={D:p,F:function(e,n,t){e.setMonth(t.months.longhand.indexOf(n))},G:function(e,n){e.setHours((e.getHours()>=12?12:0)+parseFloat(n))},H:function(e,n){e.setHours(parseFloat(n))},J:function(e,n){e.setDate(parseFloat(n))},K:function(e,n,t){e.setHours(e.getHours()%12+12*r(new RegExp(t.amPM[1],"i").test(n)))},M:function(e,n,t){e.setMonth(t.months.shorthand.indexOf(n))},S:function(e,n){e.setSeconds(parseFloat(n))},U:function(e,n){return new Date(1e3*parseFloat(n))},W:function(e,n,t){var a=parseInt(n),i=new Date(e.getFullYear(),0,2+7*(a-1),0,0,0,0);return i.setDate(i.getDate()-i.getDay()+t.firstDayOfWeek),i},Y:function(e,n){e.setFullYear(parseFloat(n))},Z:function(e,n){return new Date(n)},d:function(e,n){e.setDate(parseFloat(n))},h:function(e,n){e.setHours((e.getHours()>=12?12:0)+parseFloat(n))},i:function(e,n){e.setMinutes(parseFloat(n))},j:function(e,n){e.setDate(parseFloat(n))},l:p,m:function(e,n){e.setMonth(parseFloat(n)-1)},n:function(e,n){e.setMonth(parseFloat(n)-1)},s:function(e,n){e.setSeconds(parseFloat(n))},u:function(e,n){return new Date(parseFloat(n))},w:p,y:function(e,n){e.setFullYear(2e3+parseFloat(n))}},D={D:"",F:"",G:"(\\d\\d|\\d)",H:"(\\d\\d|\\d)",J:"(\\d\\d|\\d)\\w+",K:"",M:"",S:"(\\d\\d|\\d)",U:"(.+)",W:"(\\d\\d|\\d)",Y:"(\\d{4})",Z:"(.+)",d:"(\\d\\d|\\d)",h:"(\\d\\d|\\d)",i:"(\\d\\d|\\d)",j:"(\\d\\d|\\d)",l:"",m:"(\\d\\d|\\d)",n:"(\\d\\d|\\d)",s:"(\\d\\d|\\d)",u:"(.+)",w:"(\\d\\d|\\d)",y:"(\\d{2})"},w={Z:function(e){return e.toISOString()},D:function(e,n,t){return n.weekdays.shorthand[w.w(e,n,t)]},F:function(e,n,t){return h(w.n(e,n,t)-1,!1,n)},G:function(e,n,t){return o(w.h(e,n,t))},H:function(e){return o(e.getHours())},J:function(e,n){return void 0!==n.ordinal?e.getDate()+n.ordinal(e.getDate()):e.getDate()},K:function(e,n){return n.amPM[r(e.getHours()>11)]},M:function(e,n){return h(e.getMonth(),!0,n)},S:function(e){return o(e.getSeconds())},U:function(e){return e.getTime()/1e3},W:function(e,n,t){return t.getWeek(e)},Y:function(e){return o(e.getFullYear(),4)},d:function(e){return o(e.getDate())},h:function(e){return e.getHours()%12?e.getHours()%12:12},i:function(e){return o(e.getMinutes())},j:function(e){return e.getDate()},l:function(e,n){return n.weekdays.longhand[e.getDay()]},m:function(e){return o(e.getMonth()+1)},n:function(e){return e.getMonth()+1},s:function(e){return e.getSeconds()},u:function(e){return e.getTime()},w:function(e){return e.getDay()},y:function(e){return String(e.getFullYear()).substring(2)}},b=function(e){var n=e.config,t=void 0===n?a:n,o=e.l10n,r=void 0===o?i:o,l=e.isMobile,c=void 0!==l&&l;return function(e,n,a){var i=a||r;return void 0===t.formatDate||c?n.split("").map((function(n,a,o){return w[n]&&"\\"!==o[a-1]?w[n](e,i,t):"\\"!==n?n:""})).join(""):t.formatDate(e,n,i)}},C=function(e){var n=e.config,t=void 0===n?a:n,o=e.l10n,r=void 0===o?i:o;return function(e,n,i,o){if(0===e||e){var l,c=o||r,s=e;if(e instanceof Date)l=new Date(e.getTime());else if("string"!=typeof e&&void 0!==e.toFixed)l=new Date(e);else if("string"==typeof e){var d=n||(t||a).dateFormat,u=String(e).trim();if("today"===u)l=new Date,i=!0;else if(t&&t.parseDate)l=t.parseDate(e,d);else if(/Z$/.test(u)||/GMT$/.test(u))l=new Date(e);else{for(var f=void 0,m=[],g=0,p=0,h="";g<d.length;g++){var w=d[g],b="\\"===w,C="\\"===d[g-1]||b;if(D[w]&&!C){h+=D[w];var M=new RegExp(h).exec(e);M&&(f=!0)&&m["Y"!==w?"push":"unshift"]({fn:v[w],val:M[++p]})}else b||(h+=".")}l=t&&t.noCalendar?new Date((new Date).setHours(0,0,0,0)):new Date((new Date).getFullYear(),0,1,0,0,0,0),m.forEach((function(e){var n=e.fn,t=e.val;return l=n(l,t,c)||l})),l=f?l:void 0}}if(l instanceof Date&&!isNaN(l.getTime()))return!0===i&&l.setHours(0,0,0,0),l;t.errorHandler(new Error("Invalid date provided: "+s))}}};function M(e,n,t){return void 0===t&&(t=!0),!1!==t?new Date(e.getTime()).setHours(0,0,0,0)-new Date(n.getTime()).setHours(0,0,0,0):e.getTime()-n.getTime()}var y=function(e,n,t){return 3600*e+60*n+t};function x(e){var n=e.defaultHour,t=e.defaultMinute,a=e.defaultSeconds;if(void 0!==e.minDate){var i=e.minDate.getHours(),o=e.minDate.getMinutes(),r=e.minDate.getSeconds();n<i&&(n=i),n===i&&t<o&&(t=o),n===i&&t===o&&a<r&&(a=e.minDate.getSeconds())}if(void 0!==e.maxDate){var l=e.maxDate.getHours(),c=e.maxDate.getMinutes();(n=Math.min(n,l))===l&&(t=Math.min(c,t)),n===l&&t===c&&(a=e.maxDate.getSeconds())}return{hours:n,minutes:t,seconds:a}}function E(p,v){var w={config:e(e({},a),T.defaultConfig),l10n:i};function E(){var e;return(null===(e=w.calendarContainer)||void 0===e?void 0:e.getRootNode()).activeElement||document.activeElement}function k(e){return e.bind(w)}function I(){var e=w.config;!1===e.weekNumbers&&1===e.showMonths||!0!==e.noCalendar&&window.requestAnimationFrame((function(){if(void 0!==w.calendarContainer&&(w.calendarContainer.style.visibility="hidden",w.calendarContainer.style.display="block"),void 0!==w.daysContainer){var n=(w.days.offsetWidth+1)*e.showMonths;w.daysContainer.style.width=n+"px",w.calendarContainer.style.width=n+(void 0!==w.weekWrapper?w.weekWrapper.offsetWidth:0)+"px",w.calendarContainer.style.removeProperty("visibility"),w.calendarContainer.style.removeProperty("display")}}))}function S(e){if(0===w.selectedDates.length){var n=void 0===w.config.minDate||M(new Date,w.config.minDate)>=0?new Date:new Date(w.config.minDate.getTime()),t=x(w.config);n.setHours(t.hours,t.minutes,t.seconds,n.getMilliseconds()),w.selectedDates=[n],w.latestSelectedDateObj=n}void 0!==e&&"blur"!==e.type&&function(e){e.preventDefault();var n="keydown"===e.type,t=g(e),a=t;void 0!==w.amPM&&t===w.amPM&&(w.amPM.textContent=w.l10n.amPM[r(w.amPM.textContent===w.l10n.amPM[0])]);var i=parseFloat(a.getAttribute("min")),l=parseFloat(a.getAttribute("max")),c=parseFloat(a.getAttribute("step")),s=parseInt(a.value,10),d=s+c*(e.delta||(n?38===e.which?1:-1:0));if(void 0!==a.value&&2===a.value.length){var u=a===w.hourElement,f=a===w.minuteElement;d<i?(d=l+d+r(!u)+(r(u)&&r(!w.amPM)),f&&H(void 0,-1,w.hourElement)):d>l&&(d=a===w.hourElement?d-l-r(!w.amPM):i,f&&H(void 0,1,w.hourElement)),w.amPM&&u&&(1===c?d+s===23:Math.abs(d-s)>c)&&(w.amPM.textContent=w.l10n.amPM[r(w.amPM.textContent===w.l10n.amPM[0])]),a.value=o(d)}}(e);var a=w._input.value;_(),Me(),w._input.value!==a&&w._debouncedChange()}function _(){if(void 0!==w.hourElement&&void 0!==w.minuteElement){var e,n,t=(parseInt(w.hourElement.value.slice(-2),10)||0)%24,a=(parseInt(w.minuteElement.value,10)||0)%60,i=void 0!==w.secondElement?(parseInt(w.secondElement.value,10)||0)%60:0;void 0!==w.amPM&&(e=t,n=w.amPM.textContent,t=e%12+12*r(n===w.l10n.amPM[1]));var o=void 0!==w.config.minTime||w.config.minDate&&w.minDateHasTime&&w.latestSelectedDateObj&&0===M(w.latestSelectedDateObj,w.config.minDate,!0),l=void 0!==w.config.maxTime||w.config.maxDate&&w.maxDateHasTime&&w.latestSelectedDateObj&&0===M(w.latestSelectedDateObj,w.config.maxDate,!0);if(void 0!==w.config.maxTime&&void 0!==w.config.minTime&&w.config.minTime>w.config.maxTime){var c=y(w.config.minTime.getHours(),w.config.minTime.getMinutes(),w.config.minTime.getSeconds()),s=y(w.config.maxTime.getHours(),w.config.maxTime.getMinutes(),w.config.maxTime.getSeconds()),d=y(t,a,i);if(d>s&&d<c){var u=function(e){var n=Math.floor(e/3600),t=(e-3600*n)/60;return[n,t,e-3600*n-60*t]}(c);t=u[0],a=u[1],i=u[2]}}else{if(l){var f=void 0!==w.config.maxTime?w.config.maxTime:w.config.maxDate;(t=Math.min(t,f.getHours()))===f.getHours()&&(a=Math.min(a,f.getMinutes())),a===f.getMinutes()&&(i=Math.min(i,f.getSeconds()))}if(o){var m=void 0!==w.config.minTime?w.config.minTime:w.config.minDate;(t=Math.max(t,m.getHours()))===m.getHours()&&a<m.getMinutes()&&(a=m.getMinutes()),a===m.getMinutes()&&(i=Math.max(i,m.getSeconds()))}}F(t,a,i)}}function O(e){var n=e||w.latestSelectedDateObj;n&&n instanceof Date&&F(n.getHours(),n.getMinutes(),n.getSeconds())}function F(e,n,t){void 0!==w.latestSelectedDateObj&&w.latestSelectedDateObj.setHours(e%24,n,t||0,0),w.hourElement&&w.minuteElement&&!w.isMobile&&(w.hourElement.value=o(w.config.time_24hr?e:(12+e)%12+12*r(e%12==0)),w.minuteElement.value=o(n),void 0!==w.amPM&&(w.amPM.textContent=w.l10n.amPM[r(e>=12)]),void 0!==w.secondElement&&(w.secondElement.value=o(t)))}function A(e){var n=g(e),t=parseInt(n.value)+(e.delta||0);(t/1e3>1||"Enter"===e.key&&!/[^\d]/.test(t.toString()))&&X(t)}function N(e,n,t,a){return n instanceof Array?n.forEach((function(n){return N(e,n,t,a)})):e instanceof Array?e.forEach((function(e){return N(e,n,t,a)})):(e.addEventListener(n,t,a),void w._handlers.push({remove:function(){return e.removeEventListener(n,t,a)}}))}function P(){ve("onChange")}function Y(e,n){var t=void 0!==e?w.parseDate(e):w.latestSelectedDateObj||(w.config.minDate&&w.config.minDate>w.now?w.config.minDate:w.config.maxDate&&w.config.maxDate<w.now?w.config.maxDate:w.now),a=w.currentYear,i=w.currentMonth;try{void 0!==t&&(w.currentYear=t.getFullYear(),w.currentMonth=t.getMonth())}catch(e){e.message="Invalid date supplied: "+t,w.config.errorHandler(e)}n&&w.currentYear!==a&&(ve("onYearChange"),U()),!n||w.currentYear===a&&w.currentMonth===i||ve("onMonthChange"),w.redraw()}function j(e){var n=g(e);~n.className.indexOf("arrow")&&H(e,n.classList.contains("arrowUp")?1:-1)}function H(e,n,t){var a=e&&g(e),i=t||a&&a.parentNode&&a.parentNode.firstChild,o=De("increment");o.delta=n,i&&i.dispatchEvent(o)}function L(e,n,t,a){var i=ee(n,!0),o=d("span",e,n.getDate().toString());return o.dateObj=n,o.$i=a,o.setAttribute("aria-label",w.formatDate(n,w.config.ariaDateFormat)),-1===e.indexOf("hidden")&&0===M(n,w.now)&&(w.todayDateElem=o,o.classList.add("today"),o.setAttribute("aria-current","date")),i?(o.tabIndex=-1,we(n)&&(o.classList.add("selected"),w.selectedDateElem=o,"range"===w.config.mode&&(s(o,"startRange",w.selectedDates[0]&&0===M(n,w.selectedDates[0],!0)),s(o,"endRange",w.selectedDates[1]&&0===M(n,w.selectedDates[1],!0)),"nextMonthDay"===e&&o.classList.add("inRange")))):o.classList.add("flatpickr-disabled"),"range"===w.config.mode&&function(e){return!("range"!==w.config.mode||w.selectedDates.length<2)&&M(e,w.selectedDates[0])>=0&&M(e,w.selectedDates[1])<=0}(n)&&!we(n)&&o.classList.add("inRange"),w.weekNumbers&&1===w.config.showMonths&&"prevMonthDay"!==e&&a%7==6&&w.weekNumbers.insertAdjacentHTML("beforeend","<span class='flatpickr-day'>"+w.config.getWeek(n)+"</span>"),ve("onDayCreate",o),o}function R(e){e.focus(),"range"===w.config.mode&&ie(e)}function W(e){for(var n=e>0?0:w.config.showMonths-1,t=e>0?w.config.showMonths:-1,a=n;a!=t;a+=e)for(var i=w.daysContainer.children[a],o=e>0?0:i.children.length-1,r=e>0?i.children.length:-1,l=o;l!=r;l+=e){var c=i.children[l];if(-1===c.className.indexOf("hidden")&&ee(c.dateObj))return c}}function B(e,n){var t=E(),a=ne(t||document.body),i=void 0!==e?e:a?t:void 0!==w.selectedDateElem&&ne(w.selectedDateElem)?w.selectedDateElem:void 0!==w.todayDateElem&&ne(w.todayDateElem)?w.todayDateElem:W(n>0?1:-1);void 0===i?w._input.focus():a?function(e,n){for(var t=-1===e.className.indexOf("Month")?e.dateObj.getMonth():w.currentMonth,a=n>0?w.config.showMonths:-1,i=n>0?1:-1,o=t-w.currentMonth;o!=a;o+=i)for(var r=w.daysContainer.children[o],l=t-w.currentMonth===o?e.$i+n:n<0?r.children.length-1:0,c=r.children.length,s=l;s>=0&&s<c&&s!=(n>0?c:-1);s+=i){var d=r.children[s];if(-1===d.className.indexOf("hidden")&&ee(d.dateObj)&&Math.abs(e.$i-s)>=Math.abs(n))return R(d)}w.changeMonth(i),B(W(i),0)}(i,n):R(i)}function J(e,n){for(var t=(new Date(e,n,1).getDay()-w.l10n.firstDayOfWeek+7)%7,a=w.utils.getDaysInMonth((n-1+12)%12,e),i=w.utils.getDaysInMonth(n,e),o=window.document.createDocumentFragment(),r=w.config.showMonths>1,l=r?"prevMonthDay hidden":"prevMonthDay",c=r?"nextMonthDay hidden":"nextMonthDay",s=a+1-t,u=0;s<=a;s++,u++)o.appendChild(L("flatpickr-day "+l,new Date(e,n-1,s),0,u));for(s=1;s<=i;s++,u++)o.appendChild(L("flatpickr-day",new Date(e,n,s),0,u));for(var f=i+1;f<=42-t&&(1===w.config.showMonths||u%7!=0);f++,u++)o.appendChild(L("flatpickr-day "+c,new Date(e,n+1,f%i),0,u));var m=d("div","dayContainer");return m.appendChild(o),m}function K(){if(void 0!==w.daysContainer){u(w.daysContainer),w.weekNumbers&&u(w.weekNumbers);for(var e=document.createDocumentFragment(),n=0;n<w.config.showMonths;n++){var t=new Date(w.currentYear,w.currentMonth,1);t.setMonth(w.currentMonth+n),e.appendChild(J(t.getFullYear(),t.getMonth()))}w.daysContainer.appendChild(e),w.days=w.daysContainer.firstChild,"range"===w.config.mode&&1===w.selectedDates.length&&ie()}}function U(){if(!(w.config.showMonths>1||"dropdown"!==w.config.monthSelectorType)){var e=function(e){return!(void 0!==w.config.minDate&&w.currentYear===w.config.minDate.getFullYear()&&e<w.config.minDate.getMonth()||void 0!==w.config.maxDate&&w.currentYear===w.config.maxDate.getFullYear()&&e>w.config.maxDate.getMonth())};w.monthsDropdownContainer.tabIndex=-1,w.monthsDropdownContainer.innerHTML="";for(var n=0;n<12;n++)if(e(n)){var t=d("option","flatpickr-monthDropdown-month");t.value=new Date(w.currentYear,n).getMonth().toString(),t.textContent=h(n,w.config.shorthandCurrentMonth,w.l10n),t.tabIndex=-1,w.currentMonth===n&&(t.selected=!0),w.monthsDropdownContainer.appendChild(t)}}}function $(){var e,n=d("div","flatpickr-month"),t=window.document.createDocumentFragment();w.config.showMonths>1||"static"===w.config.monthSelectorType?e=d("span","cur-month"):(w.monthsDropdownContainer=d("select","flatpickr-monthDropdown-months"),w.monthsDropdownContainer.setAttribute("aria-label",w.l10n.monthAriaLabel),N(w.monthsDropdownContainer,"change",(function(e){var n=g(e),t=parseInt(n.value,10);w.changeMonth(t-w.currentMonth),ve("onMonthChange")})),U(),e=w.monthsDropdownContainer);var a=m("cur-year",{tabindex:"-1"}),i=a.getElementsByTagName("input")[0];i.setAttribute("aria-label",w.l10n.yearAriaLabel),w.config.minDate&&i.setAttribute("min",w.config.minDate.getFullYear().toString()),w.config.maxDate&&(i.setAttribute("max",w.config.maxDate.getFullYear().toString()),i.disabled=!!w.config.minDate&&w.config.minDate.getFullYear()===w.config.maxDate.getFullYear());var o=d("div","flatpickr-current-month");return o.appendChild(e),o.appendChild(a),t.appendChild(o),n.appendChild(t),{container:n,yearElement:i,monthElement:e}}function q(){u(w.monthNav),w.monthNav.appendChild(w.prevMonthNav),w.config.showMonths&&(w.yearElements=[],w.monthElements=[]);for(var e=w.config.showMonths;e--;){var n=$();w.yearElements.push(n.yearElement),w.monthElements.push(n.monthElement),w.monthNav.appendChild(n.container)}w.monthNav.appendChild(w.nextMonthNav)}function V(){w.weekdayContainer?u(w.weekdayContainer):w.weekdayContainer=d("div","flatpickr-weekdays");for(var e=w.config.showMonths;e--;){var n=d("div","flatpickr-weekdaycontainer");w.weekdayContainer.appendChild(n)}return z(),w.weekdayContainer}function z(){if(w.weekdayContainer){var e=w.l10n.firstDayOfWeek,t=n(w.l10n.weekdays.shorthand);e>0&&e<t.length&&(t=n(t.splice(e,t.length),t.splice(0,e)));for(var a=w.config.showMonths;a--;)w.weekdayContainer.children[a].innerHTML="\n      <span class='flatpickr-weekday'>\n        "+t.join("</span><span class='flatpickr-weekday'>")+"\n      </span>\n      "}}function G(e,n){void 0===n&&(n=!0);var t=n?e:e-w.currentMonth;t<0&&!0===w._hidePrevMonthArrow||t>0&&!0===w._hideNextMonthArrow||(w.currentMonth+=t,(w.currentMonth<0||w.currentMonth>11)&&(w.currentYear+=w.currentMonth>11?1:-1,w.currentMonth=(w.currentMonth+12)%12,ve("onYearChange"),U()),K(),ve("onMonthChange"),be())}function Z(e){return w.calendarContainer.contains(e)}function Q(e){if(w.isOpen&&!w.config.inline){var n=g(e),t=Z(n),a=!(n===w.input||n===w.altInput||w.element.contains(n)||e.path&&e.path.indexOf&&(~e.path.indexOf(w.input)||~e.path.indexOf(w.altInput))||t||Z(e.relatedTarget)),i=!w.config.ignoredFocusElements.some((function(e){return e.contains(n)}));a&&i&&(w.config.allowInput&&w.setDate(w._input.value,!1,w.config.altInput?w.config.altFormat:w.config.dateFormat),void 0!==w.timeContainer&&void 0!==w.minuteElement&&void 0!==w.hourElement&&""!==w.input.value&&void 0!==w.input.value&&S(),w.close(),w.config&&"range"===w.config.mode&&1===w.selectedDates.length&&w.clear(!1))}}function X(e){if(!(!e||w.config.minDate&&e<w.config.minDate.getFullYear()||w.config.maxDate&&e>w.config.maxDate.getFullYear())){var n=e,t=w.currentYear!==n;w.currentYear=n||w.currentYear,w.config.maxDate&&w.currentYear===w.config.maxDate.getFullYear()?w.currentMonth=Math.min(w.config.maxDate.getMonth(),w.currentMonth):w.config.minDate&&w.currentYear===w.config.minDate.getFullYear()&&(w.currentMonth=Math.max(w.config.minDate.getMonth(),w.currentMonth)),t&&(w.redraw(),ve("onYearChange"),U())}}function ee(e,n){var t;void 0===n&&(n=!0);var a=w.parseDate(e,void 0,n);if(w.config.minDate&&a&&M(a,w.config.minDate,void 0!==n?n:!w.minDateHasTime)<0||w.config.maxDate&&a&&M(a,w.config.maxDate,void 0!==n?n:!w.maxDateHasTime)>0)return!1;if(!w.config.enable&&0===w.config.disable.length)return!0;if(void 0===a)return!1;for(var i=!!w.config.enable,o=null!==(t=w.config.enable)&&void 0!==t?t:w.config.disable,r=0,l=void 0;r<o.length;r++){if("function"==typeof(l=o[r])&&l(a))return i;if(l instanceof Date&&void 0!==a&&l.getTime()===a.getTime())return i;if("string"==typeof l){var c=w.parseDate(l,void 0,!0);return c&&c.getTime()===a.getTime()?i:!i}if("object"==typeof l&&void 0!==a&&l.from&&l.to&&a.getTime()>=l.from.getTime()&&a.getTime()<=l.to.getTime())return i}return!i}function ne(e){return void 0!==w.daysContainer&&-1===e.className.indexOf("hidden")&&-1===e.className.indexOf("flatpickr-disabled")&&w.daysContainer.contains(e)}function te(e){var n=e.target===w._input,t=w._input.value.trimEnd()!==Ce();!n||!t||e.relatedTarget&&Z(e.relatedTarget)||w.setDate(w._input.value,!0,e.target===w.altInput?w.config.altFormat:w.config.dateFormat)}function ae(e){var n=g(e),t=w.config.wrap?p.contains(n):n===w._input,a=w.config.allowInput,i=w.isOpen&&(!a||!t),o=w.config.inline&&t&&!a;if(13===e.keyCode&&t){if(a)return w.setDate(w._input.value,!0,n===w.altInput?w.config.altFormat:w.config.dateFormat),w.close(),n.blur();w.open()}else if(Z(n)||i||o){var r=!!w.timeContainer&&w.timeContainer.contains(n);switch(e.keyCode){case 13:r?(e.preventDefault(),S(),ue()):fe(e);break;case 27:e.preventDefault(),ue();break;case 8:case 46:t&&!w.config.allowInput&&(e.preventDefault(),w.clear());break;case 37:case 39:if(r||t)w.hourElement&&w.hourElement.focus();else{e.preventDefault();var l=E();if(void 0!==w.daysContainer&&(!1===a||l&&ne(l))){var c=39===e.keyCode?1:-1;e.ctrlKey?(e.stopPropagation(),G(c),B(W(1),0)):B(void 0,c)}}break;case 38:case 40:e.preventDefault();var s=40===e.keyCode?1:-1;w.daysContainer&&void 0!==n.$i||n===w.input||n===w.altInput?e.ctrlKey?(e.stopPropagation(),X(w.currentYear-s),B(W(1),0)):r||B(void 0,7*s):n===w.currentYearElement?X(w.currentYear-s):w.config.enableTime&&(!r&&w.hourElement&&w.hourElement.focus(),S(e),w._debouncedChange());break;case 9:if(r){var d=[w.hourElement,w.minuteElement,w.secondElement,w.amPM].concat(w.pluginElements).filter((function(e){return e})),u=d.indexOf(n);if(-1!==u){var f=d[u+(e.shiftKey?-1:1)];e.preventDefault(),(f||w._input).focus()}}else!w.config.noCalendar&&w.daysContainer&&w.daysContainer.contains(n)&&e.shiftKey&&(e.preventDefault(),w._input.focus())}}if(void 0!==w.amPM&&n===w.amPM)switch(e.key){case w.l10n.amPM[0].charAt(0):case w.l10n.amPM[0].charAt(0).toLowerCase():w.amPM.textContent=w.l10n.amPM[0],_(),Me();break;case w.l10n.amPM[1].charAt(0):case w.l10n.amPM[1].charAt(0).toLowerCase():w.amPM.textContent=w.l10n.amPM[1],_(),Me()}(t||Z(n))&&ve("onKeyDown",e)}function ie(e,n){if(void 0===n&&(n="flatpickr-day"),1===w.selectedDates.length&&(!e||e.classList.contains(n)&&!e.classList.contains("flatpickr-disabled"))){for(var t=e?e.dateObj.getTime():w.days.firstElementChild.dateObj.getTime(),a=w.parseDate(w.selectedDates[0],void 0,!0).getTime(),i=Math.min(t,w.selectedDates[0].getTime()),o=Math.max(t,w.selectedDates[0].getTime()),r=!1,l=0,c=0,s=i;s<o;s+=864e5)ee(new Date(s),!0)||(r=r||s>i&&s<o,s<a&&(!l||s>l)?l=s:s>a&&(!c||s<c)&&(c=s));Array.from(w.rContainer.querySelectorAll("*:nth-child(-n+"+w.config.showMonths+") > ."+n)).forEach((function(n){var i,o,s,d=n.dateObj.getTime(),u=l>0&&d<l||c>0&&d>c;if(u)return n.classList.add("notAllowed"),void["inRange","startRange","endRange"].forEach((function(e){n.classList.remove(e)}));r&&!u||(["startRange","inRange","endRange","notAllowed"].forEach((function(e){n.classList.remove(e)})),void 0!==e&&(e.classList.add(t<=w.selectedDates[0].getTime()?"startRange":"endRange"),a<t&&d===a?n.classList.add("startRange"):a>t&&d===a&&n.classList.add("endRange"),d>=l&&(0===c||d<=c)&&(o=a,s=t,(i=d)>Math.min(o,s)&&i<Math.max(o,s))&&n.classList.add("inRange")))}))}}function oe(){!w.isOpen||w.config.static||w.config.inline||se()}function re(e){return function(n){var t=w.config["_"+e+"Date"]=w.parseDate(n,w.config.dateFormat),a=w.config["_"+("min"===e?"max":"min")+"Date"];void 0!==t&&(w["min"===e?"minDateHasTime":"maxDateHasTime"]=t.getHours()>0||t.getMinutes()>0||t.getSeconds()>0),w.selectedDates&&(w.selectedDates=w.selectedDates.filter((function(e){return ee(e)})),w.selectedDates.length||"min"!==e||O(t),Me()),w.daysContainer&&(de(),void 0!==t?w.currentYearElement[e]=t.getFullYear().toString():w.currentYearElement.removeAttribute(e),w.currentYearElement.disabled=!!a&&void 0!==t&&a.getFullYear()===t.getFullYear())}}function le(){return w.config.wrap?p.querySelector("[data-input]"):p}function ce(){"object"!=typeof w.config.locale&&void 0===T.l10ns[w.config.locale]&&w.config.errorHandler(new Error("flatpickr: invalid locale "+w.config.locale)),w.l10n=e(e({},T.l10ns.default),"object"==typeof w.config.locale?w.config.locale:"default"!==w.config.locale?T.l10ns[w.config.locale]:void 0),D.D="("+w.l10n.weekdays.shorthand.join("|")+")",D.l="("+w.l10n.weekdays.longhand.join("|")+")",D.M="("+w.l10n.months.shorthand.join("|")+")",D.F="("+w.l10n.months.longhand.join("|")+")",D.K="("+w.l10n.amPM[0]+"|"+w.l10n.amPM[1]+"|"+w.l10n.amPM[0].toLowerCase()+"|"+w.l10n.amPM[1].toLowerCase()+")",void 0===e(e({},v),JSON.parse(JSON.stringify(p.dataset||{}))).time_24hr&&void 0===T.defaultConfig.time_24hr&&(w.config.time_24hr=w.l10n.time_24hr),w.formatDate=b(w),w.parseDate=C({config:w.config,l10n:w.l10n})}function se(e){if("function"!=typeof w.config.position){if(void 0!==w.calendarContainer){ve("onPreCalendarPosition");var n=e||w._positionElement,t=Array.prototype.reduce.call(w.calendarContainer.children,(function(e,n){return e+n.offsetHeight}),0),a=w.calendarContainer.offsetWidth,i=w.config.position.split(" "),o=i[0],r=i.length>1?i[1]:null,l=n.getBoundingClientRect(),c=window.innerHeight-l.bottom,d="above"===o||"below"!==o&&c<t&&l.top>t,u=window.pageYOffset+l.top+(d?-t-2:n.offsetHeight+2);if(s(w.calendarContainer,"arrowTop",!d),s(w.calendarContainer,"arrowBottom",d),!w.config.inline){var f=window.pageXOffset+l.left,m=!1,g=!1;"center"===r?(f-=(a-l.width)/2,m=!0):"right"===r&&(f-=a-l.width,g=!0),s(w.calendarContainer,"arrowLeft",!m&&!g),s(w.calendarContainer,"arrowCenter",m),s(w.calendarContainer,"arrowRight",g);var p=window.document.body.offsetWidth-(window.pageXOffset+l.right),h=f+a>window.document.body.offsetWidth,v=p+a>window.document.body.offsetWidth;if(s(w.calendarContainer,"rightMost",h),!w.config.static)if(w.calendarContainer.style.top=u+"px",h)if(v){var D=function(){for(var e=null,n=0;n<document.styleSheets.length;n++){var t=document.styleSheets[n];if(t.cssRules){try{t.cssRules}catch(e){continue}e=t;break}}return null!=e?e:(a=document.createElement("style"),document.head.appendChild(a),a.sheet);var a}();if(void 0===D)return;var b=window.document.body.offsetWidth,C=Math.max(0,b/2-a/2),M=D.cssRules.length,y="{left:"+l.left+"px;right:auto;}";s(w.calendarContainer,"rightMost",!1),s(w.calendarContainer,"centerMost",!0),D.insertRule(".flatpickr-calendar.centerMost:before,.flatpickr-calendar.centerMost:after"+y,M),w.calendarContainer.style.left=C+"px",w.calendarContainer.style.right="auto"}else w.calendarContainer.style.left="auto",w.calendarContainer.style.right=p+"px";else w.calendarContainer.style.left=f+"px",w.calendarContainer.style.right="auto"}}}else w.config.position(w,e)}function de(){w.config.noCalendar||w.isMobile||(U(),be(),K())}function ue(){w._input.focus(),-1!==window.navigator.userAgent.indexOf("MSIE")||void 0!==navigator.msMaxTouchPoints?setTimeout(w.close,0):w.close()}function fe(e){e.preventDefault(),e.stopPropagation();var n=f(g(e),(function(e){return e.classList&&e.classList.contains("flatpickr-day")&&!e.classList.contains("flatpickr-disabled")&&!e.classList.contains("notAllowed")}));if(void 0!==n){var t=n,a=w.latestSelectedDateObj=new Date(t.dateObj.getTime()),i=(a.getMonth()<w.currentMonth||a.getMonth()>w.currentMonth+w.config.showMonths-1)&&"range"!==w.config.mode;if(w.selectedDateElem=t,"single"===w.config.mode)w.selectedDates=[a];else if("multiple"===w.config.mode){var o=we(a);o?w.selectedDates.splice(parseInt(o),1):w.selectedDates.push(a)}else"range"===w.config.mode&&(2===w.selectedDates.length&&w.clear(!1,!1),w.latestSelectedDateObj=a,w.selectedDates.push(a),0!==M(a,w.selectedDates[0],!0)&&w.selectedDates.sort((function(e,n){return e.getTime()-n.getTime()})));if(_(),i){var r=w.currentYear!==a.getFullYear();w.currentYear=a.getFullYear(),w.currentMonth=a.getMonth(),r&&(ve("onYearChange"),U()),ve("onMonthChange")}if(be(),K(),Me(),i||"range"===w.config.mode||1!==w.config.showMonths?void 0!==w.selectedDateElem&&void 0===w.hourElement&&w.selectedDateElem&&w.selectedDateElem.focus():R(t),void 0!==w.hourElement&&void 0!==w.hourElement&&w.hourElement.focus(),w.config.closeOnSelect){var l="single"===w.config.mode&&!w.config.enableTime,c="range"===w.config.mode&&2===w.selectedDates.length&&!w.config.enableTime;(l||c)&&ue()}P()}}w.parseDate=C({config:w.config,l10n:w.l10n}),w._handlers=[],w.pluginElements=[],w.loadedPlugins=[],w._bind=N,w._setHoursFromDate=O,w._positionCalendar=se,w.changeMonth=G,w.changeYear=X,w.clear=function(e,n){if(void 0===e&&(e=!0),void 0===n&&(n=!0),w.input.value="",void 0!==w.altInput&&(w.altInput.value=""),void 0!==w.mobileInput&&(w.mobileInput.value=""),w.selectedDates=[],w.latestSelectedDateObj=void 0,!0===n&&(w.currentYear=w._initialDate.getFullYear(),w.currentMonth=w._initialDate.getMonth()),!0===w.config.enableTime){var t=x(w.config);F(t.hours,t.minutes,t.seconds)}w.redraw(),e&&ve("onChange")},w.close=function(){w.isOpen=!1,w.isMobile||(void 0!==w.calendarContainer&&w.calendarContainer.classList.remove("open"),void 0!==w._input&&w._input.classList.remove("active")),ve("onClose")},w.onMouseOver=ie,w._createElement=d,w.createDay=L,w.destroy=function(){void 0!==w.config&&ve("onDestroy");for(var e=w._handlers.length;e--;)w._handlers[e].remove();if(w._handlers=[],w.mobileInput)w.mobileInput.parentNode&&w.mobileInput.parentNode.removeChild(w.mobileInput),w.mobileInput=void 0;else if(w.calendarContainer&&w.calendarContainer.parentNode)if(w.config.static&&w.calendarContainer.parentNode){var n=w.calendarContainer.parentNode;if(n.lastChild&&n.removeChild(n.lastChild),n.parentNode){for(;n.firstChild;)n.parentNode.insertBefore(n.firstChild,n);n.parentNode.removeChild(n)}}else w.calendarContainer.parentNode.removeChild(w.calendarContainer);w.altInput&&(w.input.type="text",w.altInput.parentNode&&w.altInput.parentNode.removeChild(w.altInput),delete w.altInput),w.input&&(w.input.type=w.input._type,w.input.classList.remove("flatpickr-input"),w.input.removeAttribute("readonly")),
["_showTimeInput","latestSelectedDateObj","_hideNextMonthArrow","_hidePrevMonthArrow","__hideNextMonthArrow","__hidePrevMonthArrow","isMobile","isOpen","selectedDateElem","minDateHasTime","maxDateHasTime","days","daysContainer","_input","_positionElement","innerContainer","rContainer","monthNav","todayDateElem","calendarContainer","weekdayContainer","prevMonthNav","nextMonthNav","monthsDropdownContainer","currentMonthElement","currentYearElement","navigationCurrentMonth","selectedDateElem","config"].forEach((function(e){try{delete w[e]}catch(e){}}))},w.isEnabled=ee,w.jumpToDate=Y,w.updateValue=Me,w.open=function(e,n){if(void 0===n&&(n=w._positionElement),!0===w.isMobile){if(e){e.preventDefault();var t=g(e);t&&t.blur()}return void 0!==w.mobileInput&&(w.mobileInput.focus(),w.mobileInput.click()),void ve("onOpen")}if(!w._input.disabled&&!w.config.inline){var a=w.isOpen;w.isOpen=!0,a||(w.calendarContainer.classList.add("open"),w._input.classList.add("active"),ve("onOpen"),se(n)),!0===w.config.enableTime&&!0===w.config.noCalendar&&(!1!==w.config.allowInput||void 0!==e&&w.timeContainer.contains(e.relatedTarget)||setTimeout((function(){return w.hourElement.select()}),50))}},w.redraw=de,w.set=function(e,n){if(null!==e&&"object"==typeof e)for(var a in Object.assign(w.config,e),e)void 0!==me[a]&&me[a].forEach((function(e){return e()}));else w.config[e]=n,void 0!==me[e]?me[e].forEach((function(e){return e()})):t.indexOf(e)>-1&&(w.config[e]=c(n));w.redraw(),Me(!0)},w.setDate=function(e,n,t){if(void 0===n&&(n=!1),void 0===t&&(t=w.config.dateFormat),0!==e&&!e||e instanceof Array&&0===e.length)return w.clear(n);ge(e,t),w.latestSelectedDateObj=w.selectedDates[w.selectedDates.length-1],w.redraw(),Y(void 0,n),O(),0===w.selectedDates.length&&w.clear(!1),Me(n),n&&ve("onChange")},w.toggle=function(e){if(!0===w.isOpen)return w.close();w.open(e)};var me={locale:[ce,z],showMonths:[q,I,V],minDate:[Y],maxDate:[Y],positionElement:[he],clickOpens:[function(){!0===w.config.clickOpens?(N(w._input,"focus",w.open),N(w._input,"click",w.open)):(w._input.removeEventListener("focus",w.open),w._input.removeEventListener("click",w.open))}]};function ge(e,n){var t=[];if(e instanceof Array)t=e.map((function(e){return w.parseDate(e,n)}));else if(e instanceof Date||"number"==typeof e)t=[w.parseDate(e,n)];else if("string"==typeof e)switch(w.config.mode){case"single":case"time":t=[w.parseDate(e,n)];break;case"multiple":t=e.split(w.config.conjunction).map((function(e){return w.parseDate(e,n)}));break;case"range":t=e.split(w.l10n.rangeSeparator).map((function(e){return w.parseDate(e,n)}))}else w.config.errorHandler(new Error("Invalid date supplied: "+JSON.stringify(e)));w.selectedDates=w.config.allowInvalidPreload?t:t.filter((function(e){return e instanceof Date&&ee(e,!1)})),"range"===w.config.mode&&w.selectedDates.sort((function(e,n){return e.getTime()-n.getTime()}))}function pe(e){return e.slice().map((function(e){return"string"==typeof e||"number"==typeof e||e instanceof Date?w.parseDate(e,void 0,!0):e&&"object"==typeof e&&e.from&&e.to?{from:w.parseDate(e.from,void 0),to:w.parseDate(e.to,void 0)}:e})).filter((function(e){return e}))}function he(){w._positionElement=w.config.positionElement||w._input}function ve(e,n){if(void 0!==w.config){var t=w.config[e];if(void 0!==t&&t.length>0)for(var a=0;t[a]&&a<t.length;a++)t[a](w.selectedDates,w.input.value,w,n);"onChange"===e&&(w.input.dispatchEvent(De("change")),w.input.dispatchEvent(De("input")))}}function De(e){var n=document.createEvent("Event");return n.initEvent(e,!0,!0),n}function we(e){for(var n=0;n<w.selectedDates.length;n++){var t=w.selectedDates[n];if(t instanceof Date&&0===M(t,e))return""+n}return!1}function be(){w.config.noCalendar||w.isMobile||!w.monthNav||(w.yearElements.forEach((function(e,n){var t=new Date(w.currentYear,w.currentMonth,1);t.setMonth(w.currentMonth+n),w.config.showMonths>1||"static"===w.config.monthSelectorType?w.monthElements[n].textContent=h(t.getMonth(),w.config.shorthandCurrentMonth,w.l10n)+" ":w.monthsDropdownContainer.value=t.getMonth().toString(),e.value=t.getFullYear().toString()})),w._hidePrevMonthArrow=void 0!==w.config.minDate&&(w.currentYear===w.config.minDate.getFullYear()?w.currentMonth<=w.config.minDate.getMonth():w.currentYear<w.config.minDate.getFullYear()),w._hideNextMonthArrow=void 0!==w.config.maxDate&&(w.currentYear===w.config.maxDate.getFullYear()?w.currentMonth+1>w.config.maxDate.getMonth():w.currentYear>w.config.maxDate.getFullYear()))}function Ce(e){var n=e||(w.config.altInput?w.config.altFormat:w.config.dateFormat);return w.selectedDates.map((function(e){return w.formatDate(e,n)})).filter((function(e,n,t){return"range"!==w.config.mode||w.config.enableTime||t.indexOf(e)===n})).join("range"!==w.config.mode?w.config.conjunction:w.l10n.rangeSeparator)}function Me(e){void 0===e&&(e=!0),void 0!==w.mobileInput&&w.mobileFormatStr&&(w.mobileInput.value=void 0!==w.latestSelectedDateObj?w.formatDate(w.latestSelectedDateObj,w.mobileFormatStr):""),w.input.value=Ce(w.config.dateFormat),void 0!==w.altInput&&(w.altInput.value=Ce(w.config.altFormat)),!1!==e&&ve("onValueUpdate")}function ye(e){var n=g(e),t=w.prevMonthNav.contains(n),a=w.nextMonthNav.contains(n);t||a?G(t?-1:1):w.yearElements.indexOf(n)>=0?n.select():n.classList.contains("arrowUp")?w.changeYear(w.currentYear+1):n.classList.contains("arrowDown")&&w.changeYear(w.currentYear-1)}return function(){w.element=w.input=p,w.isOpen=!1,function(){var n=["wrap","weekNumbers","allowInput","allowInvalidPreload","clickOpens","time_24hr","enableTime","noCalendar","altInput","shorthandCurrentMonth","inline","static","enableSeconds","disableMobile"],i=e(e({},JSON.parse(JSON.stringify(p.dataset||{}))),v),o={};w.config.parseDate=i.parseDate,w.config.formatDate=i.formatDate,Object.defineProperty(w.config,"enable",{get:function(){return w.config._enable},set:function(e){w.config._enable=pe(e)}}),Object.defineProperty(w.config,"disable",{get:function(){return w.config._disable},set:function(e){w.config._disable=pe(e)}});var r="time"===i.mode;if(!i.dateFormat&&(i.enableTime||r)){var l=T.defaultConfig.dateFormat||a.dateFormat;o.dateFormat=i.noCalendar||r?"H:i"+(i.enableSeconds?":S":""):l+" H:i"+(i.enableSeconds?":S":"")}if(i.altInput&&(i.enableTime||r)&&!i.altFormat){var s=T.defaultConfig.altFormat||a.altFormat;o.altFormat=i.noCalendar||r?"h:i"+(i.enableSeconds?":S K":" K"):s+" h:i"+(i.enableSeconds?":S":"")+" K"}Object.defineProperty(w.config,"minDate",{get:function(){return w.config._minDate},set:re("min")}),Object.defineProperty(w.config,"maxDate",{get:function(){return w.config._maxDate},set:re("max")});var d=function(e){return function(n){w.config["min"===e?"_minTime":"_maxTime"]=w.parseDate(n,"H:i:S")}};Object.defineProperty(w.config,"minTime",{get:function(){return w.config._minTime},set:d("min")}),Object.defineProperty(w.config,"maxTime",{get:function(){return w.config._maxTime},set:d("max")}),"time"===i.mode&&(w.config.noCalendar=!0,w.config.enableTime=!0),Object.assign(w.config,o,i);for(var u=0;u<n.length;u++)w.config[n[u]]=!0===w.config[n[u]]||"true"===w.config[n[u]];for(t.filter((function(e){return void 0!==w.config[e]})).forEach((function(e){w.config[e]=c(w.config[e]||[]).map(k)})),w.isMobile=!w.config.disableMobile&&!w.config.inline&&"single"===w.config.mode&&!w.config.disable.length&&!w.config.enable&&!w.config.weekNumbers&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),u=0;u<w.config.plugins.length;u++){var f=w.config.plugins[u](w)||{};for(var m in f)t.indexOf(m)>-1?w.config[m]=c(f[m]).map(k).concat(w.config[m]):void 0===i[m]&&(w.config[m]=f[m])}i.altInputClass||(w.config.altInputClass=le().className+" "+w.config.altInputClass),ve("onParseConfig")}(),ce(),w.input=le(),w.input?(w.input._type=w.input.type,w.input.type="text",w.input.classList.add("flatpickr-input"),w._input=w.input,w.config.altInput&&(w.altInput=d(w.input.nodeName,w.config.altInputClass),w._input=w.altInput,w.altInput.placeholder=w.input.placeholder,w.altInput.disabled=w.input.disabled,w.altInput.required=w.input.required,w.altInput.tabIndex=w.input.tabIndex,w.altInput.type="text",w.input.setAttribute("type","hidden"),!w.config.static&&w.input.parentNode&&w.input.parentNode.insertBefore(w.altInput,w.input.nextSibling)),w.config.allowInput||w._input.setAttribute("readonly","readonly"),he()):w.config.errorHandler(new Error("Invalid input element specified")),function(){w.selectedDates=[],w.now=w.parseDate(w.config.now)||new Date;var e=w.config.defaultDate||("INPUT"!==w.input.nodeName&&"TEXTAREA"!==w.input.nodeName||!w.input.placeholder||w.input.value!==w.input.placeholder?w.input.value:null);e&&ge(e,w.config.dateFormat),w._initialDate=w.selectedDates.length>0?w.selectedDates[0]:w.config.minDate&&w.config.minDate.getTime()>w.now.getTime()?w.config.minDate:w.config.maxDate&&w.config.maxDate.getTime()<w.now.getTime()?w.config.maxDate:w.now,w.currentYear=w._initialDate.getFullYear(),w.currentMonth=w._initialDate.getMonth(),w.selectedDates.length>0&&(w.latestSelectedDateObj=w.selectedDates[0]),void 0!==w.config.minTime&&(w.config.minTime=w.parseDate(w.config.minTime,"H:i")),void 0!==w.config.maxTime&&(w.config.maxTime=w.parseDate(w.config.maxTime,"H:i")),w.minDateHasTime=!!w.config.minDate&&(w.config.minDate.getHours()>0||w.config.minDate.getMinutes()>0||w.config.minDate.getSeconds()>0),w.maxDateHasTime=!!w.config.maxDate&&(w.config.maxDate.getHours()>0||w.config.maxDate.getMinutes()>0||w.config.maxDate.getSeconds()>0)}(),w.utils={getDaysInMonth:function(e,n){return void 0===e&&(e=w.currentMonth),void 0===n&&(n=w.currentYear),1===e&&(n%4==0&&n%100!=0||n%400==0)?29:w.l10n.daysInMonth[e]}},w.isMobile||function(){var e=window.document.createDocumentFragment();if(w.calendarContainer=d("div","flatpickr-calendar"),w.calendarContainer.tabIndex=-1,!w.config.noCalendar){if(e.appendChild((w.monthNav=d("div","flatpickr-months"),w.yearElements=[],w.monthElements=[],w.prevMonthNav=d("span","flatpickr-prev-month"),w.prevMonthNav.innerHTML=w.config.prevArrow,w.nextMonthNav=d("span","flatpickr-next-month"),w.nextMonthNav.innerHTML=w.config.nextArrow,q(),Object.defineProperty(w,"_hidePrevMonthArrow",{get:function(){return w.__hidePrevMonthArrow},set:function(e){w.__hidePrevMonthArrow!==e&&(s(w.prevMonthNav,"flatpickr-disabled",e),w.__hidePrevMonthArrow=e)}}),Object.defineProperty(w,"_hideNextMonthArrow",{get:function(){return w.__hideNextMonthArrow},set:function(e){w.__hideNextMonthArrow!==e&&(s(w.nextMonthNav,"flatpickr-disabled",e),w.__hideNextMonthArrow=e)}}),w.currentYearElement=w.yearElements[0],be(),w.monthNav)),w.innerContainer=d("div","flatpickr-innerContainer"),w.config.weekNumbers){var n=function(){w.calendarContainer.classList.add("hasWeeks");var e=d("div","flatpickr-weekwrapper");e.appendChild(d("span","flatpickr-weekday",w.l10n.weekAbbreviation));var n=d("div","flatpickr-weeks");return e.appendChild(n),{weekWrapper:e,weekNumbers:n}}(),t=n.weekWrapper,a=n.weekNumbers;w.innerContainer.appendChild(t),w.weekNumbers=a,w.weekWrapper=t}w.rContainer=d("div","flatpickr-rContainer"),w.rContainer.appendChild(V()),w.daysContainer||(w.daysContainer=d("div","flatpickr-days"),w.daysContainer.tabIndex=-1),K(),w.rContainer.appendChild(w.daysContainer),w.innerContainer.appendChild(w.rContainer),e.appendChild(w.innerContainer)}w.config.enableTime&&e.appendChild(function(){w.calendarContainer.classList.add("hasTime"),w.config.noCalendar&&w.calendarContainer.classList.add("noCalendar");var e=x(w.config);w.timeContainer=d("div","flatpickr-time"),w.timeContainer.tabIndex=-1;var n=d("span","flatpickr-time-separator",":"),t=m("flatpickr-hour",{"aria-label":w.l10n.hourAriaLabel});w.hourElement=t.getElementsByTagName("input")[0];var a=m("flatpickr-minute",{"aria-label":w.l10n.minuteAriaLabel});if(w.minuteElement=a.getElementsByTagName("input")[0],w.hourElement.tabIndex=w.minuteElement.tabIndex=-1,w.hourElement.value=o(w.latestSelectedDateObj?w.latestSelectedDateObj.getHours():w.config.time_24hr?e.hours:function(e){switch(e%24){case 0:case 12:return 12;default:return e%12}}(e.hours)),w.minuteElement.value=o(w.latestSelectedDateObj?w.latestSelectedDateObj.getMinutes():e.minutes),w.hourElement.setAttribute("step",w.config.hourIncrement.toString()),w.minuteElement.setAttribute("step",w.config.minuteIncrement.toString()),w.hourElement.setAttribute("min",w.config.time_24hr?"0":"1"),w.hourElement.setAttribute("max",w.config.time_24hr?"23":"12"),w.hourElement.setAttribute("maxlength","2"),w.minuteElement.setAttribute("min","0"),w.minuteElement.setAttribute("max","59"),w.minuteElement.setAttribute("maxlength","2"),w.timeContainer.appendChild(t),w.timeContainer.appendChild(n),w.timeContainer.appendChild(a),w.config.time_24hr&&w.timeContainer.classList.add("time24hr"),w.config.enableSeconds){w.timeContainer.classList.add("hasSeconds");var i=m("flatpickr-second");w.secondElement=i.getElementsByTagName("input")[0],w.secondElement.value=o(w.latestSelectedDateObj?w.latestSelectedDateObj.getSeconds():e.seconds),w.secondElement.setAttribute("step",w.minuteElement.getAttribute("step")),w.secondElement.setAttribute("min","0"),w.secondElement.setAttribute("max","59"),w.secondElement.setAttribute("maxlength","2"),w.timeContainer.appendChild(d("span","flatpickr-time-separator",":")),w.timeContainer.appendChild(i)}return w.config.time_24hr||(w.amPM=d("span","flatpickr-am-pm",w.l10n.amPM[r((w.latestSelectedDateObj?w.hourElement.value:w.config.defaultHour)>11)]),w.amPM.title=w.l10n.toggleTitle,w.amPM.tabIndex=-1,w.timeContainer.appendChild(w.amPM)),w.timeContainer}()),s(w.calendarContainer,"rangeMode","range"===w.config.mode),s(w.calendarContainer,"animate",!0===w.config.animate),s(w.calendarContainer,"multiMonth",w.config.showMonths>1),w.calendarContainer.appendChild(e);var i=void 0!==w.config.appendTo&&void 0!==w.config.appendTo.nodeType;if((w.config.inline||w.config.static)&&(w.calendarContainer.classList.add(w.config.inline?"inline":"static"),w.config.inline&&(!i&&w.element.parentNode?w.element.parentNode.insertBefore(w.calendarContainer,w._input.nextSibling):void 0!==w.config.appendTo&&w.config.appendTo.appendChild(w.calendarContainer)),w.config.static)){var l=d("div","flatpickr-wrapper");w.element.parentNode&&w.element.parentNode.insertBefore(l,w.element),l.appendChild(w.element),w.altInput&&l.appendChild(w.altInput),l.appendChild(w.calendarContainer)}w.config.static||w.config.inline||(void 0!==w.config.appendTo?w.config.appendTo:window.document.body).appendChild(w.calendarContainer)}(),function(){if(w.config.wrap&&["open","close","toggle","clear"].forEach((function(e){Array.prototype.forEach.call(w.element.querySelectorAll("[data-"+e+"]"),(function(n){return N(n,"click",w[e])}))})),w.isMobile)!function(){var e=w.config.enableTime?w.config.noCalendar?"time":"datetime-local":"date";w.mobileInput=d("input",w.input.className+" flatpickr-mobile"),w.mobileInput.tabIndex=1,w.mobileInput.type=e,w.mobileInput.disabled=w.input.disabled,w.mobileInput.required=w.input.required,w.mobileInput.placeholder=w.input.placeholder,w.mobileFormatStr="datetime-local"===e?"Y-m-d\\TH:i:S":"date"===e?"Y-m-d":"H:i:S",w.selectedDates.length>0&&(w.mobileInput.defaultValue=w.mobileInput.value=w.formatDate(w.selectedDates[0],w.mobileFormatStr)),w.config.minDate&&(w.mobileInput.min=w.formatDate(w.config.minDate,"Y-m-d")),w.config.maxDate&&(w.mobileInput.max=w.formatDate(w.config.maxDate,"Y-m-d")),w.input.getAttribute("step")&&(w.mobileInput.step=String(w.input.getAttribute("step"))),w.input.type="hidden",void 0!==w.altInput&&(w.altInput.type="hidden");try{w.input.parentNode&&w.input.parentNode.insertBefore(w.mobileInput,w.input.nextSibling)}catch(e){}N(w.mobileInput,"change",(function(e){w.setDate(g(e).value,!1,w.mobileFormatStr),ve("onChange"),ve("onClose")}))}();else{var e=l(oe,50);w._debouncedChange=l(P,300),w.daysContainer&&!/iPhone|iPad|iPod/i.test(navigator.userAgent)&&N(w.daysContainer,"mouseover",(function(e){"range"===w.config.mode&&ie(g(e))})),N(w._input,"keydown",ae),void 0!==w.calendarContainer&&N(w.calendarContainer,"keydown",ae),w.config.inline||w.config.static||N(window,"resize",e),void 0!==window.ontouchstart?N(window.document,"touchstart",Q):N(window.document,"mousedown",Q),N(window.document,"focus",Q,{capture:!0}),!0===w.config.clickOpens&&(N(w._input,"focus",w.open),N(w._input,"click",w.open)),void 0!==w.daysContainer&&(N(w.monthNav,"click",ye),N(w.monthNav,["keyup","increment"],A),N(w.daysContainer,"click",fe)),void 0!==w.timeContainer&&void 0!==w.minuteElement&&void 0!==w.hourElement&&(N(w.timeContainer,["increment"],S),N(w.timeContainer,"blur",S,{capture:!0}),N(w.timeContainer,"click",j),N([w.hourElement,w.minuteElement],["focus","click"],(function(e){return g(e).select()})),void 0!==w.secondElement&&N(w.secondElement,"focus",(function(){return w.secondElement&&w.secondElement.select()})),void 0!==w.amPM&&N(w.amPM,"click",(function(e){S(e)}))),w.config.allowInput&&N(w._input,"blur",te)}}(),(w.selectedDates.length||w.config.noCalendar)&&(w.config.enableTime&&O(w.config.noCalendar?w.latestSelectedDateObj:void 0),Me(!1)),I();var n=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);!w.isMobile&&n&&se(),ve("onReady")}(),w}function k(e,n){for(var t=Array.prototype.slice.call(e).filter((function(e){return e instanceof HTMLElement})),a=[],i=0;i<t.length;i++){var o=t[i];try{if(null!==o.getAttribute("data-fp-omit"))continue;void 0!==o._flatpickr&&(o._flatpickr.destroy(),o._flatpickr=void 0),o._flatpickr=E(o,n||{}),a.push(o._flatpickr)}catch(e){console.error(e)}}return 1===a.length?a[0]:a}"function"!=typeof Object.assign&&(Object.assign=function(e){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];if(!e)throw TypeError("Cannot convert undefined or null to object");for(var a=function(n){n&&Object.keys(n).forEach((function(t){return e[t]=n[t]}))},i=0,o=n;i<o.length;i++){var r=o[i];a(r)}return e}),"undefined"!=typeof HTMLElement&&"undefined"!=typeof HTMLCollection&&"undefined"!=typeof NodeList&&(HTMLCollection.prototype.flatpickr=NodeList.prototype.flatpickr=function(e){return k(this,e)},HTMLElement.prototype.flatpickr=function(e){return k([this],e)});var T=function(e,n){return"string"==typeof e?k(window.document.querySelectorAll(e),n):e instanceof Node?k([e],n):k(e,n)};return T.defaultConfig={},T.l10ns={en:e({},i),default:e({},i)},T.localize=function(n){T.l10ns.default=e(e({},T.l10ns.default),n)},T.setDefaults=function(n){T.defaultConfig=e(e({},T.defaultConfig),n)},T.parseDate=C({}),T.formatDate=b({}),T.compareDates=M,"undefined"!=typeof jQuery&&void 0!==jQuery.fn&&(jQuery.fn.flatpickr=function(e){return k(this,e)}),Date.prototype.fp_incr=function(e){return new Date(this.getFullYear(),this.getMonth(),this.getDate()+("string"==typeof e?parseInt(e,10):e))},"undefined"!=typeof window&&(window.flatpickr=T),T}));
/*! Select2 4.0.13 | https://github.com/select2/select2/blob/master/LICENSE.md */
!function(n){"function"==typeof define&&define.amd?define(["jquery"],n):"object"==typeof module&&module.exports?module.exports=function(e,t){return void 0===t&&(t="undefined"!=typeof window?require("jquery"):require("jquery")(e)),n(t),t}:n(jQuery)}(function(u){var e=function(){if(u&&u.fn&&u.fn.select2&&u.fn.select2.amd)var e=u.fn.select2.amd;var t,n,r,h,o,s,f,g,m,v,y,_,i,a,b;function w(e,t){return i.call(e,t)}function l(e,t){var n,r,i,o,s,a,l,c,u,d,p,h=t&&t.split("/"),f=y.map,g=f&&f["*"]||{};if(e){for(s=(e=e.split("/")).length-1,y.nodeIdCompat&&b.test(e[s])&&(e[s]=e[s].replace(b,"")),"."===e[0].charAt(0)&&h&&(e=h.slice(0,h.length-1).concat(e)),u=0;u<e.length;u++)if("."===(p=e[u]))e.splice(u,1),--u;else if(".."===p){if(0===u||1===u&&".."===e[2]||".."===e[u-1])continue;0<u&&(e.splice(u-1,2),u-=2)}e=e.join("/")}if((h||g)&&f){for(u=(n=e.split("/")).length;0<u;--u){if(r=n.slice(0,u).join("/"),h)for(d=h.length;0<d;--d)if(i=(i=f[h.slice(0,d).join("/")])&&i[r]){o=i,a=u;break}if(o)break;!l&&g&&g[r]&&(l=g[r],c=u)}!o&&l&&(o=l,a=c),o&&(n.splice(0,a,o),e=n.join("/"))}return e}function A(t,n){return function(){var e=a.call(arguments,0);return"string"!=typeof e[0]&&1===e.length&&e.push(null),s.apply(h,e.concat([t,n]))}}function x(t){return function(e){m[t]=e}}function D(e){if(w(v,e)){var t=v[e];delete v[e],_[e]=!0,o.apply(h,t)}if(!w(m,e)&&!w(_,e))throw new Error("No "+e);return m[e]}function c(e){var t,n=e?e.indexOf("!"):-1;return-1<n&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function S(e){return e?c(e):[]}return e&&e.requirejs||(e?n=e:e={},m={},v={},y={},_={},i=Object.prototype.hasOwnProperty,a=[].slice,b=/\.js$/,f=function(e,t){var n,r,i=c(e),o=i[0],s=t[1];return e=i[1],o&&(n=D(o=l(o,s))),o?e=n&&n.normalize?n.normalize(e,(r=s,function(e){return l(e,r)})):l(e,s):(o=(i=c(e=l(e,s)))[0],e=i[1],o&&(n=D(o))),{f:o?o+"!"+e:e,n:e,pr:o,p:n}},g={require:function(e){return A(e)},exports:function(e){var t=m[e];return void 0!==t?t:m[e]={}},module:function(e){return{id:e,uri:"",exports:m[e],config:(t=e,function(){return y&&y.config&&y.config[t]||{}})};var t}},o=function(e,t,n,r){var i,o,s,a,l,c,u,d=[],p=typeof n;if(c=S(r=r||e),"undefined"==p||"function"==p){for(t=!t.length&&n.length?["require","exports","module"]:t,l=0;l<t.length;l+=1)if("require"===(o=(a=f(t[l],c)).f))d[l]=g.require(e);else if("exports"===o)d[l]=g.exports(e),u=!0;else if("module"===o)i=d[l]=g.module(e);else if(w(m,o)||w(v,o)||w(_,o))d[l]=D(o);else{if(!a.p)throw new Error(e+" missing "+o);a.p.load(a.n,A(r,!0),x(o),{}),d[l]=m[o]}s=n?n.apply(m[e],d):void 0,e&&(i&&i.exports!==h&&i.exports!==m[e]?m[e]=i.exports:s===h&&u||(m[e]=s))}else e&&(m[e]=n)},t=n=s=function(e,t,n,r,i){if("string"==typeof e)return g[e]?g[e](t):D(f(e,S(t)).f);if(!e.splice){if((y=e).deps&&s(y.deps,y.callback),!t)return;t.splice?(e=t,t=n,n=null):e=h}return t=t||function(){},"function"==typeof n&&(n=r,r=i),r?o(h,e,t,n):setTimeout(function(){o(h,e,t,n)},4),s},s.config=function(e){return s(e)},t._defined=m,(r=function(e,t,n){if("string"!=typeof e)throw new Error("See almond README: incorrect module build, no module name");t.splice||(n=t,t=[]),w(m,e)||w(v,e)||(v[e]=[e,t,n])}).amd={jQuery:!0},e.requirejs=t,e.require=n,e.define=r),e.define("almond",function(){}),e.define("jquery",[],function(){var e=u||$;return null==e&&console&&console.error&&console.error("Select2: An instance of jQuery or a jQuery-compatible library was not found. Make sure that you are including jQuery before Select2 on your web page."),e}),e.define("select2/utils",["jquery"],function(o){var i={};function u(e){var t=e.prototype,n=[];for(var r in t){"function"==typeof t[r]&&"constructor"!==r&&n.push(r)}return n}i.Extend=function(e,t){var n={}.hasOwnProperty;function r(){this.constructor=e}for(var i in t)n.call(t,i)&&(e[i]=t[i]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},i.Decorate=function(r,i){var e=u(i),t=u(r);function o(){var e=Array.prototype.unshift,t=i.prototype.constructor.length,n=r.prototype.constructor;0<t&&(e.call(arguments,r.prototype.constructor),n=i.prototype.constructor),n.apply(this,arguments)}i.displayName=r.displayName,o.prototype=new function(){this.constructor=o};for(var n=0;n<t.length;n++){var s=t[n];o.prototype[s]=r.prototype[s]}function a(e){var t=function(){};e in o.prototype&&(t=o.prototype[e]);var n=i.prototype[e];return function(){return Array.prototype.unshift.call(arguments,t),n.apply(this,arguments)}}for(var l=0;l<e.length;l++){var c=e[l];o.prototype[c]=a(c)}return o};function e(){this.listeners={}}e.prototype.on=function(e,t){this.listeners=this.listeners||{},e in this.listeners?this.listeners[e].push(t):this.listeners[e]=[t]},e.prototype.trigger=function(e){var t=Array.prototype.slice,n=t.call(arguments,1);this.listeners=this.listeners||{},null==n&&(n=[]),0===n.length&&n.push({}),(n[0]._type=e)in this.listeners&&this.invoke(this.listeners[e],t.call(arguments,1)),"*"in this.listeners&&this.invoke(this.listeners["*"],arguments)},e.prototype.invoke=function(e,t){for(var n=0,r=e.length;n<r;n++)e[n].apply(this,t)},i.Observable=e,i.generateChars=function(e){for(var t="",n=0;n<e;n++){t+=Math.floor(36*Math.random()).toString(36)}return t},i.bind=function(e,t){return function(){e.apply(t,arguments)}},i._convertData=function(e){for(var t in e){var n=t.split("-"),r=e;if(1!==n.length){for(var i=0;i<n.length;i++){var o=n[i];(o=o.substring(0,1).toLowerCase()+o.substring(1))in r||(r[o]={}),i==n.length-1&&(r[o]=e[t]),r=r[o]}delete e[t]}}return e},i.hasScroll=function(e,t){var n=o(t),r=t.style.overflowX,i=t.style.overflowY;return(r!==i||"hidden"!==i&&"visible"!==i)&&("scroll"===r||"scroll"===i||(n.innerHeight()<t.scrollHeight||n.innerWidth()<t.scrollWidth))},i.escapeMarkup=function(e){var t={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return"string"!=typeof e?e:String(e).replace(/[&<>"'\/\\]/g,function(e){return t[e]})},i.appendMany=function(e,t){if("1.7"===o.fn.jquery.substr(0,3)){var n=o();o.map(t,function(e){n=n.add(e)}),t=n}e.append(t)},i.__cache={};var n=0;return i.GetUniqueElementId=function(e){var t=e.getAttribute("data-select2-id");return null==t&&(e.id?(t=e.id,e.setAttribute("data-select2-id",t)):(e.setAttribute("data-select2-id",++n),t=n.toString())),t},i.StoreData=function(e,t,n){var r=i.GetUniqueElementId(e);i.__cache[r]||(i.__cache[r]={}),i.__cache[r][t]=n},i.GetData=function(e,t){var n=i.GetUniqueElementId(e);return t?i.__cache[n]&&null!=i.__cache[n][t]?i.__cache[n][t]:o(e).data(t):i.__cache[n]},i.RemoveData=function(e){var t=i.GetUniqueElementId(e);null!=i.__cache[t]&&delete i.__cache[t],e.removeAttribute("data-select2-id")},i}),e.define("select2/results",["jquery","./utils"],function(h,f){function r(e,t,n){this.$element=e,this.data=n,this.options=t,r.__super__.constructor.call(this)}return f.Extend(r,f.Observable),r.prototype.render=function(){var e=h('<ul class="select2-results__options" role="listbox"></ul>');return this.options.get("multiple")&&e.attr("aria-multiselectable","true"),this.$results=e},r.prototype.clear=function(){this.$results.empty()},r.prototype.displayMessage=function(e){var t=this.options.get("escapeMarkup");this.clear(),this.hideLoading();var n=h('<li role="alert" aria-live="assertive" class="select2-results__option"></li>'),r=this.options.get("translations").get(e.message);n.append(t(r(e.args))),n[0].className+=" select2-results__message",this.$results.append(n)},r.prototype.hideMessages=function(){this.$results.find(".select2-results__message").remove()},r.prototype.append=function(e){this.hideLoading();var t=[];if(null!=e.results&&0!==e.results.length){e.results=this.sort(e.results);for(var n=0;n<e.results.length;n++){var r=e.results[n],i=this.option(r);t.push(i)}this.$results.append(t)}else 0===this.$results.children().length&&this.trigger("results:message",{message:"noResults"})},r.prototype.position=function(e,t){t.find(".select2-results").append(e)},r.prototype.sort=function(e){return this.options.get("sorter")(e)},r.prototype.highlightFirstItem=function(){var e=this.$results.find(".select2-results__option[aria-selected]"),t=e.filter("[aria-selected=true]");0<t.length?t.first().trigger("mouseenter"):e.first().trigger("mouseenter"),this.ensureHighlightVisible()},r.prototype.setClasses=function(){var t=this;this.data.current(function(e){var r=h.map(e,function(e){return e.id.toString()});t.$results.find(".select2-results__option[aria-selected]").each(function(){var e=h(this),t=f.GetData(this,"data"),n=""+t.id;null!=t.element&&t.element.selected||null==t.element&&-1<h.inArray(n,r)?e.attr("aria-selected","true"):e.attr("aria-selected","false")})})},r.prototype.showLoading=function(e){this.hideLoading();var t={disabled:!0,loading:!0,text:this.options.get("translations").get("searching")(e)},n=this.option(t);n.className+=" loading-results",this.$results.prepend(n)},r.prototype.hideLoading=function(){this.$results.find(".loading-results").remove()},r.prototype.option=function(e){var t=document.createElement("li");t.className="select2-results__option";var n={role:"option","aria-selected":"false"},r=window.Element.prototype.matches||window.Element.prototype.msMatchesSelector||window.Element.prototype.webkitMatchesSelector;for(var i in(null!=e.element&&r.call(e.element,":disabled")||null==e.element&&e.disabled)&&(delete n["aria-selected"],n["aria-disabled"]="true"),null==e.id&&delete n["aria-selected"],null!=e._resultId&&(t.id=e._resultId),e.title&&(t.title=e.title),e.children&&(n.role="group",n["aria-label"]=e.text,delete n["aria-selected"]),n){var o=n[i];t.setAttribute(i,o)}if(e.children){var s=h(t),a=document.createElement("strong");a.className="select2-results__group";h(a);this.template(e,a);for(var l=[],c=0;c<e.children.length;c++){var u=e.children[c],d=this.option(u);l.push(d)}var p=h("<ul></ul>",{class:"select2-results__options select2-results__options--nested"});p.append(l),s.append(a),s.append(p)}else this.template(e,t);return f.StoreData(t,"data",e),t},r.prototype.bind=function(t,e){var l=this,n=t.id+"-results";this.$results.attr("id",n),t.on("results:all",function(e){l.clear(),l.append(e.data),t.isOpen()&&(l.setClasses(),l.highlightFirstItem())}),t.on("results:append",function(e){l.append(e.data),t.isOpen()&&l.setClasses()}),t.on("query",function(e){l.hideMessages(),l.showLoading(e)}),t.on("select",function(){t.isOpen()&&(l.setClasses(),l.options.get("scrollAfterSelect")&&l.highlightFirstItem())}),t.on("unselect",function(){t.isOpen()&&(l.setClasses(),l.options.get("scrollAfterSelect")&&l.highlightFirstItem())}),t.on("open",function(){l.$results.attr("aria-expanded","true"),l.$results.attr("aria-hidden","false"),l.setClasses(),l.ensureHighlightVisible()}),t.on("close",function(){l.$results.attr("aria-expanded","false"),l.$results.attr("aria-hidden","true"),l.$results.removeAttr("aria-activedescendant")}),t.on("results:toggle",function(){var e=l.getHighlightedResults();0!==e.length&&e.trigger("mouseup")}),t.on("results:select",function(){var e=l.getHighlightedResults();if(0!==e.length){var t=f.GetData(e[0],"data");"true"==e.attr("aria-selected")?l.trigger("close",{}):l.trigger("select",{data:t})}}),t.on("results:previous",function(){var e=l.getHighlightedResults(),t=l.$results.find("[aria-selected]"),n=t.index(e);if(!(n<=0)){var r=n-1;0===e.length&&(r=0);var i=t.eq(r);i.trigger("mouseenter");var o=l.$results.offset().top,s=i.offset().top,a=l.$results.scrollTop()+(s-o);0===r?l.$results.scrollTop(0):s-o<0&&l.$results.scrollTop(a)}}),t.on("results:next",function(){var e=l.getHighlightedResults(),t=l.$results.find("[aria-selected]"),n=t.index(e)+1;if(!(n>=t.length)){var r=t.eq(n);r.trigger("mouseenter");var i=l.$results.offset().top+l.$results.outerHeight(!1),o=r.offset().top+r.outerHeight(!1),s=l.$results.scrollTop()+o-i;0===n?l.$results.scrollTop(0):i<o&&l.$results.scrollTop(s)}}),t.on("results:focus",function(e){e.element.addClass("select2-results__option--highlighted")}),t.on("results:message",function(e){l.displayMessage(e)}),h.fn.mousewheel&&this.$results.on("mousewheel",function(e){var t=l.$results.scrollTop(),n=l.$results.get(0).scrollHeight-t+e.deltaY,r=0<e.deltaY&&t-e.deltaY<=0,i=e.deltaY<0&&n<=l.$results.height();r?(l.$results.scrollTop(0),e.preventDefault(),e.stopPropagation()):i&&(l.$results.scrollTop(l.$results.get(0).scrollHeight-l.$results.height()),e.preventDefault(),e.stopPropagation())}),this.$results.on("mouseup",".select2-results__option[aria-selected]",function(e){var t=h(this),n=f.GetData(this,"data");"true"!==t.attr("aria-selected")?l.trigger("select",{originalEvent:e,data:n}):l.options.get("multiple")?l.trigger("unselect",{originalEvent:e,data:n}):l.trigger("close",{})}),this.$results.on("mouseenter",".select2-results__option[aria-selected]",function(e){var t=f.GetData(this,"data");l.getHighlightedResults().removeClass("select2-results__option--highlighted"),l.trigger("results:focus",{data:t,element:h(this)})})},r.prototype.getHighlightedResults=function(){return this.$results.find(".select2-results__option--highlighted")},r.prototype.destroy=function(){this.$results.remove()},r.prototype.ensureHighlightVisible=function(){var e=this.getHighlightedResults();if(0!==e.length){var t=this.$results.find("[aria-selected]").index(e),n=this.$results.offset().top,r=e.offset().top,i=this.$results.scrollTop()+(r-n),o=r-n;i-=2*e.outerHeight(!1),t<=2?this.$results.scrollTop(0):(o>this.$results.outerHeight()||o<0)&&this.$results.scrollTop(i)}},r.prototype.template=function(e,t){var n=this.options.get("templateResult"),r=this.options.get("escapeMarkup"),i=n(e,t);null==i?t.style.display="none":"string"==typeof i?t.innerHTML=r(i):h(t).append(i)},r}),e.define("select2/keys",[],function(){return{BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46}}),e.define("select2/selection/base",["jquery","../utils","../keys"],function(n,r,i){function o(e,t){this.$element=e,this.options=t,o.__super__.constructor.call(this)}return r.Extend(o,r.Observable),o.prototype.render=function(){var e=n('<span class="select2-selection" role="combobox"  aria-haspopup="true" aria-expanded="false"></span>');return this._tabindex=0,null!=r.GetData(this.$element[0],"old-tabindex")?this._tabindex=r.GetData(this.$element[0],"old-tabindex"):null!=this.$element.attr("tabindex")&&(this._tabindex=this.$element.attr("tabindex")),e.attr("title",this.$element.attr("title")),e.attr("tabindex",this._tabindex),e.attr("aria-disabled","false"),this.$selection=e},o.prototype.bind=function(e,t){var n=this,r=e.id+"-results";this.container=e,this.$selection.on("focus",function(e){n.trigger("focus",e)}),this.$selection.on("blur",function(e){n._handleBlur(e)}),this.$selection.on("keydown",function(e){n.trigger("keypress",e),e.which===i.SPACE&&e.preventDefault()}),e.on("results:focus",function(e){n.$selection.attr("aria-activedescendant",e.data._resultId)}),e.on("selection:update",function(e){n.update(e.data)}),e.on("open",function(){n.$selection.attr("aria-expanded","true"),n.$selection.attr("aria-owns",r),n._attachCloseHandler(e)}),e.on("close",function(){n.$selection.attr("aria-expanded","false"),n.$selection.removeAttr("aria-activedescendant"),n.$selection.removeAttr("aria-owns"),n.$selection.trigger("focus"),n._detachCloseHandler(e)}),e.on("enable",function(){n.$selection.attr("tabindex",n._tabindex),n.$selection.attr("aria-disabled","false")}),e.on("disable",function(){n.$selection.attr("tabindex","-1"),n.$selection.attr("aria-disabled","true")})},o.prototype._handleBlur=function(e){var t=this;window.setTimeout(function(){document.activeElement==t.$selection[0]||n.contains(t.$selection[0],document.activeElement)||t.trigger("blur",e)},1)},o.prototype._attachCloseHandler=function(e){n(document.body).on("mousedown.select2."+e.id,function(e){var t=n(e.target).closest(".select2");n(".select2.select2-container--open").each(function(){this!=t[0]&&r.GetData(this,"element").select2("close")})})},o.prototype._detachCloseHandler=function(e){n(document.body).off("mousedown.select2."+e.id)},o.prototype.position=function(e,t){t.find(".selection").append(e)},o.prototype.destroy=function(){this._detachCloseHandler(this.container)},o.prototype.update=function(e){throw new Error("The `update` method must be defined in child classes.")},o.prototype.isEnabled=function(){return!this.isDisabled()},o.prototype.isDisabled=function(){return this.options.get("disabled")},o}),e.define("select2/selection/single",["jquery","./base","../utils","../keys"],function(e,t,n,r){function i(){i.__super__.constructor.apply(this,arguments)}return n.Extend(i,t),i.prototype.render=function(){var e=i.__super__.render.call(this);return e.addClass("select2-selection--single"),e.html('<span class="select2-selection__rendered"></span><span class="select2-selection__arrow" role="presentation"><b role="presentation"></b></span>'),e},i.prototype.bind=function(t,e){var n=this;i.__super__.bind.apply(this,arguments);var r=t.id+"-container";this.$selection.find(".select2-selection__rendered").attr("id",r).attr("role","textbox").attr("aria-readonly","true"),this.$selection.attr("aria-labelledby",r),this.$selection.on("mousedown",function(e){1===e.which&&n.trigger("toggle",{originalEvent:e})}),this.$selection.on("focus",function(e){}),this.$selection.on("blur",function(e){}),t.on("focus",function(e){t.isOpen()||n.$selection.trigger("focus")})},i.prototype.clear=function(){var e=this.$selection.find(".select2-selection__rendered");e.empty(),e.removeAttr("title")},i.prototype.display=function(e,t){var n=this.options.get("templateSelection");return this.options.get("escapeMarkup")(n(e,t))},i.prototype.selectionContainer=function(){return e("<span></span>")},i.prototype.update=function(e){if(0!==e.length){var t=e[0],n=this.$selection.find(".select2-selection__rendered"),r=this.display(t,n);n.empty().append(r);var i=t.title||t.text;i?n.attr("title",i):n.removeAttr("title")}else this.clear()},i}),e.define("select2/selection/multiple",["jquery","./base","../utils"],function(i,e,l){function n(e,t){n.__super__.constructor.apply(this,arguments)}return l.Extend(n,e),n.prototype.render=function(){var e=n.__super__.render.call(this);return e.addClass("select2-selection--multiple"),e.html('<ul class="select2-selection__rendered"></ul>'),e},n.prototype.bind=function(e,t){var r=this;n.__super__.bind.apply(this,arguments),this.$selection.on("click",function(e){r.trigger("toggle",{originalEvent:e})}),this.$selection.on("click",".select2-selection__choice__remove",function(e){if(!r.isDisabled()){var t=i(this).parent(),n=l.GetData(t[0],"data");r.trigger("unselect",{originalEvent:e,data:n})}})},n.prototype.clear=function(){var e=this.$selection.find(".select2-selection__rendered");e.empty(),e.removeAttr("title")},n.prototype.display=function(e,t){var n=this.options.get("templateSelection");return this.options.get("escapeMarkup")(n(e,t))},n.prototype.selectionContainer=function(){return i('<li class="select2-selection__choice"><span class="select2-selection__choice__remove" role="presentation">&times;</span></li>')},n.prototype.update=function(e){if(this.clear(),0!==e.length){for(var t=[],n=0;n<e.length;n++){var r=e[n],i=this.selectionContainer(),o=this.display(r,i);i.append(o);var s=r.title||r.text;s&&i.attr("title",s),l.StoreData(i[0],"data",r),t.push(i)}var a=this.$selection.find(".select2-selection__rendered");l.appendMany(a,t)}},n}),e.define("select2/selection/placeholder",["../utils"],function(e){function t(e,t,n){this.placeholder=this.normalizePlaceholder(n.get("placeholder")),e.call(this,t,n)}return t.prototype.normalizePlaceholder=function(e,t){return"string"==typeof t&&(t={id:"",text:t}),t},t.prototype.createPlaceholder=function(e,t){var n=this.selectionContainer();return n.html(this.display(t)),n.addClass("select2-selection__placeholder").removeClass("select2-selection__choice"),n},t.prototype.update=function(e,t){var n=1==t.length&&t[0].id!=this.placeholder.id;if(1<t.length||n)return e.call(this,t);this.clear();var r=this.createPlaceholder(this.placeholder);this.$selection.find(".select2-selection__rendered").append(r)},t}),e.define("select2/selection/allowClear",["jquery","../keys","../utils"],function(i,r,a){function e(){}return e.prototype.bind=function(e,t,n){var r=this;e.call(this,t,n),null==this.placeholder&&this.options.get("debug")&&window.console&&console.error&&console.error("Select2: The `allowClear` option should be used in combination with the `placeholder` option."),this.$selection.on("mousedown",".select2-selection__clear",function(e){r._handleClear(e)}),t.on("keypress",function(e){r._handleKeyboardClear(e,t)})},e.prototype._handleClear=function(e,t){if(!this.isDisabled()){var n=this.$selection.find(".select2-selection__clear");if(0!==n.length){t.stopPropagation();var r=a.GetData(n[0],"data"),i=this.$element.val();this.$element.val(this.placeholder.id);var o={data:r};if(this.trigger("clear",o),o.prevented)this.$element.val(i);else{for(var s=0;s<r.length;s++)if(o={data:r[s]},this.trigger("unselect",o),o.prevented)return void this.$element.val(i);this.$element.trigger("input").trigger("change"),this.trigger("toggle",{})}}}},e.prototype._handleKeyboardClear=function(e,t,n){n.isOpen()||t.which!=r.DELETE&&t.which!=r.BACKSPACE||this._handleClear(t)},e.prototype.update=function(e,t){if(e.call(this,t),!(0<this.$selection.find(".select2-selection__placeholder").length||0===t.length)){var n=this.options.get("translations").get("removeAllItems"),r=i('<span class="select2-selection__clear" title="'+n()+'">&times;</span>');a.StoreData(r[0],"data",t),this.$selection.find(".select2-selection__rendered").prepend(r)}},e}),e.define("select2/selection/search",["jquery","../utils","../keys"],function(r,a,l){function e(e,t,n){e.call(this,t,n)}return e.prototype.render=function(e){var t=r('<li class="select2-search select2-search--inline"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="none" spellcheck="false" role="searchbox" aria-autocomplete="list" /></li>');this.$searchContainer=t,this.$search=t.find("input");var n=e.call(this);return this._transferTabIndex(),n},e.prototype.bind=function(e,t,n){var r=this,i=t.id+"-results";e.call(this,t,n),t.on("open",function(){r.$search.attr("aria-controls",i),r.$search.trigger("focus")}),t.on("close",function(){r.$search.val(""),r.$search.removeAttr("aria-controls"),r.$search.removeAttr("aria-activedescendant"),r.$search.trigger("focus")}),t.on("enable",function(){r.$search.prop("disabled",!1),r._transferTabIndex()}),t.on("disable",function(){r.$search.prop("disabled",!0)}),t.on("focus",function(e){r.$search.trigger("focus")}),t.on("results:focus",function(e){e.data._resultId?r.$search.attr("aria-activedescendant",e.data._resultId):r.$search.removeAttr("aria-activedescendant")}),this.$selection.on("focusin",".select2-search--inline",function(e){r.trigger("focus",e)}),this.$selection.on("focusout",".select2-search--inline",function(e){r._handleBlur(e)}),this.$selection.on("keydown",".select2-search--inline",function(e){if(e.stopPropagation(),r.trigger("keypress",e),r._keyUpPrevented=e.isDefaultPrevented(),e.which===l.BACKSPACE&&""===r.$search.val()){var t=r.$searchContainer.prev(".select2-selection__choice");if(0<t.length){var n=a.GetData(t[0],"data");r.searchRemoveChoice(n),e.preventDefault()}}}),this.$selection.on("click",".select2-search--inline",function(e){r.$search.val()&&e.stopPropagation()});var o=document.documentMode,s=o&&o<=11;this.$selection.on("input.searchcheck",".select2-search--inline",function(e){s?r.$selection.off("input.search input.searchcheck"):r.$selection.off("keyup.search")}),this.$selection.on("keyup.search input.search",".select2-search--inline",function(e){if(s&&"input"===e.type)r.$selection.off("input.search input.searchcheck");else{var t=e.which;t!=l.SHIFT&&t!=l.CTRL&&t!=l.ALT&&t!=l.TAB&&r.handleSearch(e)}})},e.prototype._transferTabIndex=function(e){this.$search.attr("tabindex",this.$selection.attr("tabindex")),this.$selection.attr("tabindex","-1")},e.prototype.createPlaceholder=function(e,t){this.$search.attr("placeholder",t.text)},e.prototype.update=function(e,t){var n=this.$search[0]==document.activeElement;this.$search.attr("placeholder",""),e.call(this,t),this.$selection.find(".select2-selection__rendered").append(this.$searchContainer),this.resizeSearch(),n&&this.$search.trigger("focus")},e.prototype.handleSearch=function(){if(this.resizeSearch(),!this._keyUpPrevented){var e=this.$search.val();this.trigger("query",{term:e})}this._keyUpPrevented=!1},e.prototype.searchRemoveChoice=function(e,t){this.trigger("unselect",{data:t}),this.$search.val(t.text),this.handleSearch()},e.prototype.resizeSearch=function(){this.$search.css("width","25px");var e="";""!==this.$search.attr("placeholder")?e=this.$selection.find(".select2-selection__rendered").width():e=.75*(this.$search.val().length+1)+"em";this.$search.css("width",e)},e}),e.define("select2/selection/eventRelay",["jquery"],function(s){function e(){}return e.prototype.bind=function(e,t,n){var r=this,i=["open","opening","close","closing","select","selecting","unselect","unselecting","clear","clearing"],o=["opening","closing","selecting","unselecting","clearing"];e.call(this,t,n),t.on("*",function(e,t){if(-1!==s.inArray(e,i)){t=t||{};var n=s.Event("select2:"+e,{params:t});r.$element.trigger(n),-1!==s.inArray(e,o)&&(t.prevented=n.isDefaultPrevented())}})},e}),e.define("select2/translation",["jquery","require"],function(t,n){function r(e){this.dict=e||{}}return r.prototype.all=function(){return this.dict},r.prototype.get=function(e){return this.dict[e]},r.prototype.extend=function(e){this.dict=t.extend({},e.all(),this.dict)},r._cache={},r.loadPath=function(e){if(!(e in r._cache)){var t=n(e);r._cache[e]=t}return new r(r._cache[e])},r}),e.define("select2/diacritics",[],function(){return{"":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"AA","":"AE","":"AE","":"AE","":"AO","":"AU","":"AV","":"AV","":"AY","":"B","":"B","":"B","":"B","":"B","":"B","":"B","":"B","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"DZ","":"DZ","":"Dz","":"Dz","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"F","":"F","":"F","":"F","":"F","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"J","":"J","":"J","":"J","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"LJ","":"Lj","":"M","":"M","":"M","":"M","":"M","":"M","":"M","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"NJ","":"Nj","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"OE","":"OI","":"OO","":"OU","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"Q","":"Q","":"Q","":"Q","":"Q","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"TZ","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"V","":"V","":"V","":"V","":"V","":"V","":"V","":"VY","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"X","":"X","":"X","":"X","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"aa","":"ae","":"ae","":"ae","":"ao","":"au","":"av","":"av","":"ay","":"b","":"b","":"b","":"b","":"b","":"b","":"b","":"b","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"dz","":"dz","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"f","":"f","":"f","":"f","":"f","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"hv","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"j","":"j","":"j","":"j","":"j","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"lj","":"m","":"m","":"m","":"m","":"m","":"m","":"m","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"nj","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"oe","":"oi","":"ou","":"oo","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"q","":"q","":"q","":"q","":"q","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"tz","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"v","":"v","":"v","":"v","":"v","":"v","":"v","":"vy","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"x","":"x","":"x","":"x","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"'"}}),e.define("select2/data/base",["../utils"],function(r){function n(e,t){n.__super__.constructor.call(this)}return r.Extend(n,r.Observable),n.prototype.current=function(e){throw new Error("The `current` method must be defined in child classes.")},n.prototype.query=function(e,t){throw new Error("The `query` method must be defined in child classes.")},n.prototype.bind=function(e,t){},n.prototype.destroy=function(){},n.prototype.generateResultId=function(e,t){var n=e.id+"-result-";return n+=r.generateChars(4),null!=t.id?n+="-"+t.id.toString():n+="-"+r.generateChars(4),n},n}),e.define("select2/data/select",["./base","../utils","jquery"],function(e,a,l){function n(e,t){this.$element=e,this.options=t,n.__super__.constructor.call(this)}return a.Extend(n,e),n.prototype.current=function(e){var n=[],r=this;this.$element.find(":selected").each(function(){var e=l(this),t=r.item(e);n.push(t)}),e(n)},n.prototype.select=function(i){var o=this;if(i.selected=!0,l(i.element).is("option"))return i.element.selected=!0,void this.$element.trigger("input").trigger("change");if(this.$element.prop("multiple"))this.current(function(e){var t=[];(i=[i]).push.apply(i,e);for(var n=0;n<i.length;n++){var r=i[n].id;-1===l.inArray(r,t)&&t.push(r)}o.$element.val(t),o.$element.trigger("input").trigger("change")});else{var e=i.id;this.$element.val(e),this.$element.trigger("input").trigger("change")}},n.prototype.unselect=function(i){var o=this;if(this.$element.prop("multiple")){if(i.selected=!1,l(i.element).is("option"))return i.element.selected=!1,void this.$element.trigger("input").trigger("change");this.current(function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n].id;r!==i.id&&-1===l.inArray(r,t)&&t.push(r)}o.$element.val(t),o.$element.trigger("input").trigger("change")})}},n.prototype.bind=function(e,t){var n=this;(this.container=e).on("select",function(e){n.select(e.data)}),e.on("unselect",function(e){n.unselect(e.data)})},n.prototype.destroy=function(){this.$element.find("*").each(function(){a.RemoveData(this)})},n.prototype.query=function(r,e){var i=[],o=this;this.$element.children().each(function(){var e=l(this);if(e.is("option")||e.is("optgroup")){var t=o.item(e),n=o.matches(r,t);null!==n&&i.push(n)}}),e({results:i})},n.prototype.addOptions=function(e){a.appendMany(this.$element,e)},n.prototype.option=function(e){var t;e.children?(t=document.createElement("optgroup")).label=e.text:void 0!==(t=document.createElement("option")).textContent?t.textContent=e.text:t.innerText=e.text,void 0!==e.id&&(t.value=e.id),e.disabled&&(t.disabled=!0),e.selected&&(t.selected=!0),e.title&&(t.title=e.title);var n=l(t),r=this._normalizeItem(e);return r.element=t,a.StoreData(t,"data",r),n},n.prototype.item=function(e){var t={};if(null!=(t=a.GetData(e[0],"data")))return t;if(e.is("option"))t={id:e.val(),text:e.text(),disabled:e.prop("disabled"),selected:e.prop("selected"),title:e.prop("title")};else if(e.is("optgroup")){t={text:e.prop("label"),children:[],title:e.prop("title")};for(var n=e.children("option"),r=[],i=0;i<n.length;i++){var o=l(n[i]),s=this.item(o);r.push(s)}t.children=r}return(t=this._normalizeItem(t)).element=e[0],a.StoreData(e[0],"data",t),t},n.prototype._normalizeItem=function(e){e!==Object(e)&&(e={id:e,text:e});return null!=(e=l.extend({},{text:""},e)).id&&(e.id=e.id.toString()),null!=e.text&&(e.text=e.text.toString()),null==e._resultId&&e.id&&null!=this.container&&(e._resultId=this.generateResultId(this.container,e)),l.extend({},{selected:!1,disabled:!1},e)},n.prototype.matches=function(e,t){return this.options.get("matcher")(e,t)},n}),e.define("select2/data/array",["./select","../utils","jquery"],function(e,f,g){function r(e,t){this._dataToConvert=t.get("data")||[],r.__super__.constructor.call(this,e,t)}return f.Extend(r,e),r.prototype.bind=function(e,t){r.__super__.bind.call(this,e,t),this.addOptions(this.convertToOptions(this._dataToConvert))},r.prototype.select=function(n){var e=this.$element.find("option").filter(function(e,t){return t.value==n.id.toString()});0===e.length&&(e=this.option(n),this.addOptions(e)),r.__super__.select.call(this,n)},r.prototype.convertToOptions=function(e){var t=this,n=this.$element.find("option"),r=n.map(function(){return t.item(g(this)).id}).get(),i=[];function o(e){return function(){return g(this).val()==e.id}}for(var s=0;s<e.length;s++){var a=this._normalizeItem(e[s]);if(0<=g.inArray(a.id,r)){var l=n.filter(o(a)),c=this.item(l),u=g.extend(!0,{},a,c),d=this.option(u);l.replaceWith(d)}else{var p=this.option(a);if(a.children){var h=this.convertToOptions(a.children);f.appendMany(p,h)}i.push(p)}}return i},r}),e.define("select2/data/ajax",["./array","../utils","jquery"],function(e,t,o){function n(e,t){this.ajaxOptions=this._applyDefaults(t.get("ajax")),null!=this.ajaxOptions.processResults&&(this.processResults=this.ajaxOptions.processResults),n.__super__.constructor.call(this,e,t)}return t.Extend(n,e),n.prototype._applyDefaults=function(e){var t={data:function(e){return o.extend({},e,{q:e.term})},transport:function(e,t,n){var r=o.ajax(e);return r.then(t),r.fail(n),r}};return o.extend({},t,e,!0)},n.prototype.processResults=function(e){return e},n.prototype.query=function(n,r){var i=this;null!=this._request&&(o.isFunction(this._request.abort)&&this._request.abort(),this._request=null);var t=o.extend({type:"GET"},this.ajaxOptions);function e(){var e=t.transport(t,function(e){var t=i.processResults(e,n);i.options.get("debug")&&window.console&&console.error&&(t&&t.results&&o.isArray(t.results)||console.error("Select2: The AJAX results did not return an array in the `results` key of the response.")),r(t)},function(){"status"in e&&(0===e.status||"0"===e.status)||i.trigger("results:message",{message:"errorLoading"})});i._request=e}"function"==typeof t.url&&(t.url=t.url.call(this.$element,n)),"function"==typeof t.data&&(t.data=t.data.call(this.$element,n)),this.ajaxOptions.delay&&null!=n.term?(this._queryTimeout&&window.clearTimeout(this._queryTimeout),this._queryTimeout=window.setTimeout(e,this.ajaxOptions.delay)):e()},n}),e.define("select2/data/tags",["jquery"],function(u){function e(e,t,n){var r=n.get("tags"),i=n.get("createTag");void 0!==i&&(this.createTag=i);var o=n.get("insertTag");if(void 0!==o&&(this.insertTag=o),e.call(this,t,n),u.isArray(r))for(var s=0;s<r.length;s++){var a=r[s],l=this._normalizeItem(a),c=this.option(l);this.$element.append(c)}}return e.prototype.query=function(e,c,u){var d=this;this._removeOldTags(),null!=c.term&&null==c.page?e.call(this,c,function e(t,n){for(var r=t.results,i=0;i<r.length;i++){var o=r[i],s=null!=o.children&&!e({results:o.children},!0);if((o.text||"").toUpperCase()===(c.term||"").toUpperCase()||s)return!n&&(t.data=r,void u(t))}if(n)return!0;var a=d.createTag(c);if(null!=a){var l=d.option(a);l.attr("data-select2-tag",!0),d.addOptions([l]),d.insertTag(r,a)}t.results=r,u(t)}):e.call(this,c,u)},e.prototype.createTag=function(e,t){var n=u.trim(t.term);return""===n?null:{id:n,text:n}},e.prototype.insertTag=function(e,t,n){t.unshift(n)},e.prototype._removeOldTags=function(e){this.$element.find("option[data-select2-tag]").each(function(){this.selected||u(this).remove()})},e}),e.define("select2/data/tokenizer",["jquery"],function(d){function e(e,t,n){var r=n.get("tokenizer");void 0!==r&&(this.tokenizer=r),e.call(this,t,n)}return e.prototype.bind=function(e,t,n){e.call(this,t,n),this.$search=t.dropdown.$search||t.selection.$search||n.find(".select2-search__field")},e.prototype.query=function(e,t,n){var i=this;t.term=t.term||"";var r=this.tokenizer(t,this.options,function(e){var t,n=i._normalizeItem(e);if(!i.$element.find("option").filter(function(){return d(this).val()===n.id}).length){var r=i.option(n);r.attr("data-select2-tag",!0),i._removeOldTags(),i.addOptions([r])}t=n,i.trigger("select",{data:t})});r.term!==t.term&&(this.$search.length&&(this.$search.val(r.term),this.$search.trigger("focus")),t.term=r.term),e.call(this,t,n)},e.prototype.tokenizer=function(e,t,n,r){for(var i=n.get("tokenSeparators")||[],o=t.term,s=0,a=this.createTag||function(e){return{id:e.term,text:e.term}};s<o.length;){var l=o[s];if(-1!==d.inArray(l,i)){var c=o.substr(0,s),u=a(d.extend({},t,{term:c}));null!=u?(r(u),o=o.substr(s+1)||"",s=0):s++}else s++}return{term:o}},e}),e.define("select2/data/minimumInputLength",[],function(){function e(e,t,n){this.minimumInputLength=n.get("minimumInputLength"),e.call(this,t,n)}return e.prototype.query=function(e,t,n){t.term=t.term||"",t.term.length<this.minimumInputLength?this.trigger("results:message",{message:"inputTooShort",args:{minimum:this.minimumInputLength,input:t.term,params:t}}):e.call(this,t,n)},e}),e.define("select2/data/maximumInputLength",[],function(){function e(e,t,n){this.maximumInputLength=n.get("maximumInputLength"),e.call(this,t,n)}return e.prototype.query=function(e,t,n){t.term=t.term||"",0<this.maximumInputLength&&t.term.length>this.maximumInputLength?this.trigger("results:message",{message:"inputTooLong",args:{maximum:this.maximumInputLength,input:t.term,params:t}}):e.call(this,t,n)},e}),e.define("select2/data/maximumSelectionLength",[],function(){function e(e,t,n){this.maximumSelectionLength=n.get("maximumSelectionLength"),e.call(this,t,n)}return e.prototype.bind=function(e,t,n){var r=this;e.call(this,t,n),t.on("select",function(){r._checkIfMaximumSelected()})},e.prototype.query=function(e,t,n){var r=this;this._checkIfMaximumSelected(function(){e.call(r,t,n)})},e.prototype._checkIfMaximumSelected=function(e,n){var r=this;this.current(function(e){var t=null!=e?e.length:0;0<r.maximumSelectionLength&&t>=r.maximumSelectionLength?r.trigger("results:message",{message:"maximumSelected",args:{maximum:r.maximumSelectionLength}}):n&&n()})},e}),e.define("select2/dropdown",["jquery","./utils"],function(t,e){function n(e,t){this.$element=e,this.options=t,n.__super__.constructor.call(this)}return e.Extend(n,e.Observable),n.prototype.render=function(){var e=t('<span class="select2-dropdown"><span class="select2-results"></span></span>');return e.attr("dir",this.options.get("dir")),this.$dropdown=e},n.prototype.bind=function(){},n.prototype.position=function(e,t){},n.prototype.destroy=function(){this.$dropdown.remove()},n}),e.define("select2/dropdown/search",["jquery","../utils"],function(o,e){function t(){}return t.prototype.render=function(e){var t=e.call(this),n=o('<span class="select2-search select2-search--dropdown"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="none" spellcheck="false" role="searchbox" aria-autocomplete="list" /></span>');return this.$searchContainer=n,this.$search=n.find("input"),t.prepend(n),t},t.prototype.bind=function(e,t,n){var r=this,i=t.id+"-results";e.call(this,t,n),this.$search.on("keydown",function(e){r.trigger("keypress",e),r._keyUpPrevented=e.isDefaultPrevented()}),this.$search.on("input",function(e){o(this).off("keyup")}),this.$search.on("keyup input",function(e){r.handleSearch(e)}),t.on("open",function(){r.$search.attr("tabindex",0),r.$search.attr("aria-controls",i),r.$search.trigger("focus"),window.setTimeout(function(){r.$search.trigger("focus")},0)}),t.on("close",function(){r.$search.attr("tabindex",-1),r.$search.removeAttr("aria-controls"),r.$search.removeAttr("aria-activedescendant"),r.$search.val(""),r.$search.trigger("blur")}),t.on("focus",function(){t.isOpen()||r.$search.trigger("focus")}),t.on("results:all",function(e){null!=e.query.term&&""!==e.query.term||(r.showSearch(e)?r.$searchContainer.removeClass("select2-search--hide"):r.$searchContainer.addClass("select2-search--hide"))}),t.on("results:focus",function(e){e.data._resultId?r.$search.attr("aria-activedescendant",e.data._resultId):r.$search.removeAttr("aria-activedescendant")})},t.prototype.handleSearch=function(e){if(!this._keyUpPrevented){var t=this.$search.val();this.trigger("query",{term:t})}this._keyUpPrevented=!1},t.prototype.showSearch=function(e,t){return!0},t}),e.define("select2/dropdown/hidePlaceholder",[],function(){function e(e,t,n,r){this.placeholder=this.normalizePlaceholder(n.get("placeholder")),e.call(this,t,n,r)}return e.prototype.append=function(e,t){t.results=this.removePlaceholder(t.results),e.call(this,t)},e.prototype.normalizePlaceholder=function(e,t){return"string"==typeof t&&(t={id:"",text:t}),t},e.prototype.removePlaceholder=function(e,t){for(var n=t.slice(0),r=t.length-1;0<=r;r--){var i=t[r];this.placeholder.id===i.id&&n.splice(r,1)}return n},e}),e.define("select2/dropdown/infiniteScroll",["jquery"],function(n){function e(e,t,n,r){this.lastParams={},e.call(this,t,n,r),this.$loadingMore=this.createLoadingMore(),this.loading=!1}return e.prototype.append=function(e,t){this.$loadingMore.remove(),this.loading=!1,e.call(this,t),this.showLoadingMore(t)&&(this.$results.append(this.$loadingMore),this.loadMoreIfNeeded())},e.prototype.bind=function(e,t,n){var r=this;e.call(this,t,n),t.on("query",function(e){r.lastParams=e,r.loading=!0}),t.on("query:append",function(e){r.lastParams=e,r.loading=!0}),this.$results.on("scroll",this.loadMoreIfNeeded.bind(this))},e.prototype.loadMoreIfNeeded=function(){var e=n.contains(document.documentElement,this.$loadingMore[0]);if(!this.loading&&e){var t=this.$results.offset().top+this.$results.outerHeight(!1);this.$loadingMore.offset().top+this.$loadingMore.outerHeight(!1)<=t+50&&this.loadMore()}},e.prototype.loadMore=function(){this.loading=!0;var e=n.extend({},{page:1},this.lastParams);e.page++,this.trigger("query:append",e)},e.prototype.showLoadingMore=function(e,t){return t.pagination&&t.pagination.more},e.prototype.createLoadingMore=function(){var e=n('<li class="select2-results__option select2-results__option--load-more"role="option" aria-disabled="true"></li>'),t=this.options.get("translations").get("loadingMore");return e.html(t(this.lastParams)),e},e}),e.define("select2/dropdown/attachBody",["jquery","../utils"],function(f,a){function e(e,t,n){this.$dropdownParent=f(n.get("dropdownParent")||document.body),e.call(this,t,n)}return e.prototype.bind=function(e,t,n){var r=this;e.call(this,t,n),t.on("open",function(){r._showDropdown(),r._attachPositioningHandler(t),r._bindContainerResultHandlers(t)}),t.on("close",function(){r._hideDropdown(),r._detachPositioningHandler(t)}),this.$dropdownContainer.on("mousedown",function(e){e.stopPropagation()})},e.prototype.destroy=function(e){e.call(this),this.$dropdownContainer.remove()},e.prototype.position=function(e,t,n){t.attr("class",n.attr("class")),t.removeClass("select2"),t.addClass("select2-container--open"),t.css({position:"absolute",top:-999999}),this.$container=n},e.prototype.render=function(e){var t=f("<span></span>"),n=e.call(this);return t.append(n),this.$dropdownContainer=t},e.prototype._hideDropdown=function(e){this.$dropdownContainer.detach()},e.prototype._bindContainerResultHandlers=function(e,t){if(!this._containerResultsHandlersBound){var n=this;t.on("results:all",function(){n._positionDropdown(),n._resizeDropdown()}),t.on("results:append",function(){n._positionDropdown(),n._resizeDropdown()}),t.on("results:message",function(){n._positionDropdown(),n._resizeDropdown()}),t.on("select",function(){n._positionDropdown(),n._resizeDropdown()}),t.on("unselect",function(){n._positionDropdown(),n._resizeDropdown()}),this._containerResultsHandlersBound=!0}},e.prototype._attachPositioningHandler=function(e,t){var n=this,r="scroll.select2."+t.id,i="resize.select2."+t.id,o="orientationchange.select2."+t.id,s=this.$container.parents().filter(a.hasScroll);s.each(function(){a.StoreData(this,"select2-scroll-position",{x:f(this).scrollLeft(),y:f(this).scrollTop()})}),s.on(r,function(e){var t=a.GetData(this,"select2-scroll-position");f(this).scrollTop(t.y)}),f(window).on(r+" "+i+" "+o,function(e){n._positionDropdown(),n._resizeDropdown()})},e.prototype._detachPositioningHandler=function(e,t){var n="scroll.select2."+t.id,r="resize.select2."+t.id,i="orientationchange.select2."+t.id;this.$container.parents().filter(a.hasScroll).off(n),f(window).off(n+" "+r+" "+i)},e.prototype._positionDropdown=function(){var e=f(window),t=this.$dropdown.hasClass("select2-dropdown--above"),n=this.$dropdown.hasClass("select2-dropdown--below"),r=null,i=this.$container.offset();i.bottom=i.top+this.$container.outerHeight(!1);var o={height:this.$container.outerHeight(!1)};o.top=i.top,o.bottom=i.top+o.height;var s=this.$dropdown.outerHeight(!1),a=e.scrollTop(),l=e.scrollTop()+e.height(),c=a<i.top-s,u=l>i.bottom+s,d={left:i.left,top:o.bottom},p=this.$dropdownParent;"static"===p.css("position")&&(p=p.offsetParent());var h={top:0,left:0};(f.contains(document.body,p[0])||p[0].isConnected)&&(h=p.offset()),d.top-=h.top,d.left-=h.left,t||n||(r="below"),u||!c||t?!c&&u&&t&&(r="below"):r="above",("above"==r||t&&"below"!==r)&&(d.top=o.top-h.top-s),null!=r&&(this.$dropdown.removeClass("select2-dropdown--below select2-dropdown--above").addClass("select2-dropdown--"+r),this.$container.removeClass("select2-container--below select2-container--above").addClass("select2-container--"+r)),this.$dropdownContainer.css(d)},e.prototype._resizeDropdown=function(){var e={width:this.$container.outerWidth(!1)+"px"};this.options.get("dropdownAutoWidth")&&(e.minWidth=e.width,e.position="relative",e.width="auto"),this.$dropdown.css(e)},e.prototype._showDropdown=function(e){this.$dropdownContainer.appendTo(this.$dropdownParent),this._positionDropdown(),this._resizeDropdown()},e}),e.define("select2/dropdown/minimumResultsForSearch",[],function(){function e(e,t,n,r){this.minimumResultsForSearch=n.get("minimumResultsForSearch"),this.minimumResultsForSearch<0&&(this.minimumResultsForSearch=1/0),e.call(this,t,n,r)}return e.prototype.showSearch=function(e,t){return!(function e(t){for(var n=0,r=0;r<t.length;r++){var i=t[r];i.children?n+=e(i.children):n++}return n}(t.data.results)<this.minimumResultsForSearch)&&e.call(this,t)},e}),e.define("select2/dropdown/selectOnClose",["../utils"],function(o){function e(){}return e.prototype.bind=function(e,t,n){var r=this;e.call(this,t,n),t.on("close",function(e){r._handleSelectOnClose(e)})},e.prototype._handleSelectOnClose=function(e,t){if(t&&null!=t.originalSelect2Event){var n=t.originalSelect2Event;if("select"===n._type||"unselect"===n._type)return}var r=this.getHighlightedResults();if(!(r.length<1)){var i=o.GetData(r[0],"data");null!=i.element&&i.element.selected||null==i.element&&i.selected||this.trigger("select",{data:i})}},e}),e.define("select2/dropdown/closeOnSelect",[],function(){function e(){}return e.prototype.bind=function(e,t,n){var r=this;e.call(this,t,n),t.on("select",function(e){r._selectTriggered(e)}),t.on("unselect",function(e){r._selectTriggered(e)})},e.prototype._selectTriggered=function(e,t){var n=t.originalEvent;n&&(n.ctrlKey||n.metaKey)||this.trigger("close",{originalEvent:n,originalSelect2Event:t})},e}),e.define("select2/i18n/en",[],function(){return{errorLoading:function(){return"The results could not be loaded."},inputTooLong:function(e){var t=e.input.length-e.maximum,n="Please delete "+t+" character";return 1!=t&&(n+="s"),n},inputTooShort:function(e){return"Please enter "+(e.minimum-e.input.length)+" or more characters"},loadingMore:function(){return"Loading more results"},maximumSelected:function(e){var t="You can only select "+e.maximum+" item";return 1!=e.maximum&&(t+="s"),t},noResults:function(){return"No results found"},searching:function(){return"Searching"},removeAllItems:function(){return"Remove all items"}}}),e.define("select2/defaults",["jquery","require","./results","./selection/single","./selection/multiple","./selection/placeholder","./selection/allowClear","./selection/search","./selection/eventRelay","./utils","./translation","./diacritics","./data/select","./data/array","./data/ajax","./data/tags","./data/tokenizer","./data/minimumInputLength","./data/maximumInputLength","./data/maximumSelectionLength","./dropdown","./dropdown/search","./dropdown/hidePlaceholder","./dropdown/infiniteScroll","./dropdown/attachBody","./dropdown/minimumResultsForSearch","./dropdown/selectOnClose","./dropdown/closeOnSelect","./i18n/en"],function(c,u,d,p,h,f,g,m,v,y,s,t,_,$,b,w,A,x,D,S,E,C,O,T,q,L,I,j,e){function n(){this.reset()}return n.prototype.apply=function(e){if(null==(e=c.extend(!0,{},this.defaults,e)).dataAdapter){if(null!=e.ajax?e.dataAdapter=b:null!=e.data?e.dataAdapter=$:e.dataAdapter=_,0<e.minimumInputLength&&(e.dataAdapter=y.Decorate(e.dataAdapter,x)),0<e.maximumInputLength&&(e.dataAdapter=y.Decorate(e.dataAdapter,D)),0<e.maximumSelectionLength&&(e.dataAdapter=y.Decorate(e.dataAdapter,S)),e.tags&&(e.dataAdapter=y.Decorate(e.dataAdapter,w)),null==e.tokenSeparators&&null==e.tokenizer||(e.dataAdapter=y.Decorate(e.dataAdapter,A)),null!=e.query){var t=u(e.amdBase+"compat/query");e.dataAdapter=y.Decorate(e.dataAdapter,t)}if(null!=e.initSelection){var n=u(e.amdBase+"compat/initSelection");e.dataAdapter=y.Decorate(e.dataAdapter,n)}}if(null==e.resultsAdapter&&(e.resultsAdapter=d,null!=e.ajax&&(e.resultsAdapter=y.Decorate(e.resultsAdapter,T)),null!=e.placeholder&&(e.resultsAdapter=y.Decorate(e.resultsAdapter,O)),e.selectOnClose&&(e.resultsAdapter=y.Decorate(e.resultsAdapter,I))),null==e.dropdownAdapter){if(e.multiple)e.dropdownAdapter=E;else{var r=y.Decorate(E,C);e.dropdownAdapter=r}if(0!==e.minimumResultsForSearch&&(e.dropdownAdapter=y.Decorate(e.dropdownAdapter,L)),e.closeOnSelect&&(e.dropdownAdapter=y.Decorate(e.dropdownAdapter,j)),null!=e.dropdownCssClass||null!=e.dropdownCss||null!=e.adaptDropdownCssClass){var i=u(e.amdBase+"compat/dropdownCss");e.dropdownAdapter=y.Decorate(e.dropdownAdapter,i)}e.dropdownAdapter=y.Decorate(e.dropdownAdapter,q)}if(null==e.selectionAdapter){if(e.multiple?e.selectionAdapter=h:e.selectionAdapter=p,null!=e.placeholder&&(e.selectionAdapter=y.Decorate(e.selectionAdapter,f)),e.allowClear&&(e.selectionAdapter=y.Decorate(e.selectionAdapter,g)),e.multiple&&(e.selectionAdapter=y.Decorate(e.selectionAdapter,m)),null!=e.containerCssClass||null!=e.containerCss||null!=e.adaptContainerCssClass){var o=u(e.amdBase+"compat/containerCss");e.selectionAdapter=y.Decorate(e.selectionAdapter,o)}e.selectionAdapter=y.Decorate(e.selectionAdapter,v)}e.language=this._resolveLanguage(e.language),e.language.push("en");for(var s=[],a=0;a<e.language.length;a++){var l=e.language[a];-1===s.indexOf(l)&&s.push(l)}return e.language=s,e.translations=this._processTranslations(e.language,e.debug),e},n.prototype.reset=function(){function a(e){return e.replace(/[^\u0000-\u007E]/g,function(e){return t[e]||e})}this.defaults={amdBase:"./",amdLanguageBase:"./i18n/",closeOnSelect:!0,debug:!1,dropdownAutoWidth:!1,escapeMarkup:y.escapeMarkup,language:{},matcher:function e(t,n){if(""===c.trim(t.term))return n;if(n.children&&0<n.children.length){for(var r=c.extend(!0,{},n),i=n.children.length-1;0<=i;i--)null==e(t,n.children[i])&&r.children.splice(i,1);return 0<r.children.length?r:e(t,r)}var o=a(n.text).toUpperCase(),s=a(t.term).toUpperCase();return-1<o.indexOf(s)?n:null},minimumInputLength:0,maximumInputLength:0,maximumSelectionLength:0,minimumResultsForSearch:0,selectOnClose:!1,scrollAfterSelect:!1,sorter:function(e){return e},templateResult:function(e){return e.text},templateSelection:function(e){return e.text},theme:"default",width:"resolve"}},n.prototype.applyFromElement=function(e,t){var n=e.language,r=this.defaults.language,i=t.prop("lang"),o=t.closest("[lang]").prop("lang"),s=Array.prototype.concat.call(this._resolveLanguage(i),this._resolveLanguage(n),this._resolveLanguage(r),this._resolveLanguage(o));return e.language=s,e},n.prototype._resolveLanguage=function(e){if(!e)return[];if(c.isEmptyObject(e))return[];if(c.isPlainObject(e))return[e];var t;t=c.isArray(e)?e:[e];for(var n=[],r=0;r<t.length;r++)if(n.push(t[r]),"string"==typeof t[r]&&0<t[r].indexOf("-")){var i=t[r].split("-")[0];n.push(i)}return n},n.prototype._processTranslations=function(e,t){for(var n=new s,r=0;r<e.length;r++){var i=new s,o=e[r];if("string"==typeof o)try{i=s.loadPath(o)}catch(e){try{o=this.defaults.amdLanguageBase+o,i=s.loadPath(o)}catch(e){t&&window.console&&console.warn&&console.warn('Select2: The language file for "'+o+'" could not be automatically loaded. A fallback will be used instead.')}}else i=c.isPlainObject(o)?new s(o):o;n.extend(i)}return n},n.prototype.set=function(e,t){var n={};n[c.camelCase(e)]=t;var r=y._convertData(n);c.extend(!0,this.defaults,r)},new n}),e.define("select2/options",["require","jquery","./defaults","./utils"],function(r,d,i,p){function e(e,t){if(this.options=e,null!=t&&this.fromElement(t),null!=t&&(this.options=i.applyFromElement(this.options,t)),this.options=i.apply(this.options),t&&t.is("input")){var n=r(this.get("amdBase")+"compat/inputData");this.options.dataAdapter=p.Decorate(this.options.dataAdapter,n)}}return e.prototype.fromElement=function(e){var t=["select2"];null==this.options.multiple&&(this.options.multiple=e.prop("multiple")),null==this.options.disabled&&(this.options.disabled=e.prop("disabled")),null==this.options.dir&&(e.prop("dir")?this.options.dir=e.prop("dir"):e.closest("[dir]").prop("dir")?this.options.dir=e.closest("[dir]").prop("dir"):this.options.dir="ltr"),e.prop("disabled",this.options.disabled),e.prop("multiple",this.options.multiple),p.GetData(e[0],"select2Tags")&&(this.options.debug&&window.console&&console.warn&&console.warn('Select2: The `data-select2-tags` attribute has been changed to use the `data-data` and `data-tags="true"` attributes and will be removed in future versions of Select2.'),p.StoreData(e[0],"data",p.GetData(e[0],"select2Tags")),p.StoreData(e[0],"tags",!0)),p.GetData(e[0],"ajaxUrl")&&(this.options.debug&&window.console&&console.warn&&console.warn("Select2: The `data-ajax-url` attribute has been changed to `data-ajax--url` and support for the old attribute will be removed in future versions of Select2."),e.attr("ajax--url",p.GetData(e[0],"ajaxUrl")),p.StoreData(e[0],"ajax-Url",p.GetData(e[0],"ajaxUrl")));var n={};function r(e,t){return t.toUpperCase()}for(var i=0;i<e[0].attributes.length;i++){var o=e[0].attributes[i].name,s="data-";if(o.substr(0,s.length)==s){var a=o.substring(s.length),l=p.GetData(e[0],a);n[a.replace(/-([a-z])/g,r)]=l}}d.fn.jquery&&"1."==d.fn.jquery.substr(0,2)&&e[0].dataset&&(n=d.extend(!0,{},e[0].dataset,n));var c=d.extend(!0,{},p.GetData(e[0]),n);for(var u in c=p._convertData(c))-1<d.inArray(u,t)||(d.isPlainObject(this.options[u])?d.extend(this.options[u],c[u]):this.options[u]=c[u]);return this},e.prototype.get=function(e){return this.options[e]},e.prototype.set=function(e,t){this.options[e]=t},e}),e.define("select2/core",["jquery","./options","./utils","./keys"],function(o,c,u,r){var d=function(e,t){null!=u.GetData(e[0],"select2")&&u.GetData(e[0],"select2").destroy(),this.$element=e,this.id=this._generateId(e),t=t||{},this.options=new c(t,e),d.__super__.constructor.call(this);var n=e.attr("tabindex")||0;u.StoreData(e[0],"old-tabindex",n),e.attr("tabindex","-1");var r=this.options.get("dataAdapter");this.dataAdapter=new r(e,this.options);var i=this.render();this._placeContainer(i);var o=this.options.get("selectionAdapter");this.selection=new o(e,this.options),this.$selection=this.selection.render(),this.selection.position(this.$selection,i);var s=this.options.get("dropdownAdapter");this.dropdown=new s(e,this.options),this.$dropdown=this.dropdown.render(),this.dropdown.position(this.$dropdown,i);var a=this.options.get("resultsAdapter");this.results=new a(e,this.options,this.dataAdapter),this.$results=this.results.render(),this.results.position(this.$results,this.$dropdown);var l=this;this._bindAdapters(),this._registerDomEvents(),this._registerDataEvents(),this._registerSelectionEvents(),this._registerDropdownEvents(),this._registerResultsEvents(),this._registerEvents(),this.dataAdapter.current(function(e){l.trigger("selection:update",{data:e})}),e.addClass("select2-hidden-accessible"),e.attr("aria-hidden","true"),this._syncAttributes(),u.StoreData(e[0],"select2",this),e.data("select2",this)};return u.Extend(d,u.Observable),d.prototype._generateId=function(e){return"select2-"+(null!=e.attr("id")?e.attr("id"):null!=e.attr("name")?e.attr("name")+"-"+u.generateChars(2):u.generateChars(4)).replace(/(:|\.|\[|\]|,)/g,"")},d.prototype._placeContainer=function(e){e.insertAfter(this.$element);var t=this._resolveWidth(this.$element,this.options.get("width"));null!=t&&e.css("width",t)},d.prototype._resolveWidth=function(e,t){var n=/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i;if("resolve"==t){var r=this._resolveWidth(e,"style");return null!=r?r:this._resolveWidth(e,"element")}if("element"==t){var i=e.outerWidth(!1);return i<=0?"auto":i+"px"}if("style"!=t)return"computedstyle"!=t?t:window.getComputedStyle(e[0]).width;var o=e.attr("style");if("string"!=typeof o)return null;for(var s=o.split(";"),a=0,l=s.length;a<l;a+=1){var c=s[a].replace(/\s/g,"").match(n);if(null!==c&&1<=c.length)return c[1]}return null},d.prototype._bindAdapters=function(){this.dataAdapter.bind(this,this.$container),this.selection.bind(this,this.$container),this.dropdown.bind(this,this.$container),this.results.bind(this,this.$container)},d.prototype._registerDomEvents=function(){var t=this;this.$element.on("change.select2",function(){t.dataAdapter.current(function(e){t.trigger("selection:update",{data:e})})}),this.$element.on("focus.select2",function(e){t.trigger("focus",e)}),this._syncA=u.bind(this._syncAttributes,this),this._syncS=u.bind(this._syncSubtree,this),this.$element[0].attachEvent&&this.$element[0].attachEvent("onpropertychange",this._syncA);var e=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;null!=e?(this._observer=new e(function(e){t._syncA(),t._syncS(null,e)}),this._observer.observe(this.$element[0],{attributes:!0,childList:!0,subtree:!1})):this.$element[0].addEventListener&&(this.$element[0].addEventListener("DOMAttrModified",t._syncA,!1),this.$element[0].addEventListener("DOMNodeInserted",t._syncS,!1),this.$element[0].addEventListener("DOMNodeRemoved",t._syncS,!1))},d.prototype._registerDataEvents=function(){var n=this;this.dataAdapter.on("*",function(e,t){n.trigger(e,t)})},d.prototype._registerSelectionEvents=function(){var n=this,r=["toggle","focus"];this.selection.on("toggle",function(){n.toggleDropdown()}),this.selection.on("focus",function(e){n.focus(e)}),this.selection.on("*",function(e,t){-1===o.inArray(e,r)&&n.trigger(e,t)})},d.prototype._registerDropdownEvents=function(){var n=this;this.dropdown.on("*",function(e,t){n.trigger(e,t)})},d.prototype._registerResultsEvents=function(){var n=this;this.results.on("*",function(e,t){n.trigger(e,t)})},d.prototype._registerEvents=function(){var n=this;this.on("open",function(){n.$container.addClass("select2-container--open")}),this.on("close",function(){n.$container.removeClass("select2-container--open")}),this.on("enable",function(){n.$container.removeClass("select2-container--disabled")}),this.on("disable",function(){n.$container.addClass("select2-container--disabled")}),this.on("blur",function(){n.$container.removeClass("select2-container--focus")}),this.on("query",function(t){n.isOpen()||n.trigger("open",{}),this.dataAdapter.query(t,function(e){n.trigger("results:all",{data:e,query:t})})}),this.on("query:append",function(t){this.dataAdapter.query(t,function(e){n.trigger("results:append",{data:e,query:t})})}),this.on("keypress",function(e){var t=e.which;n.isOpen()?t===r.ESC||t===r.TAB||t===r.UP&&e.altKey?(n.close(e),e.preventDefault()):t===r.ENTER?(n.trigger("results:select",{}),e.preventDefault()):t===r.SPACE&&e.ctrlKey?(n.trigger("results:toggle",{}),e.preventDefault()):t===r.UP?(n.trigger("results:previous",{}),e.preventDefault()):t===r.DOWN&&(n.trigger("results:next",{}),e.preventDefault()):(t===r.ENTER||t===r.SPACE||t===r.DOWN&&e.altKey)&&(n.open(),e.preventDefault())})},d.prototype._syncAttributes=function(){this.options.set("disabled",this.$element.prop("disabled")),this.isDisabled()?(this.isOpen()&&this.close(),this.trigger("disable",{})):this.trigger("enable",{})},d.prototype._isChangeMutation=function(e,t){var n=!1,r=this;if(!e||!e.target||"OPTION"===e.target.nodeName||"OPTGROUP"===e.target.nodeName){if(t)if(t.addedNodes&&0<t.addedNodes.length)for(var i=0;i<t.addedNodes.length;i++){t.addedNodes[i].selected&&(n=!0)}else t.removedNodes&&0<t.removedNodes.length?n=!0:o.isArray(t)&&o.each(t,function(e,t){if(r._isChangeMutation(e,t))return!(n=!0)});else n=!0;return n}},d.prototype._syncSubtree=function(e,t){var n=this._isChangeMutation(e,t),r=this;n&&this.dataAdapter.current(function(e){r.trigger("selection:update",{data:e})})},d.prototype.trigger=function(e,t){var n=d.__super__.trigger,r={open:"opening",close:"closing",select:"selecting",unselect:"unselecting",clear:"clearing"};if(void 0===t&&(t={}),e in r){var i=r[e],o={prevented:!1,name:e,args:t};if(n.call(this,i,o),o.prevented)return void(t.prevented=!0)}n.call(this,e,t)},d.prototype.toggleDropdown=function(){this.isDisabled()||(this.isOpen()?this.close():this.open())},d.prototype.open=function(){this.isOpen()||this.isDisabled()||this.trigger("query",{})},d.prototype.close=function(e){this.isOpen()&&this.trigger("close",{originalEvent:e})},d.prototype.isEnabled=function(){return!this.isDisabled()},d.prototype.isDisabled=function(){return this.options.get("disabled")},d.prototype.isOpen=function(){return this.$container.hasClass("select2-container--open")},d.prototype.hasFocus=function(){return this.$container.hasClass("select2-container--focus")},d.prototype.focus=function(e){this.hasFocus()||(this.$container.addClass("select2-container--focus"),this.trigger("focus",{}))},d.prototype.enable=function(e){this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("enable")` method has been deprecated and will be removed in later Select2 versions. Use $element.prop("disabled") instead.'),null!=e&&0!==e.length||(e=[!0]);var t=!e[0];this.$element.prop("disabled",t)},d.prototype.data=function(){this.options.get("debug")&&0<arguments.length&&window.console&&console.warn&&console.warn('Select2: Data can no longer be set using `select2("data")`. You should consider setting the value instead using `$element.val()`.');var t=[];return this.dataAdapter.current(function(e){t=e}),t},d.prototype.val=function(e){if(this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("val")` method has been deprecated and will be removed in later Select2 versions. Use $element.val() instead.'),null==e||0===e.length)return this.$element.val();var t=e[0];o.isArray(t)&&(t=o.map(t,function(e){return e.toString()})),this.$element.val(t).trigger("input").trigger("change")},d.prototype.destroy=function(){this.$container.remove(),this.$element[0].detachEvent&&this.$element[0].detachEvent("onpropertychange",this._syncA),null!=this._observer?(this._observer.disconnect(),this._observer=null):this.$element[0].removeEventListener&&(this.$element[0].removeEventListener("DOMAttrModified",this._syncA,!1),this.$element[0].removeEventListener("DOMNodeInserted",this._syncS,!1),this.$element[0].removeEventListener("DOMNodeRemoved",this._syncS,!1)),this._syncA=null,this._syncS=null,this.$element.off(".select2"),this.$element.attr("tabindex",u.GetData(this.$element[0],"old-tabindex")),this.$element.removeClass("select2-hidden-accessible"),this.$element.attr("aria-hidden","false"),u.RemoveData(this.$element[0]),this.$element.removeData("select2"),this.dataAdapter.destroy(),this.selection.destroy(),this.dropdown.destroy(),this.results.destroy(),this.dataAdapter=null,this.selection=null,this.dropdown=null,this.results=null},d.prototype.render=function(){var e=o('<span class="select2 select2-container"><span class="selection"></span><span class="dropdown-wrapper" aria-hidden="true"></span></span>');return e.attr("dir",this.options.get("dir")),this.$container=e,this.$container.addClass("select2-container--"+this.options.get("theme")),u.StoreData(e[0],"element",this.$element),e},d}),e.define("jquery-mousewheel",["jquery"],function(e){return e}),e.define("jquery.select2",["jquery","jquery-mousewheel","./select2/core","./select2/defaults","./select2/utils"],function(i,e,o,t,s){if(null==i.fn.select2){var a=["open","close","destroy"];i.fn.select2=function(t){if("object"==typeof(t=t||{}))return this.each(function(){var e=i.extend(!0,{},t);new o(i(this),e)}),this;if("string"!=typeof t)throw new Error("Invalid arguments for Select2: "+t);var n,r=Array.prototype.slice.call(arguments,1);return this.each(function(){var e=s.GetData(this,"select2");null==e&&window.console&&console.error&&console.error("The select2('"+t+"') method was called on an element that is not using Select2."),n=e[t].apply(e,r)}),-1<i.inArray(t,a)?this:n}}return null==i.fn.select2.defaults&&(i.fn.select2.defaults=t),o}),{define:e.define,require:e.require}}(),t=e.require("jquery.select2");return u.fn.select2.amd=e,t});

(function(){var c,f;c=window.jQuery;f=c(window);c.fn.stick_in_parent=function(b){var A,w,J,n,B,K,p,q,L,k,E,t;null==b&&(b={});t=b.sticky_class;B=b.inner_scrolling;E=b.recalc_every;k=b.parent;q=b.offset_top;p=b.spacer;w=b.bottoming;null==q&&(q=0);null==k&&(k=void 0);null==B&&(B=!0);null==t&&(t="is_stuck");A=c(document);null==w&&(w=!0);L=function(a){var b;return window.getComputedStyle?(a=window.getComputedStyle(a[0]),b=parseFloat(a.getPropertyValue("width"))+parseFloat(a.getPropertyValue("margin-left"))+
parseFloat(a.getPropertyValue("margin-right")),"border-box"!==a.getPropertyValue("box-sizing")&&(b+=parseFloat(a.getPropertyValue("border-left-width"))+parseFloat(a.getPropertyValue("border-right-width"))+parseFloat(a.getPropertyValue("padding-left"))+parseFloat(a.getPropertyValue("padding-right"))),b):a.outerWidth(!0)};J=function(a,b,n,C,F,u,r,G){var v,H,m,D,I,d,g,x,y,z,h,l;if(!a.data("sticky_kit")){a.data("sticky_kit",!0);I=A.height();g=a.parent();null!=k&&(g=g.closest(k));if(!g.length)throw"failed to find stick parent";
v=m=!1;(h=null!=p?p&&a.closest(p):c("<div />"))&&h.css("position",a.css("position"));x=function(){var d,f,e;if(!G&&(I=A.height(),d=parseInt(g.css("border-top-width"),10),f=parseInt(g.css("padding-top"),10),b=parseInt(g.css("padding-bottom"),10),n=g.offset().top+d+f,C=g.height(),m&&(v=m=!1,null==p&&(a.insertAfter(h),h.detach()),a.css({position:"",top:"",width:"",bottom:""}).removeClass(t),e=!0),F=a.offset().top-(parseInt(a.css("margin-top"),10)||0)-q,u=a.outerHeight(!0),r=a.css("float"),h&&h.css({width:L(a),
height:u,display:a.css("display"),"vertical-align":a.css("vertical-align"),"float":r}),e))return l()};x();if(u!==C)return D=void 0,d=q,z=E,l=function(){var c,l,e,k;if(!G&&(e=!1,null!=z&&(--z,0>=z&&(z=E,x(),e=!0)),e||A.height()===I||x(),e=f.scrollTop(),null!=D&&(l=e-D),D=e,m?(w&&(k=e+u+d>C+n,v&&!k&&(v=!1,a.css({position:"fixed",bottom:"",top:d}).trigger("sticky_kit:unbottom"))),e<F&&(m=!1,d=q,null==p&&("left"!==r&&"right"!==r||a.insertAfter(h),h.detach()),c={position:"",width:"",top:""},a.css(c).removeClass(t).trigger("sticky_kit:unstick")),
B&&(c=f.height(),u+q>c&&!v&&(d-=l,d=Math.max(c-u,d),d=Math.min(q,d),m&&a.css({top:d+"px"})))):e>F&&(m=!0,c={position:"fixed",top:d},c.width="border-box"===a.css("box-sizing")?a.outerWidth()+"px":a.width()+"px",a.css(c).addClass(t),null==p&&(a.after(h),"left"!==r&&"right"!==r||h.append(a)),a.trigger("sticky_kit:stick")),m&&w&&(null==k&&(k=e+u+d>C+n),!v&&k)))return v=!0,"static"===g.css("position")&&g.css({position:"relative"}),a.css({position:"absolute",bottom:b,top:"auto"}).trigger("sticky_kit:bottom")},
y=function(){x();return l()},H=function(){G=!0;f.off("touchmove",l);f.off("scroll",l);f.off("resize",y);c(document.body).off("sticky_kit:recalc",y);a.off("sticky_kit:detach",H);a.removeData("sticky_kit");a.css({position:"",bottom:"",top:"",width:""});g.position("position","");if(m)return null==p&&("left"!==r&&"right"!==r||a.insertAfter(h),h.remove()),a.removeClass(t)},f.on("touchmove",l),f.on("scroll",l),f.on("resize",y),c(document.body).on("sticky_kit:recalc",y),a.on("sticky_kit:detach",H),setTimeout(l,
0)}};n=0;for(K=this.length;n<K;n++)b=this[n],J(c(b));return this}}).call(this);
window.CRYPTO_HOLEPUNCH={initHolepunch:function(){this.applyWarnings();this.determineStickyFooter();this.injectTwitter(document.getElementById("twitter-news"));},applyWarnings:function(){if(typeof Cookies!=='undefined'&&Cookies.get('crypto-warning-terms-and-conditions')!=='true'){var $body=$('body');if(!$body.hasClass('site-warning-message'))$body.addClass('site-warning-message');$('#terms-and-conditions-banner').removeClass('hidden');}},stickyFooterIsDisabled:function(){return typeof Cookies!=='undefined'&&Cookies.get(window.cryptoConfig.stickyFooterCookie)==='yes';},determineStickyFooter:function(){if(this.stickyFooterIsDisabled()&&!$('.sticky-footer').hasClass('hidden'))$('.sticky-footer').addClass('hidden');},injectTwitter:function(el){if(!$('#twitter-news').length)return;twttr.widgets.createTimeline({sourceType:"profile",screenName:$('#twitter-news-coin').data('coin')},el,{height:500,chrome:"nofooter",linkColor:"#2DC790",borderColor:'#dadada',theme:'light'});},reloadTwitter:function(){$('#twitter-news').empty();this.injectTwitter(document.getElementById("twitter-news"));},postViewedAlready:function($postId){var postViewedCookieKey='crypto-post-viewed-'+$postId.toString();return typeof Cookies!=='undefined'&&Cookies.get(postViewedCookieKey)==='true';},setPostViewedCookie:function($postId,expires){if(typeof Cookies!=='undefined'&&$postId&&expires){var postViewedCookieKey='crypto-post-viewed-'+$postId.toString();if(!Cookies.get(postViewedCookieKey))
Cookies.set(postViewedCookieKey,'true',{expires:expires});}},punch:function(response){var that=window.CRYPTO_HOLEPUNCH;var $countPostViews=$('#holepunch-post-view-count');var isDisclaimerPage=window.location.pathname.indexOf('/disclaimers/')!==-1;var isCoinPage=window.location.pathname.indexOf('/coins/')!==-1;var isPressRelease=window.location.pathname.indexOf('/press-releases/')!==-1;window.cryptoConfig.visitorCountryCode=response.visitorCountryCode;if(response.globalStats)$('#holepunch-header-global-stats').html(response.globalStats);if(response.postViewCount){var fiveMinutes=1/288;that.setPostViewedCookie($countPostViews.attr('data-postId'),fiveMinutes);$('#holepunch-post-view-count').html(response.postViewCount);}
if(response.marketSummary){$('div.market-summary').empty().html(response.marketSummary);}
if(response.tickers){$('#top-coins-ticker').empty().html(response.tickers);}
if(response.sponsoredCoinButton){$('#sponsored-button-container').html(response.sponsoredCoinButton);}else{$('.coin-count-sponsored-button').removeClass('coin-count-sponsored-button');}
if(response.visitorIsFromUS){$('.us-deny-hide').remove();$('.international-block').removeClass('hidden');if($('span#blockUSRedirect').length)return window.location.href='/';}else{if(response.visitorCountryCode&&response.visitorCountryCode!=='US'){$('.us-deny-hide').removeClass('hidden');$('.international-block').remove();if(window.location.pathname==='/'){var $prContainer=$('.pr-articles');$prContainer.empty();if(response.nonUSPR_1)$prContainer.append(response.nonUSPR_1);if(response.nonUSPR_2)$prContainer.append(response.nonUSPR_2);if(response.nonUSPR_3)$prContainer.append(response.nonUSPR_3);}
if(response.visitorCountryCode==='ES'){$('.spain-deny-hide').remove();}}}
if(response.visitorCountryCode==='GB'){$('.uk-target').removeClass('hidden');}else{$('.uk-target').remove();}
if(response.visitorCountryCode==='DE'){$('.de-target').removeClass('hidden');}else{$('.de-target').remove();}
if(response.visitorCountryCode==='NL'){$('.nl-target').removeClass('hidden');}else{$('.nl-target').remove();}
if(response.visitorCountryCode==='FR'){$('.fr-target').removeClass('hidden');}else{$('.fr-target').remove();}
if(response.visitorCountryCode==='AU'){$('.au-target').removeClass('hidden');}else{$('.au-target').remove();}
if(response.visitorCountryCode!=='US'&&response.visitorCountryCode!=='GB'&&response.visitorCountryCode!=='DE'){$('.nemo-target').removeClass('hidden');}else{$('.nemo-target').remove();}
if(response.visitorCountryCode!=='AU'&&response.visitorCountryCode!=='GB'&&response.visitorCountryCode!=='ES'){$('.stake-target').removeClass('hidden');}else{$('.stake-target').remove();}
const excludedCountries=['GB','DE','NL','FR','AU'];if(response.companyVerticalFeatured){$('#taxonomy-featured-company').append(response.companyVerticalFeatured);}
if(response.coinData){var coinData=response.coinData;var $hpEl=$('.holepunch-coin_rank');if(coinData.coin_rank&&$hpEl.length){$hpEl.html(coinData.coin_rank);}
var $hpEl=$('.holepunch-coin_price_usd');if(coinData.coin_price_usd&&$hpEl.length){$hpEl.html(coinData.coin_price_usd);}
var $hpEl=$('.holepunch-coin_market_cap_usd');if(coinData.coin_market_cap_usd&&$hpEl.length){$hpEl.html(coinData.coin_market_cap_usd);}
var $hpEl=$('.holepunch-coin_24h_volume_usd');if(coinData.coin_24h_volume_usd&&$hpEl.length){$hpEl.html(coinData.coin_24h_volume_usd);}
var $hpEl=$('.holepunch-coin_percent_change_1h');if(coinData.coin_percent_change_1h&&$hpEl.length){var change=coinData.coin_percent_change_1h;var color='red';var updown='down';if(change.indexOf('-')===-1){change='+'+change;color='green';updown='up';}
$('.holepunch-coin_percent_change_1h-color').removeClass(['red','green']).addClass(color);$('.holepunch-coin_percent_change_1h-updown').removeClass(['up','down']).addClass(updown);$hpEl.html(change);}
var $hpEl=$('.holepunch-coin_percent_change_24h');if(coinData.coin_percent_change_24h&&$hpEl.length){var change=coinData.coin_percent_change_24h;var color='red';var updown='down';if(change.indexOf('-')===-1){change='+'+change;color='green';updown='up';}
$('.holepunch-coin_percent_change_24h-color').removeClass(['red','green']).addClass(color);$('.holepunch-coin_percent_change_24h-updown').removeClass(['up','down']).addClass(updown);$hpEl.html(change);}
var $hpEl=$('.holepunch-coin_percent_change_7d');if(coinData.coin_percent_change_7d&&$hpEl.length){var change=coinData.coin_percent_change_7d;var color='red';var updown='down';if(change.indexOf('-')===-1){change='+'+change;color='green';updown='up';}
$('.holepunch-coin_percent_change_7d-color').removeClass(['red','green']).addClass(color);$('.holepunch-coin_percent_change_7d-updown').removeClass(['up','down']).addClass(updown);$hpEl.html(change);}
var $hpEl=$('.holepunch-coinpaprika_quotes_usd_percent_change_30d');if(coinData.coinpaprika_quotes_usd_percent_change_30d&&$hpEl.length){var change=coinData.coinpaprika_quotes_usd_percent_change_30d;var color='red';var updown='down';if(change.indexOf('-')===-1){change='+'+change;color='green';updown='up';}
$('.holepunch-coinpaprika_quotes_usd_percent_change_30d-color').removeClass(['red','green']).addClass(color);$('.holepunch-coinpaprika_quotes_usd_percent_change_30d-updown').removeClass(['up','down']).addClass(updown);$hpEl.html(change);}
var $hpEl=$('.holepunch-coinpaprika_quotes_usd_percent_change_1y');if(coinData.coinpaprika_quotes_usd_percent_change_1y&&$hpEl.length){var change=coinData.coinpaprika_quotes_usd_percent_change_1y;var color='red';var updown='down';if(change.indexOf('-')===-1){change='+'+change;color='green';updown='up';}
$('.holepunch-coinpaprika_quotes_usd_percent_change_1y-color').removeClass(['red','green']).addClass(color);$('.holepunch-coinpaprika_quotes_usd_percent_change_1y-updown').removeClass(['up','down']).addClass(updown);$hpEl.html(change);}
var $hpEl=$('.holepunch-coinpaprika_quotes_usd_ath_price');if(coinData.coinpaprika_quotes_usd_ath_price&&$hpEl.length){$hpEl.html(coinData.coinpaprika_quotes_usd_ath_price);}
var $hpEl=$('.holepunch-coinpaprika_quotes_usd_percent_from_price_ath');if(coinData.coinpaprika_quotes_usd_percent_from_price_ath&&$hpEl.length){var change=coinData.coinpaprika_quotes_usd_percent_from_price_ath;var color='red';var updown='down';if(change.indexOf('-')===-1){change='+'+change;color='green';updown='up';}
$('.holepunch-coinpaprika_quotes_usd_percent_from_price_ath-color').removeClass(['red','green']).addClass(color);$('.holepunch-coinpaprika_quotes_usd_percent_from_price_ath-updown').removeClass(['up','down']).addClass(updown);$hpEl.html(change);}
var $hpEl=$('.holepunch-coinpaprika_quotes_usd_ath_date');if(coinData.coinpaprika_quotes_usd_ath_date&&$hpEl.length){$hpEl.html(coinData.coinpaprika_quotes_usd_ath_date);}
var $hpEl=$('.holepunch-bitcoin_percentage_of_market_cap');if(coinData.bitcoin_percentage_of_market_cap&&$hpEl.length){$hpEl.html(coinData.bitcoin_percentage_of_market_cap);}
var $hpEl=$('.holepunch-ethereum_percentage_of_market_cap');if(coinData.ethereum_percentage_of_market_cap&&$hpEl.length){$hpEl.html(coinData.ethereum_percentage_of_market_cap);}}
window.CRYPTO_HOLEPUNCH.placements=response.punchedPlacements?response.punchedPlacements:null;window.CRYPTO_HOLEPUNCH.punchPlacements();},punchPlacements:function(){if(!window.CRYPTO_HOLEPUNCH.placements)return;var p=window.CRYPTO_HOLEPUNCH.placements;if(p.newsPostAboveArticle)$('.slatedNewsPostAboveArticle').html(p.newsPostAboveArticle);if(p.newsPostBelowArticle)$('.slatedNewsPostBelowArticle').html(p.newsPostBelowArticle);if(p.newsPostSidebarRight)$('.slatedNewsPostSidebarRight').html(p.newsPostSidebarRight);if(p.coinsPageLeaderboard)$('.slatedCoinsPageLeaderboard').html(p.coinsPageLeaderboard);if(p.coinsPageSidebar)$('.slatedCoinsPageSidebar').html(p.coinsPageSidebar);if(p.coinsHomepageLeaderboard)$('.slateCoinsHomepageLeaderboard').html(p.coinsHomepageLeaderboard);if(p.coinSectorLeaderboard)$('.slatedCoinSectorLeaderboard').html(p.coinSectorLeaderboard);},initialize:function(){var $countPostViews=$('#holepunch-post-view-count');var data={'action':'get_holepunched_content','adinserter2':$('body').hasClass('single-post'),'postViewsId':$countPostViews.length?$countPostViews.attr('data-postId'):null,'viewedAlready':$countPostViews.length?window.CRYPTO_HOLEPUNCH.postViewedAlready($countPostViews.attr('data-postId')):null};if($('#taxonomy-featured-company').length){data.featuredCompanySlug=$('#taxonomy-featured-company').attr('data-slug');}
if($('#coin-holepunch-id').length){data.coinDataId=$('#coin-holepunch-id').attr('data-coin');}
if($('div.market-summary').length)data.marketSummary=true;if($('#top-coins-ticker').length)data.tickers=true;$.ajax({url:'/wp-content/themes/cryptoslate-2020/holepunch/main.php',type:'get',data:data,dataType:'json',success:window.CRYPTO_HOLEPUNCH.punch});}};jQuery(document).ready(window.CRYPTO_HOLEPUNCH.initHolepunch.bind(CRYPTO_HOLEPUNCH));jQuery(document).ready(window.CRYPTO_HOLEPUNCH.initialize.bind(CRYPTO_HOLEPUNCH));window.CRYPTO_MODALS={init:function(){$('body').on('click','.modal .box .close',window.CRYPTO_MODALS.close);$(document).keyup(function(e){if(e.keyCode===27)window.CRYPTO_MODALS.close();});},open:function(selector){$(selector).removeClass('hidden');},close:function(){$('.modal:not(.hidden)').addClass('hidden');var $bigSearch=$('#big-search');if(!$bigSearch.hasClass('hidden'))$('#big-search').addClass('hidden');}};jQuery(document).ready(window.CRYPTO_MODALS.init.bind(CRYPTO_MODALS));window.CRYPTO_FEATURED={initWindowResizeEvent:function(){if(this.featuredItemsExists())$(window).resize(this.sizeFeaturedContent.bind(CRYPTO_FEATURED));},sizeFeaturedContent:function(){if(!this.featuredItemsExists())return;var feat=$('.featured-items > .main').find('.content');if($(window).width()>1179){feat.css('width',this.getFeatArticleWidth()+'px');feat.css('padding-left',0);}else{feat.css('width','100%');feat.css('padding-left','40px');}},getFeatArticleWidth:function(){if(this.coinListingExists())return this.getFeatContainerWidth()-(this.getLeftCoinListingOffset()||1);if(this.eventsListingExists())return this.getFeatContainerWidth()-(this.getLeftEventsListingOffset()||1);if(this.activeIcosExists())return this.getFeatContainerWidth()-(this.getLeftActiveIcosListingOffset()||1);},getLeftCoinListingOffset:function(){return($(window).width()-this.getCoinListingWidth())/2;},getCoinListingWidth:function(){return $('.news > .container').width();},getActiveIcosListingWidth:function(){return $('.ico-calendar > .container').width();},getLeftActiveIcosListingOffset:function(){return($(window).width()-this.getActiveIcosListingWidth())/2;},getLeftEventsListingOffset:function(){return($(window).width()-this.getEventsListingWidth())/2;},getEventsListingWidth:function(){return $('.events > .container').width();},getFeatContainerWidth:function(){return $('.featured-items > .main').width();},coinListingExists:function(){return $('.news-feed').length;},eventsListingExists:function(){return $('#main').hasClass('events');},activeIcosExists:function(){return $('#main').hasClass('ico-calendar');},featuredItemsExists:function(){return $('.featured-items').length;}};jQuery(document).ready(window.CRYPTO_FEATURED.sizeFeaturedContent.bind(CRYPTO_FEATURED));jQuery(document).ready(window.CRYPTO_FEATURED.initWindowResizeEvent.bind(CRYPTO_FEATURED));jQuery(document).ready(function($){$('#contents-mobile-toggle, #sidebar-close-toggle').click(function(e){e.preventDefault();$('.sidebar.left').toggleClass('visible');});$('.objects-table tbody tr td.meta .meta-menu, .objects-table tbody tr td.meta .meta-options').hover(function(){$(this).find('.meta-options').removeClass('hidden');},function(){$(this).find('.meta-options').addClass('hidden');});try{if(typeof window.CRYPTO_MODALS==='undefined')throw new Error('Main misc. needs CRYPTO_MODALS');$('body').on('click','.report-ico',function(e){e.preventDefault();window.CRYPTO_MODALS.open('#report-ico');});$('body').on('click','.suggest-coin-edit',function(e){e.preventDefault();window.CRYPTO_MODALS.open('#suggest-coin-edit');});$('body').on('click','.suggest-company-edit',function(e){e.preventDefault();window.CRYPTO_MODALS.open('#suggest-company-edit');});$('body').on('click','.suggest-product-edit',function(e){e.preventDefault();window.CRYPTO_MODALS.open('#suggest-product-edit');});$('body').on('click','.suggest-person-edit',function(e){e.preventDefault();window.CRYPTO_MODALS.open('#suggest-person-edit');});$('body').on('click','.report-company',function(e){e.preventDefault();window.CRYPTO_MODALS.open('#report-company');});$('body').on('click','.report-product',function(e){e.preventDefault();window.CRYPTO_MODALS.open('#report-product');});}catch(e){console.log(e);}
var optinShown=false;$(window).scroll(function(){if($(window).scrollTop()<800||optinShown)return;try{if(typeof window.CRYPTO_MODALS==='undefined')throw new Error('Main misc. needs CRYPTO_MODALS');if(!Cookies.get('crypto_newsletter_modal')&&!Cookies.get('crypto_newsletter_modal_subscribed')&&!$('body').hasClass('logged-in')){window.CRYPTO_MODALS.open('#cs-newsletter');Cookies.set('crypto_newsletter_modal','true',{expires:30});optinShown=true;}}catch(e){console.log(e);}});$(window).resize(function(){if(!window.frames.length)return;for(var i=0,len=window.frames.length;i<len;i++){window.sizeFrame(window.frames[i]);}});$('#night-mode').click(function(){$('body').toggleClass('dark');if(typeof Cookies!=='undefined'){var isDark=$('body').hasClass('dark')?'yes':'no';Cookies.set('crypto-dark-mode',isDark);}
window.CRYPTO_HOLEPUNCH.reloadTwitter();});if(typeof Cookies!=='undefined'&&!Cookies.get('crypto-hide-subscribe-box')){$('#substack-box').toggleClass('hidden');}
$('.post-cta-close').click(function(e){e.preventDefault();if(typeof Cookies!=='undefined')Cookies.set('crypto-hide-subscribe-box',true);$('#substack-box').toggleClass('hidden');});$('.object-cats-btn').click(function(){$('.sidebar.navigation').toggleClass('preview');$('.object-cats-btn').toggleClass('active');});$('.show-btn').click(function(){$('.itb-content').toggleClass('preview');$('.show-btn').toggleClass('active');});$('#sidebar-preview-close').click(function(){$('#sidebar').toggleClass('preview');});$('a.share').click(function(e){e.preventDefault();var $link=$(this),href=$link.attr('href'),network=$link.attr('data-network'),networks={facebook:{width:600,height:300},twitter:{width:600,height:254},google:{width:515,height:490},telegram:{width:515,height:480},linkedin:{width:600,height:473}};function popup(network){var options='menubar=no,toolbar=no,resizable=yes,scrollbars=yes,';window.open(href,'',options+'height='+networks[network].height+',width='+networks[network].width);}
popup(network);});$('#terms-and-conditions-banner-close').click(function(){$(this).closest('#terms-and-conditions-banner').hide();setWarningCookie('terms-and-conditions');$('body').removeClass('site-warning-message');});$('#dont-show-link-proceed').click(function(e){e.preventDefault();if($('input#dont-show-link-warning').is(':checked'))setWarningCookie('link');if(linkUrl)window.open(linkUrl,'_blank');window.CRYPTO_MODALS.close();});$('#dont-show-link-goback').click(function(e){e.preventDefault();window.CRYPTO_MODALS.close();});$('.hide-coin-warning').click(function(e){e.preventDefault();if(confirm('By hiding this warning, you acknowledge the warning and disclaimer regarding our coin listings.')){$(this).closest('#header-banner').hide();setWarningCookie('coin');}});function setWarningCookie(warningType){if(typeof Cookies!=='undefined'){var warningCookie='crypto-warning-'+warningType;if(!Cookies.get(warningCookie)){Cookies.set(warningCookie,'true',{expires:365});}}}
function checkWarningCookies(){if(typeof Cookies!=='undefined'){if(Cookies.get('crypto-warning-ico'))$('.hide-ico-warning').closest('#header-banner').hide();if(Cookies.get('crypto-warning-coin'))$('.hide-coin-warning').closest('#header-banner').hide();}}
checkWarningCookies();function fixThreeColumnListHeight(){var leftSidebarHeight=$('.sidebar-left').outerHeight(),rightSidebarHeight=$('.sidebar-right').outerHeight(),$listContainer=$('.news-feed'),newContainerHeight=null;$listContainer.css('height','auto');var listContainerHeight=$listContainer.outerHeight();if($(window).width()>=1350&&listContainerHeight&&leftSidebarHeight&&rightSidebarHeight){if(leftSidebarHeight>=listContainerHeight&&leftSidebarHeight>=rightSidebarHeight){newContainerHeight=leftSidebarHeight+40;}
if(rightSidebarHeight>=listContainerHeight&&leftSidebarHeight<rightSidebarHeight){newContainerHeight=rightSidebarHeight+40;}
if(newContainerHeight){$listContainer.css('height',newContainerHeight+'px');}}}
fixThreeColumnListHeight();$(window).resize(fixThreeColumnListHeight);var $menuToggle=$('#menu'),$closeMenuToggle=$('#close-menu'),menuOpen=false,$searchToggle=$('#header-search'),$closeSearchToggle=$('#close-search'),searchOpen=false,$edgeToggle=$('#edge'),$closeEdgeToggle=$('#close-edge'),edgeOpen=false;$coinsToggle=$('#coins-menu-btn'),$closeCoinsToggle=$('#close-coins'),coinsOpen=false;$coinsSearchToggle=$('#coin-search-btn'),$closeCoinsSearchToggle=$('#close-coins-search'),coinsSearchOpen=false;$coinsSectorsToggle=$('#coin-sectors-btn'),$closeCoinsSectorsToggle=$('#close-coins-sectors'),coinsSectorsOpen=false;$menuToggle.click(function(e){e.preventDefault();var $this=$(this);$this.toggleClass('menu-close').toggleClass('active');if(menuOpen){hideMainMenu();}else{showMainMenu();}
hideSearchMenu();hideEdgeMenu();hideCoinsSectorsMenu();});$closeMenuToggle.click(function(e){e.preventDefault();hideMainMenu();});$searchToggle.click(function(e){e.preventDefault();var $this=$(this);$this.toggleClass('menu-close').toggleClass('active');if(searchOpen){hideSearchMenu();}else{showSearchMenu();}
hideMainMenu();hideEdgeMenu();hideCoinsSectorsMenu();$('#header-search-menu').find('input[name="s"]').focus();});$closeSearchToggle.click(function(e){e.preventDefault();hideSearchMenu();});$edgeToggle.click(function(e){e.preventDefault();var $this=$(this);$this.toggleClass('menu-close').toggleClass('active');if(edgeOpen){hideEdgeMenu();}else{showEdgeMenu();}
hideMainMenu();hideSearchMenu();});$closeEdgeToggle.click(function(e){e.preventDefault();hideEdgeMenu();});$coinsToggle.click(function(e){e.preventDefault();var $this=$(this);$this.toggleClass('menu-close').toggleClass('active');if(coinsOpen){hideCoinsMenu();}else{showCoinsMenu();}
hideMainMenu();hideSearchMenu();hideCoinsSearchMenu();});$closeCoinsToggle.click(function(e){e.preventDefault();hideCoinsMenu();});$coinsSearchToggle.click(function(e){e.preventDefault();var $this=$(this);$this.toggleClass('menu-close').toggleClass('active');if(coinsSearchOpen){hideCoinsSearchMenu();}else{showCoinsSearchMenu();}
hideCoinsMenu();hideMainMenu();hideSearchMenu();hideCoinsSectorsMenu();$('#coin-search').find('input[name="search"]').focus();});$closeCoinsSearchToggle.click(function(e){e.preventDefault();hideCoinsSearchMenu();});$coinsSectorsToggle.click(function(e){e.preventDefault();var $this=$(this);$this.toggleClass('menu-close').toggleClass('active');if(coinsSectorsOpen){hideCoinsSectorsMenu();}else{showCoinsSectorsMenu();}
hideMainMenu();hideSearchMenu();hideCoinsSearchMenu();});$closeCoinsSectorsToggle.click(function(e){e.preventDefault();hideCoinsSectorsMenu();});function showMainMenu(){$('#menu-navigation').removeClass('hidden');menuOpen=true;}
function hideMainMenu(){$menuToggle.removeClass('active');$('#menu-navigation').addClass('hidden');menuOpen=false;}
function showSearchMenu(){$('#header-search-menu').removeClass('hidden');searchOpen=true;}
function hideSearchMenu(){$searchToggle.removeClass('active')
$('#header-search-menu').addClass('hidden');searchOpen=false;}
function showEdgeMenu(){$('#header-edge-menu').removeClass('hidden');edgeOpen=true;}
function hideEdgeMenu(){$edgeToggle.removeClass('active')
$('#header-edge-menu').addClass('hidden');edgeOpen=false;}
function showCoinsMenu(){$('#header-coins-menu').removeClass('hidden');coinsOpen=true;}
function hideCoinsMenu(){$coinsToggle.removeClass('active');$('#header-coins-menu').addClass('hidden');coinsOpen=false;}
function showCoinsSearchMenu(){$('#coin-search').removeClass('hidden');coinsSearchOpen=true;}
function hideCoinsSearchMenu(){$coinsSearchToggle.removeClass('active');$('#coin-search').addClass('hidden');coinsSearchOpen=false;}
function showCoinsSectorsMenu(){$('#coin-sectors-menu').removeClass('hidden');coinsSectorsOpen=true;}
function hideCoinsSectorsMenu(){$coinsSectorsToggle.removeClass('active');$('#coin-sectors-menu').addClass('hidden');coinsSectorsOpen=false;}
var $menuSpans=$('#menu-toggles > li > span');$menuSpans.hover(function(e){var $this=$(this);$('#menu-navigation').find('div.content').addClass('hidden');$('#menu-mobile-more').addClass('hidden');$('#'+$this.attr('data-id')).removeClass('hidden');$menuSpans.removeClass('active');$this.addClass('active');});});document.addEventListener('DOMContentLoaded',function(){const scrollingLists=document.querySelectorAll('.scrolling-list');const clones=2;scrollingLists.forEach(scrollingList=>{const elements=scrollingList.querySelectorAll('.element');for(let i=0;i<clones;i++){elements.forEach(element=>{const clone=element.cloneNode(true);scrollingList.appendChild(clone);});}});});jQuery(document).ready(function($){$('.pagination .page-numbers:not(.prev):not(.next)').last().hide();});document.addEventListener('DOMContentLoaded',()=>{const stickies=[...document.querySelectorAll('.code-block .top-sticky')];if(!stickies.length)return;const PAGE_OFFSET=0;const DESKTOP_BODY_PAD='50px';const MOBILE_BREAKPOINT=768;const MOBILE_TOP='40px';const DESKTOP_TOP='0';const origBodyPad=getComputedStyle(document.body).paddingTop;const thresholds=stickies.map(el=>el.getBoundingClientRect().top+window.scrollY,);let lastY=window.scrollY;const applyBodyPadding=(shouldPad,isMobile)=>{if(shouldPad){document.body.style.paddingTop=isMobile?MOBILE_TOP:DESKTOP_BODY_PAD;}else{document.body.style.paddingTop=origBodyPad;}};window.addEventListener('scroll',()=>{const y=window.scrollY;const scrollingDown=y>lastY;const isMobile=window.innerWidth<=MOBILE_BREAKPOINT;let anyFixed=false;stickies.forEach((el,i)=>{const isFixed=el.dataset.fixed==='1';if(scrollingDown&&!isFixed&&y>=PAGE_OFFSET&&y>=thresholds[i]){el.style.width=`${el.offsetWidth}px`;el.style.left=`${el.getBoundingClientRect().left}px`;el.style.position='fixed';el.style.top=isMobile?MOBILE_TOP:DESKTOP_TOP;el.dataset.fixed='1';}
if(!scrollingDown&&isFixed&&y<=thresholds[i]){el.style.position=el.style.top=el.style.left=el.style.width='';delete el.dataset.fixed;}
if(el.dataset.fixed==='1')anyFixed=true;});applyBodyPadding(anyFixed,isMobile);lastY=y;},{passive:true},);window.addEventListener('resize',()=>{const isMobile=window.innerWidth<=MOBILE_BREAKPOINT;stickies.forEach(el=>{if(el.dataset.fixed==='1'){el.style.top=isMobile?MOBILE_TOP:DESKTOP_TOP;}});const anyFixed=stickies.some(el=>el.dataset.fixed==='1');applyBodyPadding(anyFixed,isMobile);});});
!function(){"use strict";!function($,e,t){(new function(){var a=this;this.init=function(){e.ppFormRecaptchaLoadCallback=this.recaptcha_processing,$(".pp-del-profile-avatar").click(this.delete_avatar),$(".pp-del-cover-image").click(this.delete_profile_image_cover),$(document).on("click",".has-password-visibility-icon .pp-form-material-icons",this.toggle_password_visibility),$(document.body).on("click","a.showlogin",(function(){$(".pp_wc_login").slideToggle()})),$(e).on("load resize",(function(){a.defaultUserProfileResponsive()})),"true"!==pp_ajax_form.disable_ajax_form&&($(document).on("submit",'form[data-pp-form-submit="login"]',this.ajax_login),$(document).on("submit",'form[data-pp-form-submit="signup"]',this.ajax_registration),$(document).on("submit",'form[data-pp-form-submit="passwordreset"]',this.ajax_password_reset),$(document).on("submit",'form[data-pp-form-submit="editprofile"]',this.ajax_edit_profile))},this.recaptcha_processing=function(){$(".pp-g-recaptcha").each((function(e,t){var s=$(t).attr("data-sitekey"),r=$(this).parents(".pp-form-container").find("form");if("v3"===$(t).attr("data-type"))r.find("input.pp-submit-form").on("click",(function(e){e.preventDefault(),a._add_processing_label(r),grecaptcha.ready((function(){grecaptcha.execute(s,{action:"form"}).then((function(e){r.find('[name="g-recaptcha-response"]').remove(),r.append($("<input>",{type:"hidden",value:e,name:"g-recaptcha-response"})),r.submit()}))}))}));else{var i=grecaptcha.render(t,{sitekey:s,theme:$(t).attr("data-theme"),size:$(t).attr("data-size")});r.on("pp_form_submitted",(function(){grecaptcha.reset(i)}))}}))},this.reset_form=function(e){e.find("input:text, input:password, input:file, select, textarea").val(""),e.find("input:radio, input:checkbox").removeAttr("checked").removeAttr("selected")},this.toggle_password_visibility=function(e){e.preventDefault();var t=$(this).parents(".pp-form-field-input-textarea-wrap").find(".pp-form-field");"password"===t.attr("type")?(t.attr("type","text"),$(this).text("visibility_off")):(t.attr("type","password"),$(this).text("visibility"))},this.ajax_edit_profile=function(t){if(void 0!==e.FormData&&e.FormData){t.preventDefault();var s=$('form[data-pp-form-submit="editprofile"]'),r=a.get_melange_id(s),i=new FormData(this);i.append("action","pp_ajax_editprofile"),i.append("nonce",pp_ajax_form.nonce),i.append("melange_id",r),$(".profilepress-edit-profile-status").remove(),$(".profilepress-edit-profile-success").remove(),""!==e.edit_profile_msg_class&&$("."+e.edit_profile_msg_class).remove(),a._add_processing_label(s),$.post({url:pp_ajax_form.ajaxurl,data:i,cache:!1,contentType:!1,enctype:"multipart/form-data",processData:!1,dataType:"json",success:function(t){s.trigger("pp_form_submitted"),s.trigger("pp_form_edit_profile_success",[s]),"avatar_url"in t&&""!==t.avatar_url&&($("img[data-del='avatar'], img.pp-user-avatar").attr("src",t.avatar_url),$("input[name=eup_avatar]",s).val("")),"cover_image_url"in t&&""!==t.cover_image_url&&($("img[data-del='cover-image'], img.pp-user-cover-image").attr("src",t.cover_image_url),$("input[name=eup_cover_image]",s).val(""),$(".profilepress-myaccount-has-cover-image",s).show(),$(".profilepress-myaccount-cover-image-empty",s).hide()),"message"in t&&(e.edit_profile_msg_class=$(t.message).attr("class"),s.before(t.message)),"redirect"in t&&(s.trigger("pp_edit_profile_success_before_redirect"),e.location.assign(t.redirect)),a._remove_processing_label(s)}},"json")}},this.ajax_password_reset=function(e){e.preventDefault();var t=$(this),s=a.get_melange_id(t),r="true"===t.find('input[name="is-pp-tab-widget"]').val(),i={action:"pp_ajax_passwordreset",data:$(this).serialize()+"&melange_id="+s};a._remove_status_notice(),t.parents(".pp-tab-widget-form").prev(".pp-tab-status").remove(),a._add_processing_label(t),$.post(pp_ajax_form.ajaxurl,i,(function(e){if(t.trigger("pp_form_submitted"),"object"!=typeof e)return a._remove_processing_label(t);if("message"in e){if(t.trigger("pp_password_reset_status"),r){var s=e.message.replace("profilepress-reset-status","pp-tab-status");t.parents(".pp-tab-widget-form").before(s)}else t.parents(".lucidContainer").length>0?t.parents(".lucidContainer").before(e.message):t.before(e.message);"status"in e&&!0===e.status&&t.hide(),$('input[name="user_login"]',t).val("")}a._remove_processing_label(t)}),"json")},this.ajax_registration=function(t){if(void 0!==e.FormData&&e.FormData){t.preventDefault();var s=$(this),r=a.get_melange_id(s),i=new FormData(this),p="true"===s.find('input[name="is-pp-tab-widget"]').val();i.append("action","pp_ajax_signup"),i.append("melange_id",r),a._remove_status_notice(),s.parents(".pp-tab-widget-form").prev(".pp-tab-status").remove(),a._add_processing_label(s),$.post({url:pp_ajax_form.ajaxurl,data:i,cache:!1,contentType:!1,enctype:"multipart/form-data",processData:!1,dataType:"json",success:function(t){if(s.trigger("pp_form_submitted"),"object"!=typeof t)return a._remove_processing_label(s);if("message"in t){if(s.trigger("pp_registration_error",[t]),s.trigger("pp_registration_ajax_response",[t]),p){var r=t.message.replace("profilepress-reg-status","pp-tab-status");s.parents(".pp-tab-widget-form").before(r)}else s.parents(".lucidContainer").length>0?s.parents(".lucidContainer").before(t.message):s.before(t.message);a.reset_form(s)}else"redirect"in t&&(s.trigger("pp_registration_success",[t]),e.location.assign(t.redirect));a._remove_processing_label(s)}})}},this.ajax_login=function(t){t.preventDefault();var s=$(this),r={action:"pp_ajax_login",data:$(this).serialize()},i="true"===s.find('input[name="is-pp-tab-widget"]').val();a._remove_status_notice(),a._add_processing_label(s),$.post(pp_ajax_form.ajaxurl,r,(function(t){if(s.trigger("pp_form_submitted"),null===t||"object"!=typeof t)return a._remove_processing_label(s);if("success"in t&&!0===t.success&&"redirect"in t)s.trigger("pp_login_form_success"),e.location.assign(t.redirect);else if(s.trigger("pp_login_form_error"),"code"in t&&"pp2fa_auth_code_invalid"==t.code&&s.find(".pp-2fa").show(),i){var r=t.message.replace("profilepress-login-status","pp-tab-status");s.parents(".pp-tab-widget-form").before(r)}else s.parents(".lucidContainer").length>0?s.parents(".lucidContainer").before(t.message):s.before(t.message);a._remove_processing_label(s)}),"json")},this.delete_avatar=function(e){e.preventDefault();var t=$(this).text(),a=$(this);e.preventDefault(),confirm(pp_ajax_form.confirm_delete)&&(a.is("button")&&a.text(pp_ajax_form.deleting_text),$.post(pp_ajax_form.ajaxurl,{action:"pp_del_avatar",nonce:pp_ajax_form.nonce}).done((function(e){"error"in e&&"nonce_failed"===e.error?(a.text(t),alert(pp_ajax_form.deleting_error)):"success"in e&&($("img[data-del='avatar']").attr("src",e.default),a.remove())})))},this.delete_profile_image_cover=function(e){e.preventDefault();var t=$(this).text(),a=$(this);e.preventDefault(),confirm(pp_ajax_form.confirm_delete)&&(a.is("button")&&a.text(pp_ajax_form.deleting_text),$.post(pp_ajax_form.ajaxurl,{action:"pp_del_cover_image",nonce:pp_ajax_form.nonce}).done((function(e){"error"in e&&"nonce_failed"===e.error&&(a.text(t),alert(pp_ajax_form.deleting_error)),"success"in e&&(""!==e.default?($("img[data-del='cover-image']").attr("src",e.default),a.parent().find(".profilepress-myaccount-has-cover-image").show(),a.parent().find(".profilepress-myaccount-cover-image-empty").hide()):(a.parent().find(".profilepress-myaccount-has-cover-image").hide(),a.parent().find(".profilepress-myaccount-cover-image-empty").show()),a.remove())})))},this.get_melange_id=function(e){var a=$("input.pp_melange_id",e).val();return a===t?"":a},this._add_processing_label=function(e){var t=e.find("input[data-pp-submit-label]");t.attr({value:t.data("pp-processing-label"),disabled:"disabled"}).css("opacity",".4")},this._remove_processing_label=function(e){var t=e.find("input[data-pp-submit-label]");t.attr("value",t.data("pp-submit-label")),t.attr({value:t.data("pp-submit-label"),disabled:null}).css("opacity","")},this._remove_status_notice=function(){$(".profilepress-login-status,.pp-tab-status,.profilepress-edit-profile-success,.profilepress-edit-profile-status,.pp-reset-success,.profilepress-reset-status,.profilepress-reg-status").remove()},this.defaultUserProfileResponsive=function(){$(".ppress-default-profile, .pp-member-directory").each((function(){var e=$(this),t=e.width();t<=340?(e.removeClass("ppressui340"),e.removeClass("ppressui500"),e.removeClass("ppressui800"),e.removeClass("ppressui960"),e.addClass("ppressui340")):t<=500?(e.removeClass("ppressui340"),e.removeClass("ppressui500"),e.removeClass("ppressui800"),e.removeClass("ppressui960"),e.addClass("ppressui500")):t<=800?(e.removeClass("ppressui340"),e.removeClass("ppressui500"),e.removeClass("ppressui800"),e.removeClass("ppressui960"),e.addClass("ppressui800")):t<=960?(e.removeClass("ppressui340"),e.removeClass("ppressui500"),e.removeClass("ppressui800"),e.removeClass("ppressui960"),e.addClass("ppressui960")):t>960&&(e.removeClass("ppressui340"),e.removeClass("ppressui500"),e.removeClass("ppressui800"),e.removeClass("ppressui960")),e.css("opacity",1)})),$(".ppress-default-profile-cover, .ppress-default-profile-cover-e").each((function(){var e=$(this),t=Math.round(e.width()/e.data("ratio"))+"px";e.height(t),e.find(".ppress-dpf-cover-add").height(t)}))}}).init()}(jQuery,window,void 0)}();
;
/*!
 * JavaScript Cookie v2.1.4
 * https://github.com/js-cookie/js-cookie
 *
 * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
 * Released under the MIT license
 */
(function(factory){var registeredInModuleLoader=false;if(typeof define==='function'&&define.amd){define(factory);registeredInModuleLoader=true;}
if(typeof exports==='object'){module.exports=factory();registeredInModuleLoader=true;}
if(!registeredInModuleLoader){var OldCookies=window.Cookies;var api=window.Cookies=factory();api.noConflict=function(){window.Cookies=OldCookies;return api;};}}(function(){function extend(){var i=0;var result={};for(;i<arguments.length;i++){var attributes=arguments[i];for(var key in attributes){result[key]=attributes[key];}}
return result;}
function init(converter){function api(key,value,attributes){var result;if(typeof document==='undefined'){return;}
if(arguments.length>1){attributes=extend({path:'/'},api.defaults,attributes);if(typeof attributes.expires==='number'){var expires=new Date();expires.setMilliseconds(expires.getMilliseconds()+attributes.expires*864e+5);attributes.expires=expires;}
attributes.expires=attributes.expires?attributes.expires.toUTCString():'';try{result=JSON.stringify(value);if(/^[\{\[]/.test(result)){value=result;}}catch(e){}
if(!converter.write){value=encodeURIComponent(String(value)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent);}else{value=converter.write(value,key);}
key=encodeURIComponent(String(key));key=key.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent);key=key.replace(/[\(\)]/g,escape);var stringifiedAttributes='';for(var attributeName in attributes){if(!attributes[attributeName]){continue;}
stringifiedAttributes+='; '+attributeName;if(attributes[attributeName]===true){continue;}
stringifiedAttributes+='='+attributes[attributeName];}
return(document.cookie=key+'='+value+stringifiedAttributes);}
if(!key){result={};}
var cookies=document.cookie?document.cookie.split('; '):[];var rdecode=/(%[0-9A-Z]{2})+/g;var i=0;for(;i<cookies.length;i++){var parts=cookies[i].split('=');var cookie=parts.slice(1).join('=');if(cookie.charAt(0)==='"'){cookie=cookie.slice(1,-1);}
try{var name=parts[0].replace(rdecode,decodeURIComponent);cookie=converter.read?converter.read(cookie,name):converter(cookie,name)||cookie.replace(rdecode,decodeURIComponent);if(this.json){try{cookie=JSON.parse(cookie);}catch(e){}}
if(key===name){result=cookie;break;}
if(!key){result[name]=cookie;}}catch(e){}}
return result;}
api.set=api;api.get=function(key){return api.call(api,key);};api.getJSON=function(){return api.apply({json:true},[].slice.call(arguments));};api.defaults={};api.remove=function(key,attributes){api(key,'',extend(attributes,{expires:-1}));};api.withConverter=init;return api;}
return init(function(){});}));

var EasyAutocomplete=function(a){return a.Configuration=function(a){function b(){if("xml"===a.dataType&&(a.getValue||(a.getValue=function(a){return $(a).text()}),a.list||(a.list={}),a.list.sort||(a.list.sort={}),a.list.sort.method=function(b,c){return b=a.getValue(b),c=a.getValue(c),c>b?-1:b>c?1:0},a.list.match||(a.list.match={}),a.list.match.method=function(a,b){return a.search(b)>-1}),void 0!==a.categories&&a.categories instanceof Array){for(var b=[],c=0,d=a.categories.length;d>c;c+=1){var e=a.categories[c];for(var f in h.categories[0])void 0===e[f]&&(e[f]=h.categories[0][f]);b.push(e)}a.categories=b}}function c(){function b(a,c){var d=a||{};for(var e in a)void 0!==c[e]&&null!==c[e]&&("object"!=typeof c[e]||c[e]instanceof Array?d[e]=c[e]:b(a[e],c[e]));return void 0!==c.data&&null!==c.data&&"object"==typeof c.data&&(d.data=c.data),d}h=b(h,a)}function d(){if("list-required"!==h.url&&"function"!=typeof h.url){var b=h.url;h.url=function(){return b}}if(void 0!==h.ajaxSettings.url&&"function"!=typeof h.ajaxSettings.url){var b=h.ajaxSettings.url;h.ajaxSettings.url=function(){return b}}if("string"==typeof h.listLocation){var c=h.listLocation;"XML"===h.dataType.toUpperCase()?h.listLocation=function(a){return $(a).find(c)}:h.listLocation=function(a){return a[c]}}if("string"==typeof h.getValue){var d=h.getValue;h.getValue=function(a){return a[d]}}void 0!==a.categories&&(h.categoriesAssigned=!0)}function e(){void 0!==a.ajaxSettings&&"object"==typeof a.ajaxSettings?h.ajaxSettings=a.ajaxSettings:h.ajaxSettings={}}function f(a){return void 0!==h[a]&&null!==h[a]}function g(a,b){function c(b,d){for(var e in d)void 0===b[e]&&a.log("Property '"+e+"' does not exist in EasyAutocomplete options API."),"object"==typeof b[e]&&-1===$.inArray(e,i)&&c(b[e],d[e])}c(h,b)}var h={data:"list-required",url:"list-required",dataType:"json",listLocation:function(a){return a},xmlElementName:"",getValue:function(a){return a},autocompleteOff:!0,placeholder:!1,ajaxCallback:function(){},matchResponseProperty:!1,list:{sort:{enabled:!1,method:function(a,b){return a=h.getValue(a),b=h.getValue(b),b>a?-1:a>b?1:0}},maxNumberOfElements:6,hideOnEmptyPhrase:!0,match:{enabled:!1,caseSensitive:!1,method:function(a,b){return a.search(b)>-1}},showAnimation:{type:"normal",time:400,callback:function(){}},hideAnimation:{type:"normal",time:400,callback:function(){}},onClickEvent:function(){},onSelectItemEvent:function(){},onLoadEvent:function(){},onChooseEvent:function(){},onKeyEnterEvent:function(){},onMouseOverEvent:function(){},onMouseOutEvent:function(){},onShowListEvent:function(){},onHideListEvent:function(){}},highlightPhrase:!0,theme:"",cssClasses:"",minCharNumber:0,requestDelay:0,adjustWidth:!0,ajaxSettings:{},preparePostData:function(a,b){return a},loggerEnabled:!0,template:"",categoriesAssigned:!1,categories:[{maxNumberOfElements:4}]},i=["ajaxSettings","template"];this.get=function(a){return h[a]},this.equals=function(a,b){return!(!f(a)||h[a]!==b)},this.checkDataUrlProperties=function(){return"list-required"!==h.url||"list-required"!==h.data},this.checkRequiredProperties=function(){for(var a in h)if("required"===h[a])return logger.error("Option "+a+" must be defined"),!1;return!0},this.printPropertiesThatDoesntExist=function(a,b){g(a,b)},b(),c(),h.loggerEnabled===!0&&g(console,a),e(),d()},a}(EasyAutocomplete||{}),EasyAutocomplete=function(a){return a.Logger=function(){this.error=function(a){console.log("ERROR: "+a)},this.warning=function(a){console.log("WARNING: "+a)}},a}(EasyAutocomplete||{}),EasyAutocomplete=function(a){return a.Constans=function(){var a={CONTAINER_CLASS:"easy-autocomplete-container",CONTAINER_ID:"eac-container-",WRAPPER_CSS_CLASS:"easy-autocomplete"};this.getValue=function(b){return a[b]}},a}(EasyAutocomplete||{}),EasyAutocomplete=function(a){return a.ListBuilderService=function(a,b){function c(b,c){function d(){var d,e={};return void 0!==b.xmlElementName&&(e.xmlElementName=b.xmlElementName),void 0!==b.listLocation?d=b.listLocation:void 0!==a.get("listLocation")&&(d=a.get("listLocation")),void 0!==d?"string"==typeof d?e.data=$(c).find(d):"function"==typeof d&&(e.data=d(c)):e.data=c,e}function e(){var a={};return void 0!==b.listLocation?"string"==typeof b.listLocation?a.data=c[b.listLocation]:"function"==typeof b.listLocation&&(a.data=b.listLocation(c)):a.data=c,a}var f={};if(f="XML"===a.get("dataType").toUpperCase()?d():e(),void 0!==b.header&&(f.header=b.header),void 0!==b.maxNumberOfElements&&(f.maxNumberOfElements=b.maxNumberOfElements),void 0!==a.get("list").maxNumberOfElements&&(f.maxListSize=a.get("list").maxNumberOfElements),void 0!==b.getValue)if("string"==typeof b.getValue){var g=b.getValue;f.getValue=function(a){return a[g]}}else"function"==typeof b.getValue&&(f.getValue=b.getValue);else f.getValue=a.get("getValue");return f}function d(b){var c=[];return void 0===b.xmlElementName&&(b.xmlElementName=a.get("xmlElementName")),$(b.data).find(b.xmlElementName).each(function(){c.push(this)}),c}this.init=function(b){var c=[],d={};return d.data=a.get("listLocation")(b),d.getValue=a.get("getValue"),d.maxListSize=a.get("list").maxNumberOfElements,c.push(d),c},this.updateCategories=function(b,d){if(a.get("categoriesAssigned")){b=[];for(var e=0;e<a.get("categories").length;e+=1){var f=c(a.get("categories")[e],d);b.push(f)}}return b},this.convertXml=function(b){if("XML"===a.get("dataType").toUpperCase())for(var c=0;c<b.length;c+=1)b[c].data=d(b[c]);return b},this.processData=function(c,d){for(var e=0,f=c.length;f>e;e+=1)c[e].data=b(a,c[e],d);return c},this.checkIfDataExists=function(a){for(var b=0,c=a.length;c>b;b+=1)if(void 0!==a[b].data&&a[b].data instanceof Array&&a[b].data.length>0)return!0;return!1}},a}(EasyAutocomplete||{}),EasyAutocomplete=function(a){return a.proccess=function(b,c,d){function e(a,c){var d=[],e="";if(b.get("list").match.enabled)for(var g=0,h=a.length;h>g;g+=1)e=b.get("getValue")(a[g]),f(e,c)&&d.push(a[g]);else d=a;return d}function f(a,c){return b.get("list").match.caseSensitive||("string"==typeof a&&(a=a.toLowerCase()),c=c.toLowerCase()),!!b.get("list").match.method(a,c)}function g(a){return void 0!==c.maxNumberOfElements&&a.length>c.maxNumberOfElements&&(a=a.slice(0,c.maxNumberOfElements)),a}function h(a){return b.get("list").sort.enabled&&a.sort(b.get("list").sort.method),a}a.proccess.match=f;var i=c.data,j=d;return i=e(i,j),i=g(i),i=h(i)},a}(EasyAutocomplete||{}),EasyAutocomplete=function(a){return a.Template=function(a){var b={basic:{type:"basic",method:function(a){return a},cssClass:""},description:{type:"description",fields:{description:"description"},method:function(a){return a+" - description"},cssClass:"eac-description"},iconLeft:{type:"iconLeft",fields:{icon:""},method:function(a){return a},cssClass:"eac-icon-left"},iconRight:{type:"iconRight",fields:{iconSrc:""},method:function(a){return a},cssClass:"eac-icon-right"},links:{type:"links",fields:{link:""},method:function(a){return a},cssClass:""},custom:{type:"custom",method:function(){},cssClass:""}},c=function(a){var c,d=a.fields;return"description"===a.type?(c=b.description.method,"string"==typeof d.description?c=function(a,b){return a+" - <span>"+b[d.description]+"</span>"}:"function"==typeof d.description&&(c=function(a,b){return a+" - <span>"+d.description(b)+"</span>"}),c):"iconRight"===a.type?("string"==typeof d.iconSrc?c=function(a,b){return a+"<img class='eac-icon' src='"+b[d.iconSrc]+"' />"}:"function"==typeof d.iconSrc&&(c=function(a,b){return a+"<img class='eac-icon' src='"+d.iconSrc(b)+"' />"}),c):"iconLeft"===a.type?("string"==typeof d.iconSrc?c=function(a,b){return"<img class='eac-icon' src='"+b[d.iconSrc]+"' />"+a}:"function"==typeof d.iconSrc&&(c=function(a,b){return"<img class='eac-icon' src='"+d.iconSrc(b)+"' />"+a}),c):"links"===a.type?("string"==typeof d.link?c=function(a,b){return"<a href='"+b[d.link]+"' >"+a+"</a>"}:"function"==typeof d.link&&(c=function(a,b){return"<a href='"+d.link(b)+"' >"+a+"</a>"}),c):"custom"===a.type?a.method:b.basic.method},d=function(a){return a&&a.type&&a.type&&b[a.type]?c(a):b.basic.method},e=function(a){var c=function(){return""};return a&&a.type&&a.type&&b[a.type]?function(){var c=b[a.type].cssClass;return function(){return c}}():c};this.getTemplateClass=e(a),this.build=d(a)},a}(EasyAutocomplete||{}),EasyAutocomplete=function(a){return a.main=function(b,c){function d(){return 0===t.length?void p.error("Input field doesn't exist."):o.checkDataUrlProperties()?o.checkRequiredProperties()?(e(),void g()):void p.error("Will not work without mentioned properties."):void p.error("One of options variables 'data' or 'url' must be defined.")}function e(){function a(){var a=$("<div>"),c=n.getValue("WRAPPER_CSS_CLASS");o.get("theme")&&""!==o.get("theme")&&(c+=" eac-"+o.get("theme")),o.get("cssClasses")&&""!==o.get("cssClasses")&&(c+=" "+o.get("cssClasses")),""!==q.getTemplateClass()&&(c+=" "+q.getTemplateClass()),a.addClass(c),t.wrap(a),o.get("adjustWidth")===!0&&b()}function b(){var a=t.outerWidth();t.parent().css("width",a)}function c(){t.unwrap()}function d(){var a=$("<div>").addClass(n.getValue("CONTAINER_CLASS"));a.attr("id",f()).prepend($("<ul>")),function(){a.on("show.eac",function(){switch(o.get("list").showAnimation.type){case"slide":var b=o.get("list").showAnimation.time,c=o.get("list").showAnimation.callback;a.find("ul").slideDown(b,c);break;case"fade":var b=o.get("list").showAnimation.time,c=o.get("list").showAnimation.callback;a.find("ul").fadeIn(b),c;break;default:a.find("ul").show()}o.get("list").onShowListEvent()}).on("hide.eac",function(){switch(o.get("list").hideAnimation.type){case"slide":var b=o.get("list").hideAnimation.time,c=o.get("list").hideAnimation.callback;a.find("ul").slideUp(b,c);break;case"fade":var b=o.get("list").hideAnimation.time,c=o.get("list").hideAnimation.callback;a.find("ul").fadeOut(b,c);break;default:a.find("ul").hide()}o.get("list").onHideListEvent()}).on("selectElement.eac",function(){a.find("ul li").removeClass("selected"),a.find("ul li").eq(w).addClass("selected"),o.get("list").onSelectItemEvent()}).on("loadElements.eac",function(b,c,d){var e="",f=a.find("ul");f.empty().detach(),v=[];for(var h=0,i=0,k=c.length;k>i;i+=1){var l=c[i].data;if(0!==l.length){void 0!==c[i].header&&c[i].header.length>0&&f.append("<div class='eac-category' >"+c[i].header+"</div>");for(var m=0,n=l.length;n>m&&h<c[i].maxListSize;m+=1)e=$("<li><div class='eac-item'></div></li>"),function(){var a=m,b=h,f=c[i].getValue(l[a]);e.find(" > div").on("click",function(){t.val(f).trigger("change"),w=b,j(b),o.get("list").onClickEvent(),o.get("list").onChooseEvent()}).mouseover(function(){w=b,j(b),o.get("list").onMouseOverEvent()}).mouseout(function(){o.get("list").onMouseOutEvent()}).html(q.build(g(f,d),l[a]))}(),f.append(e),v.push(l[m]),h+=1}}a.append(f),o.get("list").onLoadEvent()})}(),t.after(a)}function e(){t.next("."+n.getValue("CONTAINER_CLASS")).remove()}function g(a,b){return o.get("highlightPhrase")&&""!==b?i(a,b):a}function h(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}function i(a,b){var c=h(b);return(a+"").replace(new RegExp("("+c+")","gi"),"<b>$1</b>")}t.parent().hasClass(n.getValue("WRAPPER_CSS_CLASS"))&&(e(),c()),a(),d(),u=$("#"+f()),o.get("placeholder")&&t.attr("placeholder",o.get("placeholder"))}function f(){var a=t.attr("id");return a=n.getValue("CONTAINER_ID")+a}function g(){function a(){s("autocompleteOff",!0)&&n(),b(),c(),d(),e(),f(),g()}function b(){t.focusout(function(){var a,b=t.val();o.get("list").match.caseSensitive||(b=b.toLowerCase());for(var c=0,d=v.length;d>c;c+=1)if(a=o.get("getValue")(v[c]),o.get("list").match.caseSensitive||(a=a.toLowerCase()),a===b)return w=c,void j(w)})}function c(){t.off("keyup").keyup(function(a){function b(a){function b(){var a={},b=o.get("ajaxSettings")||{};for(var c in b)a[c]=b[c];return a}function c(a,b){return o.get("matchResponseProperty")!==!1?"string"==typeof o.get("matchResponseProperty")?b[o.get("matchResponseProperty")]===a:"function"==typeof o.get("matchResponseProperty")?o.get("matchResponseProperty")(b)===a:!0:!0}if(!(a.length<o.get("minCharNumber"))){if("list-required"!==o.get("data")){var d=o.get("data"),e=r.init(d);e=r.updateCategories(e,d),e=r.processData(e,a),k(e,a),t.parent().find("li").length>0?h():i()}var f=b();void 0!==f.url&&""!==f.url||(f.url=o.get("url")),void 0!==f.dataType&&""!==f.dataType||(f.dataType=o.get("dataType")),void 0!==f.url&&"list-required"!==f.url&&(f.url=f.url(a),f.data=o.get("preparePostData")(f.data,a),$.ajax(f).done(function(b){var d=r.init(b);d=r.updateCategories(d,b),d=r.convertXml(d),c(a,b)&&(d=r.processData(d,a),k(d,a)),r.checkIfDataExists(d)&&t.parent().find("li").length>0?h():i(),o.get("ajaxCallback")()}).fail(function(){p.warning("Fail to load response data")}).always(function(){}))}}switch(a.keyCode){case 27:i(),l();break;case 38:a.preventDefault(),v.length>0&&w>0&&(w-=1,t.val(o.get("getValue")(v[w])),j(w));break;case 40:a.preventDefault(),v.length>0&&w<v.length-1&&(w+=1,t.val(o.get("getValue")(v[w])),j(w));break;default:if(a.keyCode>40||8===a.keyCode){var c=t.val();o.get("list").hideOnEmptyPhrase!==!0||8!==a.keyCode||""!==c?o.get("requestDelay")>0?(void 0!==m&&clearTimeout(m),m=setTimeout(function(){b(c)},o.get("requestDelay"))):b(c):i()}}})}function d(){t.on("keydown",function(a){a=a||window.event;var b=a.keyCode;return 38===b?(suppressKeypress=!0,!1):void 0}).keydown(function(a){13===a.keyCode&&w>-1&&(t.val(o.get("getValue")(v[w])),o.get("list").onKeyEnterEvent(),o.get("list").onChooseEvent(),w=-1,i(),a.preventDefault())})}function e(){t.off("keypress")}function f(){t.focus(function(){""!==t.val()&&v.length>0&&(w=-1,h())})}function g(){t.blur(function(){setTimeout(function(){w=-1,i()},250)})}function n(){t.attr("autocomplete","off")}a()}function h(){u.trigger("show.eac")}function i(){u.trigger("hide.eac")}function j(a){u.trigger("selectElement.eac",a)}function k(a,b){u.trigger("loadElements.eac",[a,b])}function l(){t.trigger("blur")}var m,n=new a.Constans,o=new a.Configuration(c),p=new a.Logger,q=new a.Template(c.template),r=new a.ListBuilderService(o,a.proccess),s=o.equals,t=b,u="",v=[],w=-1;a.consts=n,this.getConstants=function(){return n},this.getConfiguration=function(){return o},this.getContainer=function(){return u},this.getSelectedItemIndex=function(){return w},this.getItems=function(){return v},this.getItemData=function(a){return v.length<a||void 0===v[a]?-1:v[a]},this.getSelectedItemData=function(){return this.getItemData(w)},this.build=function(){e()},this.init=function(){d()}},a.eacHandles=[],a.getHandle=function(b){return a.eacHandles[b]},a.inputHasId=function(a){return void 0!==$(a).attr("id")&&$(a).attr("id").length>0},a.assignRandomId=function(b){var c="";do c="eac-"+Math.floor(1e4*Math.random());while(0!==$("#"+c).length);elementId=a.consts.getValue("CONTAINER_ID")+c,$(b).attr("id",c)},a.setHandle=function(b,c){a.eacHandles[c]=b},a}(EasyAutocomplete||{});!function(a){a.fn.easyAutocomplete=function(b){return this.each(function(){var c=a(this),d=new EasyAutocomplete.main(c,b);EasyAutocomplete.inputHasId(c)||EasyAutocomplete.assignRandomId(c),d.init(),EasyAutocomplete.setHandle(d,c.attr("id"))})},a.fn.getSelectedItemIndex=function(){var b=a(this).attr("id");return void 0!==b?EasyAutocomplete.getHandle(b).getSelectedItemIndex():-1},a.fn.getItems=function(){var b=a(this).attr("id");return void 0!==b?EasyAutocomplete.getHandle(b).getItems():-1},a.fn.getItemData=function(b){var c=a(this).attr("id");return void 0!==c&&b>-1?EasyAutocomplete.getHandle(c).getItemData(b):-1},a.fn.getSelectedItemData=function(){var b=a(this).attr("id");return void 0!==b?EasyAutocomplete.getHandle(b).getSelectedItemData():-1}}(jQuery);
;(function($){var tmp,loading,overlay,wrap,outer,content,close,title,nav_left,nav_right,selectedIndex=0,selectedOpts={},selectedArray=[],currentIndex=0,currentOpts={},currentArray=[],ajaxLoader=null,imgPreloader=new Image(),imgRegExp=/\.(jpg|gif|png|bmp|jpeg)(.*)?$/i,swfRegExp=/[^\.]\.(swf)\s*$/i,loadingTimer,loadingFrame=1,titleHeight=0,titleStr='',start_pos,final_pos,busy=false,fx=$.extend($('<div/>')[0],{prop:0}),isIE6=$.browser.msie&&$.browser.version<7&&!window.XMLHttpRequest,_abort=function(){loading.hide();imgPreloader.onerror=imgPreloader.onload=null;if(ajaxLoader){ajaxLoader.abort();}
tmp.empty();},_error=function(){if(false===selectedOpts.onError(selectedArray,selectedIndex,selectedOpts)){loading.hide();busy=false;return;}
selectedOpts.titleShow=false;selectedOpts.width='auto';selectedOpts.height='auto';tmp.html('<p id="fancybox-error">The requested content cannot be loaded.<br />Please try again later.</p>');_process_inline();},_start=function(){var obj=selectedArray[selectedIndex],href,type,title,str,emb,ret;_abort();selectedOpts=$.extend({},$.fn.fancybox.defaults,(typeof $(obj).data('fancybox')=='undefined'?selectedOpts:$(obj).data('fancybox')));ret=selectedOpts.onStart(selectedArray,selectedIndex,selectedOpts);if(ret===false){busy=false;return;}else if(typeof ret=='object'){selectedOpts=$.extend(selectedOpts,ret);}
title=selectedOpts.title||(obj.nodeName?$(obj).attr('title'):obj.title)||'';if(obj.nodeName&&!selectedOpts.orig){selectedOpts.orig=$(obj).children("img:first").length?$(obj).children("img:first"):$(obj);}
if(title===''&&selectedOpts.orig&&selectedOpts.titleFromAlt){title=selectedOpts.orig.attr('alt');}
href=selectedOpts.href||(obj.nodeName?$(obj).attr('href'):obj.href)||null;if((/^(?:javascript)/i).test(href)||href=='#'){href=null;}
if(selectedOpts.type){type=selectedOpts.type;if(!href){href=selectedOpts.content;}}else if(selectedOpts.content){type='html';}else if(href){if(href.match(imgRegExp)){type='image';}else if(href.match(swfRegExp)){type='swf';}else if($(obj).hasClass("iframe")){type='iframe';}else if(href.indexOf("#")===0){type='inline';}else{type='ajax';}}
if(!type){_error();return;}
if(type=='inline'){obj=href.substr(href.indexOf("#"));type=$(obj).length>0?'inline':'ajax';}
selectedOpts.type=type;selectedOpts.href=href;selectedOpts.title=title;if(selectedOpts.autoDimensions){if(selectedOpts.type=='html'||selectedOpts.type=='inline'||selectedOpts.type=='ajax'){selectedOpts.width='auto';selectedOpts.height='auto';}else{selectedOpts.autoDimensions=false;}}
if(selectedOpts.modal){selectedOpts.overlayShow=true;selectedOpts.hideOnOverlayClick=false;selectedOpts.hideOnContentClick=false;selectedOpts.enableEscapeButton=false;selectedOpts.showCloseButton=false;}
selectedOpts.padding=parseInt(selectedOpts.padding,10);selectedOpts.margin=parseInt(selectedOpts.margin,10);tmp.css('padding',(selectedOpts.padding+selectedOpts.margin));$('.fancybox-inline-tmp').unbind('fancybox-cancel').bind('fancybox-change',function(){$(this).replaceWith(content.children());});switch(type){case'html':tmp.html(selectedOpts.content);_process_inline();break;case'inline':if($(obj).parent().is('#fancybox-content')===true){busy=false;return;}
$('<div class="fancybox-inline-tmp" />').hide().insertBefore($(obj)).bind('fancybox-cleanup',function(){$(this).replaceWith(content.children());}).bind('fancybox-cancel',function(){$(this).replaceWith(tmp.children());});$(obj).appendTo(tmp);_process_inline();break;case'image':busy=false;$.fancybox.showActivity();imgPreloader=new Image();imgPreloader.onerror=function(){_error();};imgPreloader.onload=function(){busy=true;imgPreloader.onerror=imgPreloader.onload=null;_process_image();};imgPreloader.src=href;break;case'swf':selectedOpts.scrolling='no';str='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="'+selectedOpts.width+'" height="'+selectedOpts.height+'"><param name="movie" value="'+href+'"></param>';emb='';$.each(selectedOpts.swf,function(name,val){str+='<param name="'+name+'" value="'+val+'"></param>';emb+=' '+name+'="'+val+'"';});str+='<embed src="'+href+'" type="application/x-shockwave-flash" width="'+selectedOpts.width+'" height="'+selectedOpts.height+'"'+emb+'></embed></object>';tmp.html(str);_process_inline();break;case'ajax':busy=false;$.fancybox.showActivity();selectedOpts.ajax.win=selectedOpts.ajax.success;ajaxLoader=$.ajax($.extend({},selectedOpts.ajax,{url:href,data:selectedOpts.ajax.data||{},error:function(XMLHttpRequest,textStatus,errorThrown){if(XMLHttpRequest.status>0){_error();}},success:function(data,textStatus,XMLHttpRequest){var o=typeof XMLHttpRequest=='object'?XMLHttpRequest:ajaxLoader;if(o.status==200){if(typeof selectedOpts.ajax.win=='function'){ret=selectedOpts.ajax.win(href,data,textStatus,XMLHttpRequest);if(ret===false){loading.hide();return;}else if(typeof ret=='string'||typeof ret=='object'){data=ret;}}
tmp.html(data);_process_inline();}}}));break;case'iframe':_show();break;}},_process_inline=function(){var
w=selectedOpts.width,h=selectedOpts.height;if(w.toString().indexOf('%')>-1){w=parseInt(($(window).width()-(selectedOpts.margin*2))*parseFloat(w)/100,10)+'px';}else{w=w=='auto'?'auto':w+'px';}
if(h.toString().indexOf('%')>-1){h=parseInt(($(window).height()-(selectedOpts.margin*2))*parseFloat(h)/100,10)+'px';}else{h=h=='auto'?'auto':h+'px';}
tmp.wrapInner('<div style="width:'+w+';height:'+h+';overflow: '+(selectedOpts.scrolling=='auto'?'auto':(selectedOpts.scrolling=='yes'?'scroll':'hidden'))+';position:relative;"></div>');selectedOpts.width=tmp.width();selectedOpts.height=tmp.height();_show();},_process_image=function(){selectedOpts.width=imgPreloader.width;selectedOpts.height=imgPreloader.height;$("<img />").attr({'id':'fancybox-img','src':imgPreloader.src,'alt':selectedOpts.title}).appendTo(tmp);_show();},_show=function(){var pos,equal;loading.hide();if(wrap.is(":visible")&&false===currentOpts.onCleanup(currentArray,currentIndex,currentOpts)){$.event.trigger('fancybox-cancel');busy=false;return;}
busy=true;$(content.add(overlay)).unbind();$(window).unbind("resize.fb scroll.fb");$(document).unbind('keydown.fb');if(wrap.is(":visible")&&currentOpts.titlePosition!=='outside'){wrap.css('height',wrap.height());}
currentArray=selectedArray;currentIndex=selectedIndex;currentOpts=selectedOpts;if(currentOpts.overlayShow){overlay.css({'background-color':currentOpts.overlayColor,'opacity':currentOpts.overlayOpacity,'cursor':currentOpts.hideOnOverlayClick?'pointer':'auto','height':$(document).height()});if(!overlay.is(':visible')){if(isIE6){$('select:not(#fancybox-tmp select)').filter(function(){return this.style.visibility!=='hidden';}).css({'visibility':'hidden'}).one('fancybox-cleanup',function(){this.style.visibility='inherit';});}
overlay.show();}}else{overlay.hide();}
final_pos=_get_zoom_to();_process_title();if(wrap.is(":visible")){$(close.add(nav_left).add(nav_right)).hide();pos=wrap.position(),start_pos={top:pos.top,left:pos.left,width:wrap.width(),height:wrap.height()};equal=(start_pos.width==final_pos.width&&start_pos.height==final_pos.height);content.fadeTo(currentOpts.changeFade,0.3,function(){var finish_resizing=function(){content.html(tmp.contents()).fadeTo(currentOpts.changeFade,1,_finish);};$.event.trigger('fancybox-change');content.empty().removeAttr('filter').css({'border-width':currentOpts.padding,'width':final_pos.width-currentOpts.padding*2,'height':selectedOpts.autoDimensions?'auto':final_pos.height-titleHeight-currentOpts.padding*2});if(equal){finish_resizing();}else{fx.prop=0;$(fx).animate({prop:1},{duration:currentOpts.changeSpeed,easing:currentOpts.easingChange,step:_draw,complete:finish_resizing});}});return;}
wrap.removeAttr("style");content.css('border-width',currentOpts.padding);if(currentOpts.transitionIn=='elastic'){start_pos=_get_zoom_from();content.html(tmp.contents());wrap.show();if(currentOpts.opacity){final_pos.opacity=0;}
fx.prop=0;$(fx).animate({prop:1},{duration:currentOpts.speedIn,easing:currentOpts.easingIn,step:_draw,complete:_finish});return;}
if(currentOpts.titlePosition=='inside'&&titleHeight>0){title.show();}
content.css({'width':final_pos.width-currentOpts.padding*2,'height':selectedOpts.autoDimensions?'auto':final_pos.height-titleHeight-currentOpts.padding*2}).html(tmp.contents());wrap.css(final_pos).fadeIn(currentOpts.transitionIn=='none'?0:currentOpts.speedIn,_finish);},_format_title=function(title){if(title&&title.length){if(currentOpts.titlePosition=='float'){return'<table id="fancybox-title-float-wrap" cellpadding="0" cellspacing="0"><tr><td id="fancybox-title-float-left"></td><td id="fancybox-title-float-main">'+title+'</td><td id="fancybox-title-float-right"></td></tr></table>';}
return'<div id="fancybox-title-'+currentOpts.titlePosition+'">'+title+'</div>';}
return false;},_process_title=function(){titleStr=currentOpts.title||'';titleHeight=0;title.empty().removeAttr('style').removeClass();if(currentOpts.titleShow===false){title.hide();return;}
titleStr=$.isFunction(currentOpts.titleFormat)?currentOpts.titleFormat(titleStr,currentArray,currentIndex,currentOpts):_format_title(titleStr);if(!titleStr||titleStr===''){title.hide();return;}
title.addClass('fancybox-title-'+currentOpts.titlePosition).html(titleStr).appendTo('body').show();switch(currentOpts.titlePosition){case'inside':title.css({'width':final_pos.width-(currentOpts.padding*2),'marginLeft':currentOpts.padding,'marginRight':currentOpts.padding});titleHeight=title.outerHeight(true);title.appendTo(outer);final_pos.height+=titleHeight;break;case'over':title.css({'marginLeft':currentOpts.padding,'width':final_pos.width-(currentOpts.padding*2),'bottom':currentOpts.padding}).appendTo(outer);break;case'float':title.css('left',parseInt((title.width()-final_pos.width-40)/2,10)*-1).appendTo(wrap);break;default:title.css({'width':final_pos.width-(currentOpts.padding*2),'paddingLeft':currentOpts.padding,'paddingRight':currentOpts.padding}).appendTo(wrap);break;}
title.hide();},_set_navigation=function(){if(currentOpts.enableEscapeButton||currentOpts.enableKeyboardNav){$(document).bind('keydown.fb',function(e){if(e.keyCode==27&&currentOpts.enableEscapeButton){e.preventDefault();$.fancybox.close();}else if((e.keyCode==37||e.keyCode==39)&&currentOpts.enableKeyboardNav&&e.target.tagName!=='INPUT'&&e.target.tagName!=='TEXTAREA'&&e.target.tagName!=='SELECT'){e.preventDefault();$.fancybox[e.keyCode==37?'prev':'next']();}});}
if(!currentOpts.showNavArrows){nav_left.hide();nav_right.hide();return;}
if((currentOpts.cyclic&&currentArray.length>1)||currentIndex!==0){nav_left.show();}
if((currentOpts.cyclic&&currentArray.length>1)||currentIndex!=(currentArray.length-1)){nav_right.show();}},_finish=function(){if(!$.support.opacity){content.css('filter',0);wrap.css('filter',0);}
if(selectedOpts.autoDimensions){content.css('height','auto');}
wrap.css('height','auto');if(titleStr&&titleStr.length){title.show();}
if(currentOpts.showCloseButton){close.show();}
_set_navigation();if(currentOpts.hideOnContentClick){content.bind('click',$.fancybox.close);}
if(currentOpts.hideOnOverlayClick){overlay.bind('click',$.fancybox.close);}
$(window).bind("resize.fb",$.fancybox.resize);if(currentOpts.centerOnScroll){$(window).bind("scroll.fb",$.fancybox.center);}
if(currentOpts.type=='iframe'){$('<iframe id="fancybox-frame" name="fancybox-frame'+new Date().getTime()+'" frameborder="0" hspace="0" '+($.browser.msie?'allowtransparency="true""':'')+' scrolling="'+selectedOpts.scrolling+'" src="'+currentOpts.href+'"></iframe>').appendTo(content);}
wrap.show();busy=false;$.fancybox.center();currentOpts.onComplete(currentArray,currentIndex,currentOpts);_preload_images();},_preload_images=function(){var href,objNext;if((currentArray.length-1)>currentIndex){href=currentArray[currentIndex+1].href;if(typeof href!=='undefined'&&href.match(imgRegExp)){objNext=new Image();objNext.src=href;}}
if(currentIndex>0){href=currentArray[currentIndex-1].href;if(typeof href!=='undefined'&&href.match(imgRegExp)){objNext=new Image();objNext.src=href;}}},_draw=function(pos){var dim={width:parseInt(start_pos.width+(final_pos.width-start_pos.width)*pos,10),height:parseInt(start_pos.height+(final_pos.height-start_pos.height)*pos,10),top:parseInt(start_pos.top+(final_pos.top-start_pos.top)*pos,10),left:parseInt(start_pos.left+(final_pos.left-start_pos.left)*pos,10)};if(typeof final_pos.opacity!=='undefined'){dim.opacity=pos<0.5?0.5:pos;}
wrap.css(dim);content.css({'width':dim.width-currentOpts.padding*2,'height':dim.height-(titleHeight*pos)-currentOpts.padding*2});},_get_viewport=function(){return[$(window).width()-(currentOpts.margin*2),$(window).height()-(currentOpts.margin*2),$(document).scrollLeft()+currentOpts.margin,$(document).scrollTop()+currentOpts.margin];},_get_zoom_to=function(){var view=_get_viewport(),to={},resize=currentOpts.autoScale,double_padding=currentOpts.padding*2,ratio;if(currentOpts.width.toString().indexOf('%')>-1){to.width=parseInt((view[0]*parseFloat(currentOpts.width))/100,10);}else{to.width=currentOpts.width+double_padding;}
if(currentOpts.height.toString().indexOf('%')>-1){to.height=parseInt((view[1]*parseFloat(currentOpts.height))/100,10);}else{to.height=currentOpts.height+double_padding;}
if(resize&&(to.width>view[0]||to.height>view[1])){if(selectedOpts.type=='image'||selectedOpts.type=='swf'){ratio=(currentOpts.width)/(currentOpts.height);if((to.width)>view[0]){to.width=view[0];to.height=parseInt(((to.width-double_padding)/ratio)+double_padding,10);}
if((to.height)>view[1]){to.height=view[1];to.width=parseInt(((to.height-double_padding)*ratio)+double_padding,10);}}else{to.width=Math.min(to.width,view[0]);to.height=Math.min(to.height,view[1]);}}
to.top=parseInt(Math.max(view[3]-20,view[3]+((view[1]-to.height-40)*0.5)),10);to.left=parseInt(Math.max(view[2]-20,view[2]+((view[0]-to.width-40)*0.5)),10);return to;},_get_obj_pos=function(obj){var pos=obj.offset();pos.top+=parseInt(obj.css('paddingTop'),10)||0;pos.left+=parseInt(obj.css('paddingLeft'),10)||0;pos.top+=parseInt(obj.css('border-top-width'),10)||0;pos.left+=parseInt(obj.css('border-left-width'),10)||0;pos.width=obj.width();pos.height=obj.height();return pos;},_get_zoom_from=function(){var orig=selectedOpts.orig?$(selectedOpts.orig):false,from={},pos,view;if(orig&&orig.length){pos=_get_obj_pos(orig);from={width:pos.width+(currentOpts.padding*2),height:pos.height+(currentOpts.padding*2),top:pos.top-currentOpts.padding-20,left:pos.left-currentOpts.padding-20};}else{view=_get_viewport();from={width:currentOpts.padding*2,height:currentOpts.padding*2,top:parseInt(view[3]+view[1]*0.5,10),left:parseInt(view[2]+view[0]*0.5,10)};}
return from;},_animate_loading=function(){if(!loading.is(':visible')){clearInterval(loadingTimer);return;}
$('div',loading).css('top',(loadingFrame*-40)+'px');loadingFrame=(loadingFrame+1)%12;};$.fn.fancybox=function(options){if(!$(this).length){return this;}
$(this).data('fancybox',$.extend({},options,($.metadata?$(this).metadata():{}))).unbind('click.fb').bind('click.fb',function(e){e.preventDefault();if(busy){return;}
busy=true;$(this).blur();selectedArray=[];selectedIndex=0;var rel=$(this).attr('rel')||'';if(!rel||rel==''||rel==='nofollow'){selectedArray.push(this);}else{selectedArray=$("a[rel="+rel+"], area[rel="+rel+"]");selectedIndex=selectedArray.index(this);}
_start();return;});return this;};$.fancybox=function(obj){var opts;if(busy){return;}
busy=true;opts=typeof arguments[1]!=='undefined'?arguments[1]:{};selectedArray=[];selectedIndex=parseInt(opts.index,10)||0;if($.isArray(obj)){for(var i=0,j=obj.length;i<j;i++){if(typeof obj[i]=='object'){$(obj[i]).data('fancybox',$.extend({},opts,obj[i]));}else{obj[i]=$({}).data('fancybox',$.extend({content:obj[i]},opts));}}
selectedArray=jQuery.merge(selectedArray,obj);}else{if(typeof obj=='object'){$(obj).data('fancybox',$.extend({},opts,obj));}else{obj=$({}).data('fancybox',$.extend({content:obj},opts));}
selectedArray.push(obj);}
if(selectedIndex>selectedArray.length||selectedIndex<0){selectedIndex=0;}
_start();};$.fancybox.showActivity=function(){clearInterval(loadingTimer);loading.show();loadingTimer=setInterval(_animate_loading,66);};$.fancybox.hideActivity=function(){loading.hide();};$.fancybox.next=function(){return $.fancybox.pos(currentIndex+1);};$.fancybox.prev=function(){return $.fancybox.pos(currentIndex-1);};$.fancybox.pos=function(pos){if(busy){return;}
pos=parseInt(pos);selectedArray=currentArray;if(pos>-1&&pos<currentArray.length){selectedIndex=pos;_start();}else if(currentOpts.cyclic&&currentArray.length>1){selectedIndex=pos>=currentArray.length?0:currentArray.length-1;_start();}
return;};$.fancybox.cancel=function(){if(busy){return;}
busy=true;$.event.trigger('fancybox-cancel');_abort();selectedOpts.onCancel(selectedArray,selectedIndex,selectedOpts);busy=false;};$.fancybox.close=function(){if(busy||wrap.is(':hidden')){return;}
busy=true;if(currentOpts&&false===currentOpts.onCleanup(currentArray,currentIndex,currentOpts)){busy=false;return;}
_abort();$(close.add(nav_left).add(nav_right)).hide();$(content.add(overlay)).unbind();$(window).unbind("resize.fb scroll.fb");$(document).unbind('keydown.fb');content.find('iframe').attr('src',isIE6&&/^https/i.test(window.location.href||'')?'javascript:void(false)':'about:blank');if(currentOpts.titlePosition!=='inside'){title.empty();}
wrap.stop();function _cleanup(){overlay.fadeOut('fast');title.empty().hide();wrap.hide();$.event.trigger('fancybox-cleanup');content.empty();currentOpts.onClosed(currentArray,currentIndex,currentOpts);currentArray=selectedOpts=[];currentIndex=selectedIndex=0;currentOpts=selectedOpts={};busy=false;}
if(currentOpts.transitionOut=='elastic'){start_pos=_get_zoom_from();var pos=wrap.position();final_pos={top:pos.top,left:pos.left,width:wrap.width(),height:wrap.height()};if(currentOpts.opacity){final_pos.opacity=1;}
title.empty().hide();fx.prop=1;$(fx).animate({prop:0},{duration:currentOpts.speedOut,easing:currentOpts.easingOut,step:_draw,complete:_cleanup});}else{wrap.fadeOut(currentOpts.transitionOut=='none'?0:currentOpts.speedOut,_cleanup);}};$.fancybox.resize=function(){if(overlay.is(':visible')){overlay.css('height',$(document).height());}
$.fancybox.center(true);};$.fancybox.center=function(){var view,align;if(busy){return;}
align=arguments[0]===true?1:0;view=_get_viewport();if(!align&&(wrap.width()>view[0]||wrap.height()>view[1])){return;}
wrap.stop().animate({'top':parseInt(Math.max(view[3]-20,view[3]+((view[1]-content.height()-40)*0.5)-currentOpts.padding)),'left':parseInt(Math.max(view[2]-20,view[2]+((view[0]-content.width()-40)*0.5)-currentOpts.padding))},typeof arguments[0]=='number'?arguments[0]:200);};$.fancybox.init=function(){if($("#fancybox-wrap").length){return;}
$('body').append(tmp=$('<div id="fancybox-tmp"></div>'),loading=$('<div id="fancybox-loading"><div></div></div>'),overlay=$('<div id="fancybox-overlay"></div>'),wrap=$('<div id="fancybox-wrap"></div>'));outer=$('<div id="fancybox-outer"></div>').append('<div class="fancybox-bg" id="fancybox-bg-n"></div><div class="fancybox-bg" id="fancybox-bg-ne"></div><div class="fancybox-bg" id="fancybox-bg-e"></div><div class="fancybox-bg" id="fancybox-bg-se"></div><div class="fancybox-bg" id="fancybox-bg-s"></div><div class="fancybox-bg" id="fancybox-bg-sw"></div><div class="fancybox-bg" id="fancybox-bg-w"></div><div class="fancybox-bg" id="fancybox-bg-nw"></div>').appendTo(wrap);outer.append(content=$('<div id="fancybox-content"></div>'),close=$('<a id="fancybox-close"></a>'),title=$('<div id="fancybox-title"></div>'),nav_left=$('<a href="javascript:;" id="fancybox-left"><span class="fancy-ico" id="fancybox-left-ico"></span></a>'),nav_right=$('<a href="javascript:;" id="fancybox-right"><span class="fancy-ico" id="fancybox-right-ico"></span></a>'));close.click($.fancybox.close);loading.click($.fancybox.cancel);nav_left.click(function(e){e.preventDefault();$.fancybox.prev();});nav_right.click(function(e){e.preventDefault();$.fancybox.next();});if($.fn.mousewheel){wrap.bind('mousewheel.fb',function(e,delta){if(busy){e.preventDefault();}else if($(e.target).get(0).clientHeight==0||$(e.target).get(0).scrollHeight===$(e.target).get(0).clientHeight){e.preventDefault();$.fancybox[delta>0?'prev':'next']();}});}
if(!$.support.opacity){wrap.addClass('fancybox-ie');}
if(isIE6){loading.addClass('fancybox-ie6');wrap.addClass('fancybox-ie6');$('<iframe id="fancybox-hide-sel-frame" src="'+(/^https/i.test(window.location.href||'')?'javascript:void(false)':'about:blank')+'" scrolling="no" border="0" frameborder="0" tabindex="-1"></iframe>').prependTo(outer);}};$.fn.fancybox.defaults={padding:10,margin:40,opacity:false,modal:false,cyclic:false,scrolling:'auto',width:560,height:340,autoScale:true,autoDimensions:true,centerOnScroll:false,ajax:{},swf:{wmode:'transparent'},hideOnOverlayClick:true,hideOnContentClick:false,overlayShow:true,overlayOpacity:0.7,overlayColor:'#777',titleShow:true,titlePosition:'float',titleFormat:null,titleFromAlt:false,transitionIn:'fade',transitionOut:'fade',speedIn:300,speedOut:300,changeSpeed:300,changeFade:'fast',easingIn:'swing',easingOut:'swing',showCloseButton:true,showNavArrows:true,enableEscapeButton:true,enableKeyboardNav:true,onStart:function(){},onCancel:function(){},onComplete:function(){},onCleanup:function(){},onClosed:function(){},onError:function(){}};$(document).ready(function(){$.fancybox.init();});})(jQuery);
window.CRYPTO_ADVERTISING_PAGE={init:function(){try{this.bindEvents();this.determineVisibility();}catch(e){console.log(e);}},determineVisibility:function(){},bindEvents:function(){var _this=this;$('.sticky-footer').on('click','.close',function(e){e.preventDefault();$(this).closest('div.sticky-footer').addClass('hidden');if(typeof Cookies!=='undefined'){var closedStickyFooter=$(this).closest('div.sticky-footer').hasClass('hidden')?'yes':'no';Cookies.set(window.cryptoConfig.stickyFooterCookie,closedStickyFooter);}});}};jQuery(document).ready(window.CRYPTO_ADVERTISING_PAGE.init.bind(CRYPTO_ADVERTISING_PAGE));
window.CRYPTO_SORTING={watchColumnClicks:function(){var _this=this,sortOrder,sortedItems,sortedPreItems;$('.coin-list header > .col').on('click',function(){sortOrder=_this.determineSortOrder(this);switch($(this).attr('id')){case'col-rank':sortedItems=_this.sortByRank(sortOrder);break;case'col-market-cap':sortedItems=_this.sortByRank(sortOrder==="sort-desc"?"sort-asc":"sort-desc");break;case'col-coin':sortedItems=_this.sortByName(sortOrder);break;case'col-pre-coin':sortedPreItems=_this.sortByPreName(sortOrder);break;case'col-price':sortedItems=_this.sortByPrice(sortOrder);break;case'col-volume':sortedItems=_this.sortByVolume(sortOrder);break;case'col-circulating-supply':sortedItems=_this.sortByCircSupply(sortOrder);break;case'col-change':sortedItems=_this.sortByChange(sortOrder,'.change');break;case'col-change-seven':sortedItems=_this.sortByChange(sortOrder,'.change.seven');break;case'col-time':case'col-countdown-starts':case'col-countdown-ends':sortedItems=_this.sortByTimeUntil(sortOrder);break;case'col-pre-countdown-starts':sortedPreItems=_this.sortByPreTimeUntil(sortOrder);break;default:return false;}
if(sortedItems){$('.coin-list:not(.upcoming-pre-icos) header > .col.active').each(function(){$(this).removeClass('active sort-asc sort-desc');});$(this).addClass('active '+sortOrder);sortedItems.appendTo('.coin-list:not(.upcoming-pre-icos) .table-body');}
if(sortedPreItems){$('.upcoming-pre-icos header > .col.active').each(function(){$(this).removeClass('active sort-asc sort-desc');});$(this).addClass('active '+sortOrder);sortedPreItems.appendTo('.upcoming-pre-icos .table-body');}});},determineSortOrder:function(el){if($(el).hasClass('active')){return $(el).hasClass('sort-asc')?'sort-desc':'sort-asc';}
return'sort-desc';},sortByRank:function(sortOrder){var items=$('.coin-list').find('div.row').detach();return items.sort(function(a,b){var aCoin=parseInt($(a).find('.rank span').get(0).innerText);var bCoin=parseInt($(b).find('.rank span').get(0).innerText);return sortOrder==='sort-asc'?((aCoin<bCoin)?-1:((aCoin>bCoin)?1:0)):((aCoin>bCoin)?-1:((aCoin<bCoin)?1:0));});},sortByName:function(sortOrder){var items=$('.coin-list:not(.upcoming-pre-icos)').find('div.row').detach();return items.sort(function(a,b){var aCoin=$(a).find('.coin h3 a').get(0).text;var bCoin=$(b).find('.coin h3 a').get(0).text;return sortOrder==='sort-asc'?((aCoin<bCoin)?-1:((aCoin>bCoin)?1:0)):((aCoin>bCoin)?-1:((aCoin<bCoin)?1:0));});},sortByPreName:function(sortOrder){var items=$('.coin-list:has(.upcoming-pre-icos)').find('div.row').detach();return items.sort(function(a,b){var aCoin=$(a).find('.coin h3 a').get(0).text;var bCoin=$(b).find('.coin h3 a').get(0).text;return sortOrder==='sort-asc'?((aCoin<bCoin)?-1:((aCoin>bCoin)?1:0)):((aCoin>bCoin)?-1:((aCoin<bCoin)?1:0));});},sortByPrice:function(sortOrder){var items=$('.coin-list').find('div.row').detach();return items.sort(function(a,b){var aCoin=parseFloat($(a).find('.price').get(0).textContent.trim().split('$')[1].replace(/,/g,''));var bCoin=parseFloat($(b).find('.price').get(0).textContent.trim().split('$')[1].replace(/,/g,''));return sortOrder==='sort-desc'?((aCoin>bCoin)?-1:((aCoin<bCoin)?1:0)):((aCoin<bCoin)?-1:((aCoin>bCoin)?1:0));});},sortByVolume:function(sortOrder){var items=$('.coin-list').find('div.row').detach();return items.sort(function(a,b){var aCoin=parseInt($(a).find('.volume').get(0).innerText.trim().split('$')[1].replace(/,/g,''));var bCoin=parseInt($(b).find('.volume').get(0).innerText.trim().split('$')[1].replace(/,/g,''));return sortOrder==='sort-desc'?((aCoin>bCoin)?-1:((aCoin<bCoin)?1:0)):((aCoin<bCoin)?-1:((aCoin>bCoin)?1:0));});},sortByCircSupply:function(sortOrder){var items=$('.coin-list').find('div.row').detach();return items.sort(function(a,b){var aCoin=parseInt($(a).find('.circulating-supply').get(0).innerText.trim().split(' ')[0].replace(/,/g,''));var bCoin=parseInt($(b).find('.circulating-supply').get(0).innerText.trim().split(' ')[0].replace(/,/g,''));return sortOrder==='sort-desc'?((aCoin>bCoin)?-1:((aCoin<bCoin)?1:0)):((aCoin<bCoin)?-1:((aCoin>bCoin)?1:0));});},sortByChange:function(sortOrder,htmlClass){var items=$('.coin-list').find('div.row').detach();return items.sort(function(a,b){var aCoinText=$(a).find(htmlClass).get(0).innerText.trim().split('%')[0];var bCoinText=$(b).find(htmlClass).get(0).innerText.trim().split('%')[0];if(aCoinText.indexOf('+')===0&&bCoinText.indexOf('-')===0){return sortOrder==='sort-desc'?-1:1;}else if(aCoinText.indexOf('-')===0&&bCoinText.indexOf('+')===0){return sortOrder==='sort-desc'?1:-1;}
var aCoin=parseFloat(aCoinText.substring(1));var bCoin=parseFloat(bCoinText.substring(1));if(aCoinText.indexOf('+')){return sortOrder==='sort-desc'?((aCoin<bCoin)?-1:((aCoin>bCoin)?1:0)):((aCoin>bCoin)?-1:((aCoin<bCoin)?1:0));}else{return sortOrder==='sort-desc'?((aCoin>bCoin)?-1:((aCoin<bCoin)?1:0)):((aCoin<bCoin)?-1:((aCoin>bCoin)?1:0));}});},sortByTimeUntil:function(sortOrder){var items=$('.coin-list:not(.upcoming-pre-icos)').find('div.row').detach();return items.sort(function(a,b){var aCoin=parseInt($(a).find('.time-remaining').get(0).innerText.trim().split(' ')[0].replace(/,/g,''));var bCoin=parseInt($(b).find('.time-remaining').get(0).innerText.trim().split(' ')[0].replace(/,/g,''));return sortOrder==='sort-desc'?((aCoin>bCoin)?-1:((aCoin<bCoin)?1:0)):((aCoin<bCoin)?-1:((aCoin>bCoin)?1:0));});},sortByPreTimeUntil:function(sortOrder){var items=$('.upcoming-pre-icos').find('div.row').detach();return items.sort(function(a,b){var aCoin=parseInt($(a).find('.time-remaining').get(0).innerText.trim().split(' ')[0].replace(/,/g,''));var bCoin=parseInt($(b).find('.time-remaining').get(0).innerText.trim().split(' ')[0].replace(/,/g,''));return sortOrder==='sort-desc'?((aCoin>bCoin)?-1:((aCoin<bCoin)?1:0)):((aCoin<bCoin)?-1:((aCoin>bCoin)?1:0));});}};jQuery(document).ready(window.CRYPTO_SORTING.watchColumnClicks.bind(CRYPTO_SORTING));

!function(){"use strict";function e(e,t){var r,i=Object.keys(e);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(e),t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,r)),i}function t(t){for(var r=1;r<arguments.length;r++){var i=null!=arguments[r]?arguments[r]:{};r%2?e(Object(i),!0).forEach((function(e){n(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):e(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function r(e,t,r,i,n,s,o){try{var a=e[s](o),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(i,n)}function i(e){return function(){var t=this,i=arguments;return new Promise((function(n,s){var o=e.apply(t,i);function a(e){r(o,n,s,a,c,"next",e)}function c(e){r(o,n,s,a,c,"throw",e)}a(void 0)}))}}function n(e,t,r){return(t=function(e){return e=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);if("object"!=typeof(t=r.call(e,t||"default")))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string"),"symbol"==typeof e?e:String(e)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(){return(s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r,i=arguments[t];for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var i,n,s,o,a=[],c=!0,l=!1;try{if(s=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(i=s.call(r)).done)&&(a.push(i.value),a.length!==t);c=!0);}catch(e){l=!0,n=e}finally{try{if(!c&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(l)throw n}}return a}}(e,t)||a(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){if(e){if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(r="Object"===r&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function l(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=a(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var i=0;return{s:t=function(){},n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,s=!0,o=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){o=!0,n=e},f:function(){try{s||null==r.return||r.return()}finally{if(o)throw n}}}}class d{debug(){}info(){}warn(){}error(){}}const h=new d;class u extends d{constructor(e,t){super(),this._prefix=e,this._delegate=t}debug(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this._delegate.debug((new Date).toISOString(),this._prefix,...t)}info(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this._delegate.info((new Date).toISOString(),this._prefix,...t)}warn(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this._delegate.warn((new Date).toISOString(),this._prefix,...t)}error(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this._delegate.error((new Date).toISOString(),this._prefix,...t)}}const g="*",p=void 0;class v{constructor(e,t,r,i,s,o){var a=6<arguments.length&&void 0!==arguments[6]?arguments[6]:void 0;n(this,"_isId5Message",!0),n(this,"id",void 0),n(this,"timestamp",void 0),n(this,"type",void 0),n(this,"src",void 0),n(this,"dst",void 0),n(this,"request",void 0),n(this,"payload",void 0),this.id=i,this.timestamp=e,this.src=t,this.dst=r,this.type=o,this.request=a,this.payload=s}}class f{constructor(e){n(this,"_senderId",void 0),n(this,"_messageSeqNb",0),this._senderId=e,this._messageSeqNb=0}createBroadcastMessage(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:e.constructor.name;return new v(Date.now(),this._senderId,p,++this._messageSeqNb,e,t||e.constructor.name)}createResponse(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:t.constructor.name;return new v(Date.now(),this._senderId,e.src,++this._messageSeqNb,t,r||t.constructor.name,e)}createUnicastMessage(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:t.constructor.name;return new v(Date.now(),this._senderId,e,++this._messageSeqNb,t,r||t.constructor.name)}}class _{constructor(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:void 0;n(this,"instance",void 0),n(this,"instanceState",void 0),n(this,"isResponse",void 0),this.instance=e,this.instanceState=r,this.isResponse=t}}n(_,"TYPE","HelloMessage");const m=Object.freeze({LEADER:"leader",FOLLOWER:"follower",STORAGE:"storage"});class y{constructor(e,t,r){n(this,"target",void 0),n(this,"methodName",void 0),n(this,"methodArguments",void 0),this.target=e,this.methodName=t,this.methodArguments=r}}n(y,"TYPE","RemoteMethodCallMessage");class w{constructor(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:h;n(this,"_targets",{}),n(this,"_log",void 0),this._log=e}registerTarget(e,t){return this._targets[e]=t,this}_handle(e){const t=this._targets[e.target];if(t)try{t[e.methodName](...e.methodArguments)}catch(t){this._log.error("Error while handling method call ",e,t)}}}class I{constructor(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:h,i=3<arguments.length?arguments[3]:void 0;n(this,"_id",void 0),n(this,"_messageFactory",void 0),n(this,"_log",void 0),n(this,"_metrics",void 0),n(this,"_onMessageCallBackFunction",void 0),this._id=e,this._messageFactory=new f(this._id),this._log=r,this._window=t,this._handlers={},this._metrics=i,this._register()}_register(){const e=this;e._abortController="undefined"!=typeof AbortController?new AbortController:void 0;var t=null===(t=e._abortController)||void 0===t?void 0:t.signal;e._window.addEventListener("message",(t=>{let r=t.data;if(void 0!==t.data&&t.data._isId5Message&&t.data.src!==e._id&&(void 0===t.data.dst||t.data.dst===e._id))try{[g,r.type].forEach((i=>{let n=e._handlers[i];n&&n.forEach((e=>e(r,t.source)))}))}catch(t){e._log.error("Error while handling message",r,t)}}),{capture:!1,signal:t})}unregister(){this._abortController&&this._abortController.abort()}onAnyMessage(e){return this.onMessage(g,e)}onMessage(e,t){const r=this._handlers[e];return r?r.push(t):this._handlers[e]=[t],this}broadcastMessage(e,t){this._log.debug("Broadcasting message",t,e),this._postMessage(this._messageFactory.createBroadcastMessage(e,t))}sendResponseMessage(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:t.constructor.name;this._log.debug("Sending response message",e,r,t),this._postMessage(this._messageFactory.createResponse(e,t,r))}unicastMessage(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:t.constructor.name;this._log.debug("Sending message to",e,r,t),this._postMessage(this._messageFactory.createUnicastMessage(e,t,r))}_postToWindow(e,t){try{e.postMessage(t,"*")}catch(e){this._log.error("Could not post message to window",e)}}_postMessage(e){let t=this;!function r(i){try{t._postToWindow(i,e);var n=i.frames;if(n)for(let e=0;e<n.length;e++)r(n[e])}catch(i){t._log.error("Could not broadcast message",i)}}(t._window.top)}callProxyMethod(e,t,r,i){this._log.info("Calling ProxyMethodCall",{target:t,name:r,args:i}),this.unicastMessage(e,new y(t,r,i),y.TYPE)}onProxyMethodCall(e){return this.onMessage(y.TYPE,(t=>void 0===t.dst?(this._countInvalidMessage(t,"no-destination-proxy"),void this._log.error("Received invalid RemoteMethodCallMessage message",JSON.stringify(t),"Ignoring it....")):void e._handle(s(new y,t.payload))))}_countInvalidMessage(e,t){var r,i=e=>null!=e;void 0!==(null===(r=this._metrics)||void 0===r?void 0:r.instanceInvalidMsgCounter)&&this._metrics.instanceInvalidMsgCounter({reason:t,hasDestination:i(e.dst),hasSource:i(e.src),hasPayload:i(e.payload),hasRequest:i(e.request),hasTimestamp:i(e.timestamp)}).inc()}}function S(e,t){var r="^\\d+(\\.\\d+(\\.\\d+){0,1}){0,1}$";if(e.match(r)&&t.match(r)){var i=e.split("."),n=t.split(".");r=e=>parseInt(e)||0,e=(e,t)=>0==(t=e-t)?0:t<0?-1:1;return 0!==(t=e(r(i[0]),r(n[0])))?t:0===(t=e(r(i[1]),r(n[1])))?e(r(i[2]),r(n[2])):t}}const C="Array",b="String",D="Function",T=Object.prototype.toString;function E(e,t){return T.call(e)==="[object "+t+"]"}function A(e){return E(e,D)}function P(e){return E(e,b)}function O(e){return E(e,C)}function x(e){return E(e,"Number")}function R(e){return E(e,"Object")}function U(e){return void 0!==e}function k(e,t){if(!function(e){if(!e)return 1;if(O(e)||P(e))return!(0<e.length);for(var t in e)if(hasOwnProperty.call(e,t))return;return 1}(e)){if(A(e.forEach))return e.forEach(t,this);let i=0;var r=e.length;if(0<r)for(;i<r;i++)t(e[i],i,e);else for(i in e)hasOwnProperty.call(e,i)&&t.call(this,e[i],i)}}function N(e,t){let r=document.createElement("a");return t&&"noDecodeWholeURL"in t&&t.noDecodeWholeURL?r.href=e:r.href=decodeURIComponent(e),t=t&&"decodeSearchAsString"in t&&t.decodeSearchAsString,{href:r.href,protocol:(r.protocol||"").replace(/:$/,""),hostname:r.hostname,port:+r.port,pathname:r.pathname.replace(/^(?!\/)/,"/"),search:t?r.search:(t=r.search||"")?t.replace(/^\?/,"").split("&").reduce(((e,t)=>{let r=o(t.split("="),2),i=r[0],n=r[1];return/\[\]$/.test(i)?(i=i.replace("[]",""),e[i]=e[i]||[],e[i].push(n)):e[i]=n||"",e}),{}):{},hash:(r.hash||"").replace(/^#/,""),host:r.host||window.location.host}}function L(e,t){function r(e,t){if(A(Math.imul))return Math.imul(e,t);var r=(4194303&e)*(t|=0);return 4290772992&e&&(r+=(4290772992&e)*t|0),0|r}let i=3735928559^(t=1<arguments.length&&void 0!==t?t:0),n=1103547991^t;for(let t,s=0;s<e.length;s++)t=e.charCodeAt(s),i=r(i^t,2654435761),n=r(n^t,1597334677);return i=r(i^i>>>16,2246822507)^r(n^n>>>13,3266489909),n=r(n^n>>>16,2246822507)^r(i^i>>>13,3266489909),(4294967296*(2097151&n)+(i>>>0)).toString()}const F=Object.freeze({cmp:"cmp",partner:"partner",prebid:"prebid"}),M=["localStoragePurposeConsent","ccpaString"],V=Object.freeze({NONE:"none",TCF_V1:"TCFv1",TCF_V2:"TCFv2",USP_V1:"USPv1",ID5_ALLOWED_VENDORS:"ID5",PREBID:"PBJS",GPP_V1_0:"GPPv1.0",GPP_V1_1:"GPPv1.1"});class j{constructor(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:void 0,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:void 0,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:void 0,i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:void 0,s=4<arguments.length&&void 0!==arguments[4]?arguments[4]:void 0;n(this,"version",void 0),n(this,"localStoragePurposeConsent",void 0),n(this,"applicableSections",void 0),n(this,"gppString",void 0),n(this,"vendorsConsentForId5Granted",void 0),this.version=e,this.localStoragePurposeConsent=t,this.applicableSections=i,this.gppString=s,this.vendorsConsentForId5Granted=r}isGranted(){return!this.applicableSections.includes(2)||!0===this.localStoragePurposeConsent&&!1!==this.vendorsConsentForId5Granted}}class G{constructor(){n(this,"apiTypes",void 0),n(this,"gdprApplies",void 0),n(this,"consentString",void 0),n(this,"localStoragePurposeConsent",void 0),n(this,"allowedVendors",void 0),n(this,"ccpaString",void 0),n(this,"forcedGrantByConfig",void 0),n(this,"gppData",void 0),n(this,"source",void 0),n(this,"vendorsConsentForId5Granted",void 0),this.apiTypes=[],this.gdprApplies=!1,this.consentString=void 0,this.localStoragePurposeConsent=!1,this.ccpaString=void 0,this.allowedVendors=void 0,this.forcedGrantByConfig=!1,this.gppData=void 0}localStorageGrant(){return!0===this.forcedGrantByConfig?new q(!0,W.FORCE_ALLOWED_BY_CONFIG):0===this.apiTypes.length?new q(!0,W.PROVISIONAL):this._getLocalStorageGrantFromApi()}_getLocalStorageGrantFromApi(){const e=this.apiTypes,t={};var r={};e.includes(V.TCF_V1)&&(t[V.TCF_V1]=this._isGranted(),this._addToDebugInfo(V.TCF_V1,this,r)),e.includes(V.TCF_V2)&&(t[V.TCF_V2]=this._isGranted(),this._addToDebugInfo(V.TCF_V2,this,r)),e.includes(V.ID5_ALLOWED_VENDORS)&&(t[V.ID5_ALLOWED_VENDORS]=this.allowedVendors.includes("131")),e.includes(V.USP_V1)&&(t[V.USP_V1]=!0),e.includes(V.GPP_V1_0)&&(t[V.GPP_V1_0]=this.gppData.isGranted(),this._addToDebugInfo(V.GPP_V1_0,this.gppData,r)),e.includes(V.GPP_V1_1)&&(t[V.GPP_V1_1]=this.gppData.isGranted(),this._addToDebugInfo(V.GPP_V1_1,this.gppData,r));var i=Object.keys(t).map((e=>t[e])).reduce(((e,t)=>e&&t),!0);return new q(i,W.CONSENT_API,t,r)}_addToDebugInfo(e,t,r){return void 0!==t.localStoragePurposeConsent&&(r[e+"-localStoragePurposeConsent"]=t.localStoragePurposeConsent),void 0!==t.vendorsConsentForId5Granted&&(r[e+"-vendorsConsentForId5Granted"]=t.vendorsConsentForId5Granted),r}_isGranted(){return!1===this.gdprApplies||!0===this.localStoragePurposeConsent&&!1!==this.vendorsConsentForId5Granted}hashCode(){this.localStoragePurposeConsent,this.ccpaString;var e=function(e,t){if(null==e)return{};var r,i=function(e,t){if(null==e)return{};for(var r,i={},n=Object.keys(e),s=0;s<n.length;s++)r=n[s],0<=t.indexOf(r)||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols)for(var n=Object.getOwnPropertySymbols(e),s=0;s<n.length;s++)r=n[s],0<=t.indexOf(r)||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r]);return i}(this,M);return L(JSON.stringify(e))}static createFrom(e){const t=s(new G,e);return U(t.api)&&(t.apiTypes=function(e){var t=e.api;if(t===V.NONE)return[];if(t!==V.PREBID)return[t];{const t=[];return(U(e.gdprApplies)||U(e.consentString))&&t.push(V.TCF_V2),U(e.ccpaString)&&t.push(V.USP_V1),U(e.gppData)&&U(e.gppData.version)&&t.push(e.gppData.version),t}}(e),t.api=void 0),R(t.gppData)&&(t.gppData=s(new j,t.gppData)),t}getApiTypeData(e){if(this.apiTypes.includes(e)){if(e===V.USP_V1)return{ccpaString:this.ccpaString};if(e===V.TCF_V2)return{consentString:this.consentString,gdprApplies:this.gdprApplies,localStoragePurposeConsent:this.localStoragePurposeConsent};if(e===V.GPP_V1_1||e===V.GPP_V1_0)return this.gppData;if(e===V.ID5_ALLOWED_VENDORS)return{allowedVendors:this.allowedVendors}}}}const W=Object.freeze({FORCE_ALLOWED_BY_CONFIG:"force_allowed_by_config",ID5_CONSENT:"id5_consent",PROVISIONAL:"provisional",JURISDICTION:"jurisdiction",CONSENT_API:"consent_api"});class q{constructor(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};n(this,"allowed",!1),n(this,"grantType",W.NONE),n(this,"api",{}),n(this,"_debugInfo",{}),this.allowed=e,this.grantType=t,this.api=r,this._debugInfo=i}isDefinitivelyAllowed(){return this.allowed&&this.grantType!==W.PROVISIONAL}}var B=Object.freeze({STORAGE_CONFIG:{ID5:{name:"id5id",expiresDays:90},ID5_V2:{name:"id5id_v2",expiresDays:15},LAST:{name:"id5id_last",expiresDays:90},CONSENT_DATA:{name:"id5id_cached_consent_data",expiresDays:30},PRIVACY:{name:"id5id_privacy",expiresDays:30},EXTENSIONS:{name:"id5id_extensions",expiresDays:8/24}},LEGACY_COOKIE_NAMES:["id5.1st","id5id.1st"],PRIVACY:{JURISDICTIONS:{gdpr:!0,ccpa:!1,lgpd:!0,other:!1}},ID5_EIDS_SOURCE:"id5-sync.com"});class H{constructor(e,t){this.name=e,this.expiresDays=t}withNameSuffixed(){let e=this.name;for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var n=0,s=r;n<s.length;n++){var o=s[n];e+="_".concat(o)}return new H(e,this.expiresDays)}}class J{constructor(){let e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:void 0;function t(t){var r=void 0!==e?Math.max(1,e):t.expiresDays;return new H(t.name,r)}var r=B.STORAGE_CONFIG;this.ID5=t(r.ID5),this.ID5_V2=t(r.ID5_V2),this.LAST=t(r.LAST),this.CONSENT_DATA=t(r.CONSENT_DATA),this.PRIVACY=t(r.PRIVACY),this.EXTENSIONS=new H(r.EXTENSIONS.name,r.EXTENSIONS.expiresDays)}}n(J,"DEFAULT",new J);class z{constructor(e,t){n(this,"_clientStore",void 0),n(this,"_trueLinkAdapter",void 0),this._clientStore=e,this._trueLinkAdapter=t}hasConsentChanged(e){return e&&!this._clientStore.storedConsentDataMatchesConsentData(e)}storeConsent(e){this._clientStore.putHashedConsentData(e)}incNb(e){this._clientStore.incNbV2(e,1<arguments.length&&void 0!==arguments[1]?arguments[1]:1)}updateNbs(e){var t,r=l(e);try{for(r.s();!(t=r.n()).done;){var i=o(t.value,2),n=i[0],s=i[1],a=null==s?void 0:s.nb;0<a&&this.incNb(n,-a)}}catch(e){r.e(e)}finally{r.f()}}storeResponse(e,t){this._clientStore.putResponseV1(t.getGenericResponse()),this._clientStore.setResponseDateTimeV1(new Date(t.timestamp).toUTCString());const r=new Set;e.forEach((e=>{var i=e.cacheId;r.has(i)||(e=t.getResponseFor(e.integrationId))&&(this._clientStore.storeResponseV2(i,e,t.timestamp),r.add(i))})),this._trueLinkAdapter.setPrivacy(null===(e=t.getGenericResponse())||void 0===e?void 0:e.privacy)}clearAll(e){this._clientStore.clearResponse(),this._clientStore.clearDateTime(),e.forEach((e=>{e=e.cacheId,this._clientStore.clearResponseV2(e)})),this._clientStore.clearHashedConsentData(),this._trueLinkAdapter.clearPrivacy(),this._clientStore.clearExtensions()}getCachedResponse(e){if(e=this._clientStore.getStoredResponseV2(e))return new K(e.response,e.responseTimestamp,e.nb)}getCachedExtensions(){return this._clientStore.getExtensions()}storeExtensions(e){var t=x(e.ttl)?e.ttl/86400:J.DEFAULT.EXTENSIONS.expiresDays;t=new H(J.DEFAULT.EXTENSIONS.name,t);return this._clientStore.storeExtensions(e,t)}}class K{constructor(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;n(this,"response",void 0),n(this,"timestamp",void 0),n(this,"nb",void 0),this.response=e,this.timestamp=t,this.nb=r}isExpired(){var e=this.getMaxAge();return!(x(e)&&0<e)||this._isOlderThanSec(e)}_isOlderThanSec(e){return this.timestamp<=0||this.getAgeSec()>e}isStale(){return!this.timestamp||this._isOlderThanSec(1209600)}isResponseComplete(){return R(this.response)&&P(this.response.universal_uid)&&P(this.response.signature)}isValid(){return this.isResponseComplete()&&!this.isStale()}getMaxAge(){var e,t;return null===(e=this.response)||void 0===e||null===(t=e.cache_control)||void 0===t?void 0:t.max_age_sec}getAgeSec(){return(Date.now()-this.timestamp)/1e3|0}}const X="_exp";class Y{constructor(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:h;n(this,"storage",void 0),n(this,"_log",void 0),this.storage=e,this._log=t}getItem(e){try{return this.storage.getItem(e)}catch(e){}}setItem(e,t){try{this.storage.setItem(e,t)}catch(e){}}removeItem(e){try{this.storage.removeItem(e)}catch(e){}}removeExpiredObjectWithPrefix(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];this._log.info("Check, prefix",e);try{var r=this.storage.getKeysWithPrefix(e);let c=0;var i,n=l(r);try{for(n.s();!(i=n.n()).done;){var s,o,a=i.value;t?(this._log.info("Found",a," remove it"),this.removeItem(a)):(o=null==(s=this.getObjectWithExpiration({name:a}))?void 0:s.expireAt)&&o<Date.now()&&(this._log.info("Found expired object",a,"expiration time",o,"It will be removed"),this.removeItem(a),c+=1)}}catch(e){n.e(e)}finally{n.f()}return{all:r.length,expired:c}}catch(e){}}getItemWithExpiration(e){var t=e.name;return!(e=this.getItem(t+X))||new Date(e).getTime()-Date.now()<=0?(this.removeItemWithExpiration({name:t}),null):this.getItem(t)}setItemWithExpiration(e,t){var r=e.name;e=e.expiresDays,e=Date.now()+864e5*e,e=new Date(e).toUTCString();this.setItem(r+X,e),this.setItem(r,t)}removeItemWithExpiration(e){e=e.name,this.removeItem(e),this.removeItem(e+X)}setObjectWithExpiration(e,t){var r=e.name;e=e.expiresDays,e=Date.now()+864e5*e;this.setItem(r,JSON.stringify({data:t,expireAt:e}))}getObjectWithExpiration(e){e=e.name;try{var t=JSON.parse(this.getItem(e));if(null!=t&&t.expireAt&&0<t.expireAt-Date.now())return t.data;null!=t&&t.expireAt&&this.removeItem(e)}catch(t){this._log.error("Error while getting ",e,"object from storage",t)}}updateObjectWithExpiration(e,t){var r=e.name;e=e.expiresDays;try{var i=t(this.getObjectWithExpiration({name:r}));return this.setObjectWithExpiration({name:r,expiresDays:e},i),i}catch(e){this._log.error("Error while updating object with ",r,e)}}}class Z{getItem(){}removeItem(){}setItem(){}getKeysWithPrefix(){return[]}}const Q=new Z;class $ extends Z{constructor(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];super(),n(this,"_writingEnabled",void 0),n(this,"_underlying",void 0),this._writingEnabled=t;try{this._underlying=e.localStorage}catch(e){}}getItem(e){try{return this._underlying.getItem(e)}catch(e){}}removeItem(e){try{this._underlying.removeItem(e)}catch(e){}}setItem(e,t){try{this._writingEnabled&&this._underlying.setItem(e,t)}catch(e){}}getKeysWithPrefix(e){try{var t=this._underlying.length;if(this._writingEnabled){const r=[];for(let i=0;i<t;i++){const t=this._underlying.key(i);t&&t.startsWith(e)&&r.push(t)}return r}}catch(e){}}static checkIfAccessible(){var e="__id5test";try{return window.localStorage.setItem(e,e),window.localStorage.removeItem(e),!0}catch(e){return!1}}}class ee{constructor(e){n(this,"_replicas",[]),n(this,"_lastKeyOperation",{}),n(this,"_primaryStorage",void 0),this._primaryStorage=e}getItem(e){return this._primaryStorage.getItem(e)}removeItem(e){this._primaryStorage.removeItem(e);var t=t=>{t.removeItem(e)};this._replicas.forEach(t),this._lastKeyOperation[e]=t}setItem(e,t){this._primaryStorage.setItem(e,t);var r=r=>{r.setItem(e,t)};this._replicas.forEach(r),this._lastKeyOperation[e]=r}addReplica(e){Object.values(this._lastKeyOperation).forEach((t=>t(e))),this._replicas.push(e)}getKeysWithPrefix(e){return this._primaryStorage.getKeysWithPrefix(e)}}const te="undefined"!=typeof Promise&&"undefined"!=typeof fetch;class re{constructor(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:void 0;this.url=e||"https://diagnostics.id5-sync.com/measurements",this._metadata=t}publish(e){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:void 0;return e&&0<e.length?(e.forEach((e=>function(e){Object.keys(e).forEach((function(t){var r=e[t];r&&(e[t]=r instanceof Object?JSON.stringify(r):"".concat(r))}))}(e.tags))),fetch(this.url,{method:"POST",headers:{"Content-Type":"text/plain"},mode:"no-cors",body:JSON.stringify({metadata:t(t({},this._metadata),r),measurements:e})})):Promise.resolve()}}const ie=Object.freeze({});var ne,se=function(e){return e?e instanceof Map?Object.fromEntries(e):e:ie},oe=function(e){return Array.from(Object.entries(e),(e=>{e=(t=o(e,2))[0];var t=t[1];return"".concat(e,"=").concat(t)})).sort().toString()};const ae=Object.freeze({TIMER:"TIMER",SUMMARY:"SUMMARY",COUNTER:"COUNTER"});class ce{constructor(e,t,r){n(this,"name",void 0),n(this,"tags",void 0),n(this,"values",void 0),this.name=e,this.tags=se(t),this.type=r,this.values=[]}reset(){this.values=[]}}class le extends ce{constructor(e){super(e,1<arguments.length&&void 0!==arguments[1]?arguments[1]:void 0,ae.TIMER)}startMeasurement(){try{return new de(this)}catch(e){return}}record(e){try{isNaN(e)||this.values.push({value:e,timestamp:Date.now()})}catch(e){}}recordNow(){try{var e;this.record(0|(null===(e=performance)||void 0===e?void 0:e.now()))}catch(e){}}}class de{constructor(){this.timer=0<arguments.length&&void 0!==arguments[0]?arguments[0]:void 0,this.startTime=performance.now()}record(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:void 0;try{var t=performance.now()-this.startTime|0;let r=e||this.timer;return r&&r.record(t),t}catch(e){return}}}class he extends ce{constructor(e){super(e,1<arguments.length&&void 0!==arguments[1]?arguments[1]:void 0,ae.COUNTER)}inc(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;try{return 0===this.values.length?this.values.push({value:e,timestamp:Date.now()}):(this.values[0].value+=e,this.values[0].timestamp=Date.now()),this.values[0].value}catch(e){}}}class ue extends ce{constructor(e){super(e,1<arguments.length&&void 0!==arguments[1]?arguments[1]:void 0,ae.SUMMARY)}record(e){try{this.values.push({value:e,timestamp:Date.now()})}catch(e){}}}class ge{has(e){return void 0!==this[e]}set(e,t){return this[e]=t,this}get(e){return this[e]}values(){return Object.entries(this).map((e=>o(e,2)[1]))}}function pe(){return new de}function ve(e){return{partner:e}}class fe extends class{constructor(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:void 0,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:void 0;n(this,"_registry",void 0),n(this,"commonTags",void 0),n(this,"_scheduled",void 0),this._registry=new ge,this.commonTags=se(e),this.commonPrefix=t}getOrCreate(e,r,i){var n=t(t({},r),this.commonTags);r=this.commonPrefix?this.commonPrefix+"."+e:e,e="".concat(r,"[").concat(oe(n),"]");return this._registry.has(e)||this._registry.set(e,i(r,n)),this._registry.get(e)}getAllMeasurements(){return this._registry.values().map((e=>({name:e.name,type:e.type,tags:e.tags,values:e.values}))).filter((function(e){return e.values&&0<e.values.length}))}reset(){Array.from(this._registry.values()).forEach((e=>e.reset()))}addCommonTags(e){this.commonTags=t(t({},this.commonTags),se(e))}timer(e){return this.getOrCreate(e,1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},((e,t)=>new le(e,t)))}counter(e){return this.getOrCreate(e,1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},((e,t)=>new he(e,t)))}summary(e){return this.getOrCreate(e,1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},((e,t)=>new ue(e,t)))}publish(){let e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:e=>e,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:void 0;return Promise.resolve(this.getAllMeasurements()).then((r=>e(r,t))).then((()=>this.reset()))}schedulePublishAfterMsec(e,t){if(!this._scheduled){let r=this;setTimeout((()=>(r._scheduled=!1,r.publish(t,{trigger:"fixed-time",fixed_time_msec:e}))),e),this._scheduled=!0}return this}schedulePublishBeforeUnload(e){const t=this,r="undefined"!=typeof AbortController?new AbortController:void 0;return r&&(r.publisher=e,addEventListener("beforeunload",(()=>t.publish(e,{trigger:"beforeunload"})),{capture:!1,signal:r.signal}),this._onUnloadPublishAbortController=r),this}unregister(){const e=this._onUnloadPublishAbortController;if(e)return e.abort(),this.publish(e.publisher,{trigger:"unregister"})}}{constructor(e,r){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:void 0;super(t(t({source:e,version:r},ve(2<arguments.length&&void 0!==arguments[2]?arguments[2]:void 0)),i),"id5.api")}loadDelayTimer(){return this.timer("instance.load.delay",0<arguments.length&&void 0!==arguments[0]?arguments[0]:{})}fetchCallTimer(e){return this.timer("fetch.call.time",t({status:e},1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}))}fetchFailureCallTimer(){return this.fetchCallTimer("fail",0<arguments.length&&void 0!==arguments[0]?arguments[0]:{})}fetchSuccessfulCallTimer(){return this.fetchCallTimer("success",0<arguments.length&&void 0!==arguments[0]?arguments[0]:{})}extensionsCallTimer(e,r){return this.timer("extensions.call.time",t({extensionType:e,status:r?"success":"fail"},2<arguments.length&&void 0!==arguments[2]?arguments[2]:{}))}consentRequestTimer(e){return this.timer("consent.request.time",t({requestType:e},1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}))}invocationCountSummary(){return this.summary("invocation.count",0<arguments.length&&void 0!==arguments[0]?arguments[0]:{})}instanceCounter(e){return this.counter("instance.count",t({instanceId:e},1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}))}instanceUniqueDomainsCounter(e){return this.counter("instance.domains.count",t({instanceId:e},1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}))}instanceUniqWindowsCounter(e){return this.counter("instance.windows.count",t({instanceId:e},1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}))}instanceUniqPartnersCounter(e){return this.counter("instance.partners.count",t({instanceId:e},1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}))}instanceJoinDelayTimer(){return this.timer("instance.join.delay.time",0<arguments.length&&void 0!==arguments[0]?arguments[0]:{})}instanceLateJoinCounter(e){return this.counter("instance.lateJoin.count",t({instanceId:e},1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}))}instanceLateJoinDelayTimer(){return this.timer("instance.lateJoin.delay",t({},0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}))}instanceLastJoinDelayTimer(){return this.timer("instance.lastJoin.delay",t({},0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}))}instanceMsgDeliveryTimer(){return this.timer("instance.message.delivery.time",0<arguments.length&&void 0!==arguments[0]?arguments[0]:{})}instanceInvalidMsgCounter(){return this.counter("instance.message.invalid.count",0<arguments.length&&void 0!==arguments[0]?arguments[0]:{})}userIdProvisioningDelayTimer(e){return this.timer("userid.provisioning.delay",t({cachedResponseUsed:e},1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}))}userIdNotificationDeliveryDelayTimer(){return this.timer("userid.provisioning.delivery.delay",t({},0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}))}userIdProvisioningDuplicateTimer(){return this.timer("userid.provisioning.duplicate",t({},0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}))}cachedUserIdAge(){return this.summary("userid.cached.age",t({},0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}))}consentChangeCounter(){return this.counter("leader.consent.change.count",0<arguments.length&&void 0!==arguments[0]?arguments[0]:{})}consentIgnoreCounter(){return this.counter("leader.consent.ignore.count",0<arguments.length&&void 0!==arguments[0]?arguments[0]:{})}storageAllKeysCounter(){return this.summary("storage.keys.all.count",0<arguments.length&&void 0!==arguments[0]?arguments[0]:{})}storageExpiredKeysCounter(){return this.summary("storage.keys.expired.count",0<arguments.length&&void 0!==arguments[0]?arguments[0]:{})}instanceSurvivalTime(){return this.timer("instance.survival.time",0<arguments.length&&void 0!==arguments[0]?arguments[0]:{})}localStorageGrantCounter(){return this.counter("consent.lsg.count",0<arguments.length&&void 0!==arguments[0]?arguments[0]:{})}consentDiscrepancyCounter(){return this.counter("consent.discrepancy.count",0<arguments.length&&void 0!==arguments[0]?arguments[0]:{})}refreshCallCounter(e){return this.counter("refresh.call.count",t({target:e},1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}))}}class _e{constructor(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:Date.now();n(this,"timestamp",void 0),n(this,"response",void 0),this.response=e,this.timestamp=t}getGenericResponse(){return this.response.generic}getResponseFor(e){var r,i;if(null!==(r=this.response)&&void 0!==r&&r.responses&&null!==(i=this.response)&&void 0!==i&&i.responses[e])return t(t({},this.response.generic),this.response.responses[e])}}class me{constructor(e,t,r){n(this,"_extensionsProvider",void 0),n(this,"_metrics",void 0),n(this,"_log",void 0),this._extensionsProvider=r,this._metrics=e,this._log=t}fetchId(e,t,r){return this._extensionsProvider.gather(e).then((i=>{const n=e.map((e=>{const n=e.cacheData;var s=null==n||null===(a=n.response)||void 0===a?void 0:a.signature,o=null==n?void 0:n.nb,a=null==n?void 0:n.getMaxAge();return this._createRequest(t,e,s,o,a,i,r)})),o=this._log,a=this._metrics,c=this;return new Promise(((e,t)=>{const r=pe();var i="".concat("https://id5-sync.com").concat("/gm/v3");o.info("Fetching ID5 ID from:",i,n),function(e,t,r,i,n){i=3<arguments.length&&void 0!==i?i:{};let o=4<arguments.length&&void 0!==n?n:h;try{let n;var a,c=i.method||(r?"POST":"GET");document.createElement("a").href=e;let l="object"==typeof t&&null!==t?t:{success:function(){o.info("ajax","xhr success")},error:function(e){o.error("ajax","xhr error",null,e)}};"function"==typeof t&&(l.success=t),n=new window.XMLHttpRequest,n.onreadystatechange=function(){var e;4===n.readyState&&(200<=(e=n.status)&&e<300||304===e?l.success(n.responseText,n):l.error(n.statusText,n))},n.ontimeout=function(){o.error("ajax","xhr timeout after ",n.timeout,"ms")},"GET"===c&&r&&(s((a=N(e,i)).search,r),e=function(e){return(e.protocol||"http")+"://"+(e.host||e.hostname+(e.port?":".concat(e.port):""))+(e.pathname||"")+(e.search?"?".concat((t=e.search||"",Object.keys(t).map((e=>Array.isArray(t[e])?t[e].map((t=>"".concat(e,"[]=").concat(t))).join("&"):"".concat(e,"=").concat(t[e]))).join("&"))):"")+(e.hash?"#".concat(e.hash):"");var t}(a)),n.open(c,e,!0),i.withCredentials&&(n.withCredentials=!0),k(i.customHeaders,((e,t)=>{n.setRequestHeader(t,e)})),i.preflight&&n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.setRequestHeader("Content-Type",i.contentType||"text/plain"),"POST"===c&&r?n.send(r):n.send()}catch(n){o.error("ajax","xhr construction",n)}}(i,{success:function(i){o.info("Success at fetch call:",i),r.record(null==a?void 0:a.fetchSuccessfulCallTimer());try{e(new _e(c._validateResponse(i)))}catch(i){t(i)}},error:function(e){r.record(null==a?void 0:a.fetchFailureCallTimer()),t(e)}},JSON.stringify({requests:n}),{method:"POST",withCredentials:!0},o)}))}))}_validateResponse(e){if(!e||!P(e)||e.length<1)throw new Error('Empty fetch response from ID5 servers: "'.concat(e,'"'));var t=JSON.parse(e);if(!R(t.generic))throw new Error("Server response failed to validate: ".concat(e));return this._log.info("Valid json response from ID5 received",t),t}_createRequest(e,t,r,i,n,s,a){this._log.info("Create request data for",{fetchIdData:t,consentData:e,signature:r,nbValue:i,refreshInSecondUsed:n,extensions:s});var c=t.partnerId;const l={requestId:t.integrationId,requestCount:t.requestCount,role:t.role,cacheId:t.cacheId,refresh:t.refresh,source:t.source,sourceVersion:t.sourceVersion,partner:c,v:t.originVersion,o:t.origin,tml:null===(c=t.refererInfo)||void 0===c?void 0:c.topmostLocation,ref:null===(c=t.refererInfo)||void 0===c?void 0:c.ref,cu:null===(c=t.refererInfo)||void 0===c?void 0:c.canonicalUrl,u:(null===(c=t.refererInfo)||void 0===c?void 0:c.stack[0])||window.location.href,top:null!==(c=t.refererInfo)&&void 0!==c&&c.reachedTop?1:0,localStorage:!0===a?1:0,nbPage:i,id5cdn:t.isUsingCdn,ua:window.navigator.userAgent,att:t.att};return U(i=e.gdprApplies)&&(l.gdpr=i?1:0),U(i=e.consentString)&&(l.gdpr_consent=i),U(t.allowedVendors)?l.allowed_vendors=t.allowedVendors:U(e.allowedVendors)&&(l.allowed_vendors=e.allowedVendors),U(e.gppData)&&(l.gpp_string=e.gppData.gppString,l.gpp_sid=e.gppData.applicableSections.join(",")),U(r)&&(l.s=r),U(r=t.uaHints)&&(l.ua_hints=r),U(e.ccpaString)&&""!==e.ccpaString&&(l.us_privacy=e.ccpaString),function(e){var t=Object.keys(e);let r=t.length,i=new Array(r);for(;r--;)i[r]=[t[r],e[t[r]]];return i}({pd:"pd",partnerUserId:"puid",provider:"provider",segments:"segments",trueLink:"true_link"}).forEach((e=>{e=(r=o(e,2))[0];var r=r[1];U(t[e])&&(l[r]=t[e])})),(e=t.abTesting)&&!0===e.enabled&&(l.ab_testing={enabled:!0,control_group_pct:e.controlGroupPct}),(e=t.invalidSegmentsCount)&&0<e&&(l._invalid_segments=e),t.trace&&(l._trace=!0),l.provided_options={refresh_in_seconds:t.providedRefreshInSeconds},l.used_refresh_in_seconds=n,l.extensions=s,l}}const ye=Object.freeze({CONSENT_UPDATED:"consent_updated",USER_ID_READY:"user_id_ready",CASCADE_NEEDED:"fire_sync_pixel",USER_ID_FETCH_CANCELED:"user_id_fetch_canceled",USER_ID_FETCH_FAILED:"user_id_fetch_failed"}),we=Object.freeze({ID5_MESSAGE_RECEIVED:"message",ID5_INSTANCE_JOINED:"instance-joined",ID5_LEADER_ELECTED:"leader-elected"}),Ie=Object.freeze([...Object.values(we),...Object.values(ye)]);class Se{constructor(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:h;n(this,"_handlers",void 0),n(this,"_log",void 0),this._log=e,this._handlers={}}_dispatch(e){var t=this._handlers[e];if(t){for(var r=arguments.length,i=new Array(1<r?r-1:0),n=1;n<r;n++)i[n-1]=arguments[n];var s,o=l(t);try{for(o.s();!(s=o.n()).done;){const r=s.value;try{r(...i)}catch(t){this._log.error("Event ".concat(e," handler execution failed."),t)}}}catch(t){o.e(t)}finally{o.f()}}}emit(e){if(void 0!==e&&Ie.includes(e)){for(var t=arguments.length,r=new Array(1<t?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];this._dispatch(e,...r)}else this._log.warn("Unsupported event",e)}on(e,t){void 0!==e&&Ie.includes(e)?(this._handlers[e]||(this._handlers[e]=[]),this._handlers[e].push(t)):this._log.warn("Unsupported event",e)}}const Ce=Object.freeze({DIRECT_METHOD:"direct_method",POST_MESSAGE:"post_message"});class be{constructor(e,t,r){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:h;n(this,"_instanceProperties",void 0),n(this,"_log",void 0),n(this,"callType",void 0),n(this,"_instanceWindow",void 0),this._instanceWindow=t,this._instanceProperties=r,this._log=i,this.callType=e}getId(){return this._instanceProperties.id}getFetchIdData(){return this._instanceProperties.fetchIdData}updateFetchIdData(e){s(this._instanceProperties.fetchIdData,e)}getCacheId(){var e={partnerId:(e=this._instanceProperties.fetchIdData).partnerId,att:e.att,pd:e.pd,provider:e.provider,abTesting:e.abTesting,segments:JSON.stringify(e.segments),providedRefresh:e.providedRefreshInSeconds,trueLink:null===(e=e.trueLink)||void 0===e?void 0:e.id};return L(JSON.stringify(e))}getDeclaredConsentSource(){return this._instanceProperties.fetchIdData.consentSource||F.cmp}getSourceVersion(){return this._instanceProperties.sourceVersion}getSource(){return this._instanceProperties.source}notifyUidReady(){}notifyFetchUidCanceled(){}notifyCascadeNeeded(){}canDoCascade(){return!0===this._instanceProperties.canDoCascade}getStorage(){return Q}getWindow(){return this._instanceWindow}}class De extends be{constructor(e,t,r){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:h,s=4<arguments.length?arguments[4]:void 0;super(Ce.DIRECT_METHOD,e,t,i),n(this,"_dispatcher",void 0),n(this,"_provisionedUids",void 0),n(this,"_metrics",void 0),this._dispatcher=r,this._metrics=s,this._provisionedUids=new Map}notifyUidReady(e,t){var r,i=null==e||null===(r=e.responseObj)||void 0===r?void 0:r.universal_uid;i&&(this._provisionedUids.has(i)?(r=this._provisionedUids.get(i),this._metrics.userIdProvisioningDuplicateTimer({provisioner:t.provisioner,firstProvisioner:r.provisioner}).record(performance.now()-r.time)):(this._provisionedUids.set(i,{provisioner:t.provisioner,time:performance.now()}),this._dispatcher.emit(ye.USER_ID_READY,e,t)))}notifyFetchUidCanceled(e){this._dispatcher.emit(ye.USER_ID_FETCH_CANCELED,e)}notifyCascadeNeeded(e){this._dispatcher.emit(ye.CASCADE_NEEDED,e)}}class Te extends Z{constructor(e,t){super(),n(this,"_messenger",void 0),n(this,"_destinationId",void 0),this._messanger=e,this._destinationId=t}getItem(){}removeItem(e){this._remoteCall("removeItem",[e])}setItem(e,t){this._remoteCall("setItem",[e,t])}_remoteCall(e,t){this._messanger.callProxyMethod(this._destinationId,m.STORAGE,e,t)}}class Ee extends be{constructor(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:h;super(Ce.POST_MESSAGE,e.getWindow(),e.properties,r),n(this,"_messenger",void 0),this._messenger=t}_callProxy(e,t){this._messenger.callProxyMethod(this.getId(),m.FOLLOWER,e,t)}notifyUidReady(e,t){this._callProxy("notifyUidReady",[e,t])}notifyFetchUidCanceled(e){this._callProxy("notifyFetchUidCanceled",[e])}notifyCascadeNeeded(e){this._callProxy("notifyCascadeNeeded",[e])}getStorage(){return new Te(this._messenger,this.getId())}}class Ae{constructor(e,t,r,i){n(this,"_store",void 0),n(this,"_log",void 0),n(this,"_provisioner",void 0),n(this,"_meter",void 0),this._provisioner=e,this._store=t,this._log=r,this._meter=i}provisionFromCache(e){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:void 0;try{const o=this._log;var i=e.getCacheId();const a=this._store.getCachedResponse(i);var n,s=!a||!a.isValid()||a.isExpired();let c=!1;return a&&(n=a.getAgeSec(),this._meter.cachedUserIdAge({expired:a.isExpired(),valid:a.isValid(),provisioner:this._provisioner,maxAge:a.getMaxAge()}).record(isNaN(n)?0:n)),a&&a.isValid()?(o.info("Found valid cached response for instance ",JSON.stringify({id:e.getId(),cacheId:e.getCacheId(),provisioner:this._provisioner,responseFromCache:a})),e.notifyUidReady({timestamp:a.timestamp,responseObj:a.response,isFromCache:!0,willBeRefreshed:!!s},{timestamp:Date.now(),provisioner:this._provisioner,tags:t({callType:e.callType},r)}),c=!0):o.info("Couldn't find response for cacheId",e.getCacheId()),{cacheId:i,responseFromCache:a,refreshRequired:s,provisioned:c}}catch(e){return this._log.error("Cached UserId provisioning failure",e),{refreshRequired:!0,provisioned:!1}}}}class Pe{constructor(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];n(this,"lateJoiner",!1),n(this,"uniqueLateJoiner",!1),this.lateJoiner=e,this.uniqueLateJoiner=t}}class Oe{updateConsent(){}updateFetchIdData(){}refreshUid(){}addFollower(){}getProperties(){}}class xe extends Oe{constructor(e,t,r,i,s,o){var a=6<arguments.length&&void 0!==arguments[6]?arguments[6]:h,c=7<arguments.length?arguments[7]:void 0;super(),n(this,"_followers",void 0),n(this,"_followersRequests",{}),n(this,"_refreshRequired",{}),n(this,"_fetcher",void 0),n(this,"_log",void 0),n(this,"_consentManager",void 0),n(this,"_inProgressFetch",void 0),n(this,"_queuedRefreshArgs",void 0),n(this,"_lastConsentDataSet",void 0),n(this,"_metrics",void 0),n(this,"_leaderStorage",void 0),n(this,"_store",void 0),this._followers=[],this._fetcher=c,this._properties=t,this._consentManager=s,this._metrics=o,this._window=e,this._leaderStorage=r,this._log=a,this._store=i,this._firstFetchTriggered=!1,this._cachedIdProvider=new Ae("leader",this._store,this._log,this._metrics)}_handleRefreshResult(e,t,r,i){const n=this._log,s=this._consentManager,o=this._store;if(void 0!==i){var a;s.setStoredPrivacy(null===(a=i.getGenericResponse())||void 0===a?void 0:a.privacy);const v=s.localStorageGrant("fetcher-after-response");v.isDefinitivelyAllowed()?(n.info("Storing ID and request hashes in cache"),o.updateNbs(t),o.storeResponse(e,i)):(n.info("Cannot use local storage to cache ID",v),o.clearAll(e));var c,d=l(e);try{for(d.s();!(c=d.n()).done;){var h=c.value.integrationId;this._followersRequests[h]=(this._followersRequests[h]||0)+1}}catch(e){d.e(e)}finally{d.f()}const f=[];var u,g=l(this._followers);try{for(g.s();!(u=g.n()).done;){const e=u.value;var p=i.getResponseFor(e.getId());void 0!==p&&(this._log.debug("Notify uid ready.","Follower:",e.getId(),"Uid:",p),this._refreshRequired[e.getId()]=!1,this._notifyUidReady(e,{timestamp:i.timestamp,responseObj:p,isFromCache:!1}),!0===p.cascade_needed&&f.push(e.getId()))}}catch(e){g.e(e)}finally{g.f()}void 0!==r&&0<f.length&&this._consentManager.localStorageGrant("leader-before-cascade").isDefinitivelyAllowed()&&this._handleCascade(f,i,r)}}_notifyUidReady(e,t){var r={timestamp:Date.now(),provisioner:"leader",tags:{callType:e.callType}};e.notifyUidReady(t,r)}_handleCascade(e,t,r){var i,n=this._followers.filter((t=>void 0!==e.find((e=>t.getId()===e))&&t.canDoCascade())).sort(((e,t)=>{function r(e){var t;return(null===(e=e.getFetchIdData().refererInfo)||void 0===e||null===(t=e.stack)||void 0===t?void 0:t.length)||Number.MAX_SAFE_INTEGER}return r(e)-r(t)}));if(0<n.length){const e=n[0];e.notifyCascadeNeeded({partnerId:e.getFetchIdData().partnerId,userId:t.getResponseFor(e.getId()).universal_uid,gdprApplies:r.gdprApplies,consentString:r.consentString,gppString:null===(t=r.gppData)||void 0===t?void 0:t.gppString,gppSid:null===(r=r.gppData)||void 0===r||null===(i=r.applicableSections)||void 0===i?void 0:i.join(",")})}else this._log.error("Couldn't find cascade eligible follower")}_handleCancel(e){var t,r=l(this._followers);try{for(r.s();!(t=r.n()).done;){t.value.notifyFetchUidCanceled({reason:e})}}catch(e){r.e(e)}finally{r.f()}}_getId(){let e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];const r=this._log;this._waitForConsent().then((i=>{const n=this._consentManager.localStorageGrant("fetch-before-request");if(r.info("Local storage grant",n),n.allowed){var s=this._store.hasConsentChanged(i);n.isDefinitivelyAllowed()&&this._store.storeConsent(i);var o=$.checkIfAccessible();const a=new Map;let c=e;const l=this._followers.map((e=>{var r=e.getId(),i=(this._followersRequests[r]||0)+1,n=this._properties.id,s=!0===this._refreshRequired[e.getId()];c=c||s;var o,l=e.getCacheId();return a.has(l)||(o=this._store.getCachedResponse(l))&&a.set(l,o),t(t({},e.getFetchIdData()),{},{integrationId:r,requestCount:i,refresh:s,role:n===e.getId()?"leader":"follower",cacheId:l,cacheData:a.get(l),sourceVersion:e.getSourceVersion(),source:e.getSource()})}));s||c?(r.info("Decided to fetch a fresh ID5 ID",{consentHasChanged:s,shouldRefresh:c}),r.info("Fetching ID5 ID (forceFetch:".concat(e,")")),this._inProgressFetch=!0,this._firstFetchTriggered=!0,this._fetcher.fetchId(l,i,o).then((e=>{this._handleRefreshResult(l,a,i,e),this._handleFetchCompleted()})).catch((e=>{this._handleFailed(e),this._handleFetchCompleted()}))):(r.info("Not decided to refresh ID5 ID",{consentHasChanged:s,shouldRefresh:c}),this._handleFetchCompleted())}else r.info("No legal basis to use ID5",i),this._store.clearAll(this._followers.map((e=>({cacheId:e.getCacheId()})))),this._handleCancel("No legal basis to use ID5")}))}_waitForConsent(){const e=this._log,t=this._consentManager,r=this._metrics;e.info("Waiting for consent");const i=r.timer("fetch.consent.wait.time");return t.getConsentData().then((t=>(e.info("Consent received",t),i&&i.recordNow(),t)))}start(){!0!==this._started&&(this._getId(!1),this._started=!0)}refreshUid(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};let t=1<arguments.length?arguments[1]:void 0;var r=!0===e.forceFetch;t&&(r?this._refreshRequired[t]=!0:(r=this._followers.find((e=>e.getId()===t)))&&this._provisionFromCache(r)),this._metrics.refreshCallCounter("leader",{overwrites:void 0===this._queuedRefreshArgs}).inc(),this._callRefresh(e,t)}_callRefresh(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=1<arguments.length?arguments[1]:void 0;this._inProgressFetch?this._queuedRefreshArgs=[e,t]:(!0===e.resetConsent&&(this._consentManager.resetConsentData(!0===e.forceAllowLocalStorageGrant),this._awaitedConsentFrom=t),this._getId(!0===e.forceFetch))}updateConsent(e,t){if(this._consentManager.hasConsentSet())this._handleIgnoredConsentUpdate(e);else{const n=new Set(this._followers.map((e=>e.getDeclaredConsentSource())));var r=e.source||F.cmp,i=1===n.size&&n.has(F.partner);this._awaitedConsentFrom?this._awaitedConsentFrom===t?(this._consentManager.setConsentData(e),this._awaitedConsentFrom=void 0):this._handleIgnoredConsent(e,"awaited"):r!==F.partner||i?this._consentManager.setConsentData(e):this._handleIgnoredConsent(e,"partner")}}_handleIgnoredConsentUpdate(e){try{const t=this._consentManager._consentDataHolder.getValue();if(t){const r={},i=G.createFrom(e);Object.values(V).forEach((e=>{var n,s;i.apiTypes.includes(e)&&t.apiTypes.includes(e)?(n=JSON.stringify(t.getApiTypeData(e)),s=JSON.stringify(i.getApiTypeData(e)),r[e]=n===s?"same":"different"):i.apiTypes.includes(e)?r[e]="added":t.apiTypes.includes(e)&&(r[e]="missed")})),this._metrics.consentChangeCounter(r).inc()}}catch(e){this._log.error(e)}}_handleIgnoredConsent(e,t){try{const r={reason:t,source:e.source};e.apiTypes.forEach((e=>r[e]=!0)),this._metrics.consentIgnoreCounter(r)}catch(e){this._log.error(e)}}updateFetchIdData(e,t){const r=this._followers.find((t=>t.getId()===e));var i=r.getCacheId();r.updateFetchIdData(t),(t=r.getCacheId())!==i&&(this._log.info("Follower",r.getId(),"cacheId changed from",i," to",t,"required refresh"),this._refreshRequired[r.getId()]=!0)}addFollower(e){const t=this._log;var r=void 0===this._followers.find((t=>t.getCacheId()===e.getCacheId()));this._followers.push(e),t.info("Added follower",e.getId(),"cacheId",e.getCacheId()),this._window!==e.getWindow()&&(i=e.getStorage(),t.info("Adding follower's",e.getId(),"storage as replica"),this._leaderStorage.addReplica(i));var i=this._provisionFromCache(e);let n=new Pe;return!0===this._firstFetchTriggered&&(n.lateJoiner=!0,n.uniqueLateJoiner=r,i&&this._callRefresh({forceFetch:!0})),n}_provisionFromCache(e){var t=this._cachedIdProvider.provisionFromCache(e);return this._refreshRequired[e.getId()]=t.refreshRequired,t.provisioned&&this._store.incNb(t.cacheId),t.refreshRequired}getProperties(){return this._properties}_handleFetchCompleted(){this._inProgressFetch=void 0,this._queuedRefreshArgs&&(this._callRefresh(...this._queuedRefreshArgs),this._queuedRefreshArgs=void 0)}_handleFailed(e){this._log.error("Fetch id failed",e);var t,r=l(this._followers);try{for(r.s();!(t=r.n()).done;){t.value.notifyFetchUidCanceled({reason:"error"})}}catch(e){r.e(e)}finally{r.f()}}}class Re extends Oe{constructor(e,t){super(),n(this,"_messenger",void 0),n(this,"_leaderInstanceProperties",void 0),this._messenger=e,this._leaderInstanceProperties=t}_sendToLeader(e,t){this._messenger.callProxyMethod(this._leaderInstanceProperties.id,m.LEADER,e,t)}updateConsent(e,t){this._sendToLeader("updateConsent",[e,t])}refreshUid(e,t){this._sendToLeader("refreshUid",[e,t])}updateFetchIdData(e,t){this._sendToLeader("updateFetchIdData",[e,t])}getProperties(){return this._leaderInstanceProperties}}class Ue extends Oe{constructor(){super(...arguments),n(this,"_callsQueue",[]),n(this,"_assignedLeader",void 0)}updateConsent(e,t){this._callOrBuffer("updateConsent",[e,t])}updateFetchIdData(e,t){this._callOrBuffer("updateFetchIdData",[e,t])}refreshUid(e,t){this._callOrBuffer("refreshUid",[e,t])}addFollower(e){return this._callOrBuffer("addFollower",[e])}getProperties(){if(this._assignedLeader)return this._assignedLeader.getProperties()}assignLeader(e){this._assignedLeader=e;var t,r=l(this._callsQueue);try{for(r.s();!(t=r.n()).done;){var i=t.value;this._callAssignedLeader(i.name,i.args)}}catch(e){r.e(e)}finally{r.f()}this._callsQueue=[]}_callOrBuffer(e,t){if(this._assignedLeader)return this._callAssignedLeader(e,t);this._callsQueue.push({name:e,args:t})}_callAssignedLeader(e,t){return this._assignedLeader[e](...t)}}class ke{constructor(){n(this,"_valuePromise",void 0),n(this,"_value",void 0),n(this,"_resolve",void 0),n(this,"_hasValue",void 0),this.reset()}reset(){this._value=void 0,this._hasValue=!1,this._valuePromise=new Promise((e=>{this._resolve=e}))}set(e){this._hasValue?this._valuePromise=Promise.resolve(e):(this._hasValue=!0,this._resolve(e)),this._value=e}getValuePromise(){return this._valuePromise}hasValue(){return this._hasValue}getValue(){return this._value}}class Ne extends class{getConsentData(){}localStorageGrant(){}setStoredPrivacy(){}}{constructor(e,t,r,i,s){super(),n(this,"_consentDataHolder",void 0),n(this,"storedPrivacyData",void 0),n(this,"localStorage",void 0),n(this,"_forceAllowLocalStorageGrant",void 0),this._log=i,this.localStorage=e,this.storageConfig=t,this._consentDataHolder=new ke,this._forceAllowLocalStorageGrant=r,this._metrics=s}isForceAllowLocalStorageGrant(){return this._forceAllowLocalStorageGrant}resetConsentData(e){this._consentDataHolder.reset(),this.storedPrivacyData=void 0,this._forceAllowLocalStorageGrant=e}localStorageGrant(){var e,r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"unknown",i=this._getLocalStorageGrant();return null===(e=this._metrics)||void 0===e||null!==(r=e.localStorageGrantCounter(t(t({allowed:i.allowed,grantType:i.grantType,lsgContext:r,consentSet:null===(r=this._consentDataHolder)||void 0===r?void 0:r.hasValue()},i.api),i._debugInfo)))&&void 0!==r&&r.inc(),i}_getLocalStorageGrant(){const e=this._log;if(!0===this._forceAllowLocalStorageGrant)return e.warn("cmpApi: Local storage access granted by configuration override, consent will not be checked"),new q(!0,W.FORCE_ALLOWED_BY_CONFIG);if(this._consentDataHolder.hasValue()&&0!==this._consentDataHolder.getValue().apiTypes.length)return this._consentDataHolder.getValue().localStorageGrant();if(R(this.storedPrivacyData)||(t=this.localStorage.getItemWithExpiration(this.storageConfig.PRIVACY),this.storedPrivacyData=t&&JSON.parse(t),e.info("cmpApi: Loaded stored privacy data from local storage",this.storedPrivacyData)),this.storedPrivacyData&&!0===this.storedPrivacyData.id5_consent)return new q(!0,W.ID5_CONSENT);if(!this.storedPrivacyData||!U(this.storedPrivacyData.jurisdiction))return new q(!0,W.PROVISIONAL);var t=(t=this.storedPrivacyData.jurisdiction)in B.PRIVACY.JURISDICTIONS&&B.PRIVACY.JURISDICTIONS[t];return new q(!1===t,W.JURISDICTION)}setStoredPrivacy(e){const t=this._log;try{R(e)?(this.storedPrivacyData=e,this.localStorage.setItemWithExpiration(this.storageConfig.PRIVACY,JSON.stringify(e))):t.error("cmpApi: Cannot store privacy data if it is not an object",e)}catch(e){t.error("cmpApi: Error while storing privacy data",e)}}setConsentData(e){this._log.debug("Set consent data",e),e=G.createFrom(e),this._consentDataHolder.set(e)}getConsentData(){return this._consentDataHolder.getValuePromise()}hasConsentSet(){return this._consentDataHolder.hasValue()}}class Le{constructor(e,t,r,i){n(this,"localStorageGrantChecker",void 0),n(this,"localStorage",void 0),n(this,"_log",void 0),this.localStorageGrantChecker=e,this.localStorage=t,this.storageConfig=r,this._log=i}get(e){const t=this._log;try{const i=this.localStorageGrant();if(i.isDefinitivelyAllowed()){var r=this.localStorage.getItemWithExpiration(e);return t.info("Local storage get key=".concat(e.name," value=").concat(r)),r}t.warn("clientStore.get() has been called without definitive grant",i)}catch(e){t.error(e)}}_getObject(e){const t=this._log;try{const i=this.localStorageGrant();if(i.isDefinitivelyAllowed()){var r=this.localStorage.getObjectWithExpiration(e);return t.info("Local storage get key=".concat(e.name," value=").concat(r)),r}t.warn("clientStore.get() has been called without definitive grant",i)}catch(e){t.error(e)}}clear(e){const t=this._log;try{this.localStorage.removeItemWithExpiration(e)}catch(e){t.error(e)}}scheduleGC(e){const t=this.localStorageGrant(),r=this.localStorage,i=this.storageConfig.ID5_V2.name;setTimeout((function(){var n;t.isDefinitivelyAllowed()&&(n=r.removeExpiredObjectWithPrefix(i),e.storageAllKeysCounter().record((null==n?void 0:n.all)||0),e.storageExpiredKeysCounter().record((null==n?void 0:n.expired)||0))}),0)}_clearObject(e){const t=this._log;try{this.localStorage.removeItem(e.name)}catch(e){t.error(e)}}_put(e,t){const r=this._log;try{const i=this.localStorageGrant();i.isDefinitivelyAllowed()?(r.info("Local storage put key=".concat(e.name," value=").concat(t)),this.localStorage.setItemWithExpiration(e,t)):r.warn("clientStore._put() has been called without definitive grant",i)}catch(e){r.error(e)}}_updateObject(e,t){const r=this._log;try{const i=this.localStorageGrant();if(i.isDefinitivelyAllowed())return this.localStorage.updateObjectWithExpiration(e,t);r.warn("clientStore._updateObject() has been called without definitive grant",i)}catch(e){r.error(e)}}localStorageGrant(){return this.localStorageGrantChecker()}getResponse(){var e=this.get(this.storageConfig.ID5);return e&&JSON.parse(decodeURIComponent(e))}clearResponse(){this.clear(this.storageConfig.ID5)}clearResponseV2(e){this._clearObject(this.storageConfig.ID5_V2.withNameSuffixed(e))}putResponseV1(e){this._put(this.storageConfig.ID5,encodeURIComponent(P(e)?e:JSON.stringify(e)))}getHashedConsentData(){return this.get(this.storageConfig.CONSENT_DATA)}clearHashedConsentData(){this.clear(this.storageConfig.CONSENT_DATA)}putHashedConsentData(e){e!==new G&&this._put(this.storageConfig.CONSENT_DATA,e.hashCode())}clearDateTime(){this.clear(this.storageConfig.LAST)}setResponseDateTimeV1(e){this._put(this.storageConfig.LAST,e)}storeResponseV2(e,r){let i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:Date.now();return this._updateObject(this.storageConfig.ID5_V2.withNameSuffixed(e),(e=>t(t({},e),{},{response:r,responseTimestamp:i})))}getStoredResponseV2(e){return this._getObject(this.storageConfig.ID5_V2.withNameSuffixed(e))}incNbV2(e){let r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;return this._updateObject(this.storageConfig.ID5_V2.withNameSuffixed(e),(e=>{var i=Math.max(0,x(null==e?void 0:e.nb)?Math.round(e.nb)+r:r);return t(t({},e),{},{nb:i})}))}static storedDataMatchesCurrentData(e,t){return null==e||e===t}storedConsentDataMatchesConsentData(e){return Le.storedDataMatchesCurrentData(this.getHashedConsentData(),e.hashCode())}getExtensions(){return this._getObject(this.storageConfig.EXTENSIONS)}storeExtensions(e,t){return this._updateObject(t,(()=>e))}clearExtensions(){return this.clear(this.storageConfig.EXTENSIONS)}}class Fe{constructor(e,t,r){n(this,"_metrics",void 0),n(this,"_log",void 0),n(this,"_store",void 0),this._metrics=e,this._log=t,this._store=r}static getChunkUrl(e,t){return"https://d".concat(e,".eu-").concat(t,"-id5-sync.com")}submitExtensionCall(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:void 0;let i=pe();return fetch(e,r).then((r=>r.ok?(i.record(this._metrics.extensionsCallTimer(t,!0)),r.json()):(i.record(this._metrics.extensionsCallTimer(t,!1)),r="The call to get extensions at ".concat(e," was not ok, status: ").concat(r.status,", statusText: ").concat(r.statusText),this._log.warn(r),Promise.reject(new Error(r))))).catch((r=>(i.record(this._metrics.extensionsCallTimer(t,!1)),this._log.warn("Got error from ".concat(e," endpoint"),r),{})))}gatherChunks(e,t){if(e){let e=pe();return Promise.all(Array.from({length:t.length},((e,r)=>(r=Fe.getChunkUrl(r,t.urlVersion),fetch(r).then((e=>{if(e.ok)return e.text();throw new Error("The call to get ".concat(t.name," was not ok, status: ").concat(e.status,", statusText: ").concat(e.statusText))})))))).then((r=>(e.record(this._metrics.extensionsCallTimer(t.name,!0)),{[t.name]:r,[t.name+"Version"]:"".concat(t.version)}))).catch((r=>(e.record(this._metrics.extensionsCallTimer(t.name,!1)),this._log.warn("Got error when getting ".concat(t.name),r),{})))}return Promise.resolve({})}gather(e){var r=this._store.getCachedExtensions();if(void 0!==r)return Promise.resolve(r);let i=pe(),n=this._submitBounce(e);return this.submitExtensionCall("https://lb.eu-1-id5-sync.com/lb/v1","lb").then((e=>{var t=this.getChunksEnabled(e);return Promise.allSettled([Promise.resolve(e),this.gatherChunks(t,Fe.CHUNKS_CONFIGS.devChunks),this.gatherChunks(t,Fe.CHUNKS_CONFIGS.groupChunks),n])})).then((e=>{i.record(this._metrics.extensionsCallTimer("all",!0));let r=Fe.DEFAULT_RESPONSE;return e.forEach((e=>{e.value&&(r=t(t({},r),e.value))})),this._store.storeExtensions(r),r})).catch((e=>(i.record(this._metrics.extensionsCallTimer("all",!1)),this._log.error("Got error ".concat(e," when gathering extensions data")),Fe.DEFAULT_RESPONSE)))}_submitBounce(e){return e.some((e=>U(null===(e=e.cacheData)||void 0===e?void 0:e.signature)))?Promise.resolve({}):this.submitExtensionCall("https://id5-sync.com/bounce","bounce",{credentials:"include"})}getChunksEnabled(e){return 0!==(e=null==e?void 0:e.chunks)&&e}}n(Fe,"CHUNKS_CONFIGS",Object.freeze({devChunks:{name:"devChunks",urlVersion:3,length:8,version:4},groupChunks:{name:"groupChunks",urlVersion:4,length:8,version:4}})),n(Fe,"DEFAULT_RESPONSE",{lbCDN:"%%LB_CDN%%"});const Me=function(e,t,r){return new Fe(e,t,r)},Ve=Object.freeze({UNKNOWN:"unknown",LEADER:"leader",FOLLOWER:"follower"}),je=Object.freeze({MULTIPLEXING:"multiplexing",SINGLETON:"singleton"}),Ge=Object.freeze({AWAITING_SCHEDULE:"awaiting_schedule",SKIPPED:"skipped",SCHEDULED:"scheduled",COMPLETED:"completed",CANCELED:"canceled"});class We{constructor(e,t,r){n(this,"properties",void 0),n(this,"knownState",void 0),n(this,"_joinTime",void 0),n(this,"_window",void 0),this.properties=e,this.knownState=t,this._window=r,this._joinTime=performance.now()}getId(){return this.properties.id}isMultiplexingPartyAllowed(){var e;return(null===(e=this.knownState)||void 0===e?void 0:e.operatingMode)===je.MULTIPLEXING}getInstanceMultiplexingLeader(){var e,t;if((null===(e=this.knownState)||void 0===e?void 0:e.operatingMode)===je.MULTIPLEXING)return null===(e=this.knownState)||void 0===e||null===(t=e.multiplexing)||void 0===t?void 0:t.leader}getWindow(){return this._window}}class qe{constructor(e){n(this,"_knownValues",[]),n(this,"_counter",void 0),this._counter=e}add(e){e&&-1===this._knownValues.indexOf(e)&&(this._counter.inc(),this._knownValues.push(e))}}class Be{constructor(e,t){n(this,"_instancesCounter",void 0),n(this,"_domainsCounter",void 0),n(this,"_windowsCounter",void 0),n(this,"_partnersCounter",void 0);var r=t.id;this._instancesCounter=e.instanceCounter(t.id),this._windowsCounter=new qe(e.instanceUniqWindowsCounter(r)),this._partnersCounter=new qe(e.instanceUniqPartnersCounter(r)),this._domainsCounter=new qe(e.instanceUniqueDomainsCounter(r))}addInstance(e){var t,r,i;this._instancesCounter.inc(),this._partnersCounter.add((null==e||null===(t=e.fetchIdData)||void 0===t?void 0:t.partnerId)|(null==e||null===(r=e.sourceConfiguration)||void 0===r||null===(i=r.options)||void 0===i?void 0:i.partnerId)),this._domainsCounter.add(null==e?void 0:e.domain),this._windowsCounter.add(null==e?void 0:e.href)}}class He{constructor(e){n(this,"_scheduleTime",void 0),n(this,"_closeTime",void 0),n(this,"_timeoutId",void 0),n(this,"_state",Ge.AWAITING_SCHEDULE),n(this,"_delayMs",void 0),n(this,"_instance",void 0),this._instance=e}schedule(e){const t=this;t._delayMs=e,this._timeoutId=setTimeout((()=>{t._timeoutId&&(t._timeoutId=void 0,t._instance._doElection(),t._closeWithState(Ge.COMPLETED))}),t._delayMs),t._state=Ge.SCHEDULED,t._scheduleTime=performance.now()}skip(){this._closeWithState(Ge.SKIPPED)}cancel(){this._timeoutId&&(clearTimeout(this._timeoutId),this._timeoutId=void 0),this._closeWithState(Ge.CANCELED)}_closeWithState(e){this._state=e,this._closeTime=performance.now()}}class Je{constructor(e,t,r,i,o,a,c){n(this,"properties",void 0),n(this,"_messenger",void 0),n(this,"_knownInstances",new Map),n(this,"_lastJoinedInstance",void 0),n(this,"role",void 0),n(this,"_leader",void 0),n(this,"_mode",void 0),n(this,"_metrics",void 0),n(this,"_logger",void 0),n(this,"_instanceCounters",void 0),n(this,"_election",void 0),n(this,"_window",void 0),n(this,"_storage",void 0),n(this,"_trueLinkAdapter",void 0),n(this,"_cachedIdProvider",void 0);var l=U(globalThis)&&U(globalThis.crypto)&&A(globalThis.crypto.randomUUID)?globalThis.crypto.randomUUID():"".concat(1e6*Math.random()|0);this.properties=s({id:l,version:"1.0.33",href:null===(l=e.location)||void 0===l?void 0:l.href,domain:null===(l=e.location)||void 0===l?void 0:l.hostname},t),this.role=Ve.UNKNOWN,this._metrics=i,this._instanceCounters=new Be(i,this.properties),this._loadTime=performance.now(),this._logger=new ze(o,this),this._window=e,this._dispatcher=new Se(this._logger),this._leader=new Ue,this._followerRole=new De(this._window,this.properties,this._dispatcher,this._logger,this._metrics),this._election=new He(this),this._storage=r,this._trueLinkAdapter=a,this._cachedIdProvider=new Ae("self",new z(c,a),this._logger,this._metrics)}updateConfig(e){s(this.properties,e)}init(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:500;let t=this,r=t._window;t._mode=!0===t.properties.singletonMode?je.SINGLETON:je.MULTIPLEXING,t._instanceCounters.addInstance(t.properties),function(e){const t=e._metrics;[100,200,500,1e3,2e3,3e3,5e3].forEach((r=>{setTimeout((()=>{var i=((null===(i=e._knownInstances)||void 0===i?void 0:i.size)||0)+1;t.summary("instance.partySize",{after:r,electionState:e._election._state}).record(i)}),r)}))}(t),t._messenger=new I(t.properties.id,r,t._logger,t._metrics),t._messenger.onAnyMessage(((e,i)=>{var n=Date.now()-e.timestamp|0;t._metrics.instanceMsgDeliveryTimer({messageType:e.type,sameWindow:r===i}).record(n),t._logger.debug("Message received",e),t._doFireEvent(we.ID5_MESSAGE_RECEIVED,e)})).onMessage(_.TYPE,((e,r)=>{let i=s(new _,e.payload);void 0===i.isResponse&&(i.isResponse=e.dst!==p),t._handleHelloMessage(i,e,r)})).onProxyMethodCall(new w(this._logger).registerTarget(m.LEADER,t._leader).registerTarget(m.FOLLOWER,t._followerRole).registerTarget(m.STORAGE,t._storage)),t._mode===je.SINGLETON?(t._election.skip(),t._onLeaderElected(t.properties)):t._mode===je.MULTIPLEXING&&t._election.schedule(e),t._messenger.broadcastMessage(t._createHelloMessage(!1),_.TYPE)}register(e){try{this.updateConfig(e),this.init()}catch(e){this._logger.error("Failed to register integration instance",e)}return this}_handleHelloMessage(e,t,r){this._joinInstance(e,t,r)}unregister(){this._logger.info("Unregistering"),this._messenger&&this._messenger.unregister()}on(e,t){return this._dispatcher.on(e,t),this}_joinInstance(e,t,r){var i=e.isResponse;const n=new We(e.instance,e.instanceState,r);this._knownInstances.get(n.getId())?this._logger.debug("Instance already known",n.getId()):(this._knownInstances.set(n.getId(),n),this._lastJoinedInstance=n,this._instanceCounters.addInstance(n.properties),this._metrics.instanceJoinDelayTimer({election:this._election._state}).record(performance.now()-this._loadTime|0),i?(i=n.getInstanceMultiplexingLeader(),this._mode===je.MULTIPLEXING&&this.role===Ve.UNKNOWN&&void 0!==i&&(this._logger.info("Joined late, elected leader is",i),this._election.cancel(),this._onLeaderElected(i))):(this._messenger.sendResponseMessage(t,this._createHelloMessage(!0),_.TYPE),this._mode===je.MULTIPLEXING&&this.role!==Ve.UNKNOWN&&this._handleLateJoiner(n)),this._logger.debug("Instance joined",n.getId()),this._doFireEvent(we.ID5_INSTANCE_JOINED,n.properties))}_createHelloMessage(){var e,t=0<arguments.length&&void 0!==arguments[0]&&arguments[0];let r={operatingMode:this._mode,knownInstances:Array.from(this._knownInstances.values()).map((e=>e.properties))};return this._mode===je.MULTIPLEXING&&(r.multiplexing={role:this.role,electionState:null===(e=this._election)||void 0===e?void 0:e._state,leader:this._leader.getProperties()}),new _(this.properties,t,r)}_handleLateJoiner(e){this._logger.info("Late joiner detected",e.properties);var t=this._metrics.instanceLateJoinCounter(this.properties.id,{scope:"party"}).inc();this._metrics.instanceLateJoinDelayTimer({election:this._election._state,isFirst:1===t}).record(performance.now()-this._election._closeTime),!e.isMultiplexingPartyAllowed()||this.role!==Ve.LEADER||!0===(null==(e=this._leader.addFollower(new Ee(e,this._messenger,this._logger)))?void 0:e.lateJoiner)&&this._metrics.instanceLateJoinCounter(this.properties.id,{scope:"leader",unique:!0===(null==e?void 0:e.uniqueLateJoiner)}).inc()}_doFireEvent(e){for(var t=arguments.length,r=new Array(1<t?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];this._dispatcher.emit(e,...r)}_actAsLeader(){var e=this.properties;const t=this._logger;var r=this._metrics,i=new ee(this._storage),n=new Y(i),s=new J(e.storageExpirationDays);const o=new Ne(n,s,e.forceAllowLocalStorageGrant,t,r);n=new z(new Le((()=>o.localStorageGrant("client-store")),n,s,t),this._trueLinkAdapter),s=new me(r,t,Me(r,t,n));const a=new xe(this._window,e,i,n,o,r,t,s);a.addFollower(this._followerRole),this._leader.assignLeader(a),this._mode===je.MULTIPLEXING&&Array.from(this._knownInstances.values()).filter((e=>e.isMultiplexingPartyAllowed())).map((e=>a.addFollower(new Ee(e,this._messenger,t)))),a.start()}_followRemoteLeader(e){this._leader.assignLeader(new Re(this._messenger,e)),this._logger.info("Following remote leader ",e)}updateConsent(e){this._leader.updateConsent(e,this.properties.id)}updateFetchIdData(e){this._leader.updateFetchIdData(this.properties.id,e),s(this.properties.fetchIdData,e)}refreshUid(e){this._leader.refreshUid(e,this.properties.id)}_doElection(){var e=this._election;const t=this._knownInstances;let r=Array.from(t.values()).filter((e=>e.isMultiplexingPartyAllowed())).map((e=>e.properties));r.push(this.properties),this._onLeaderElected(function(e){if(e&&0!==e.length)return e=e.sort(((e,t)=>{let r=-(0|S(e.version,t.version));var i,n,s;return 0===r&&(r=e.source.localeCompare(t.source),0===r&&(r=-(0|S(e.sourceVersion,t.sourceVersion))),0===r&&(r=(n=(null===(n=e.fetchIdData)||void 0===n||null===(i=n.refererInfo)||void 0===i?void 0:i.numIframes)||Number.MAX_SAFE_INTEGER)-(s=(null===(i=t.fetchIdData)||void 0===i||null===(s=i.refererInfo)||void 0===s?void 0:s.numIframes)||Number.MAX_SAFE_INTEGER)),0===r&&(r=e.id.localeCompare(t.id))),r})),e[0]}(r));var i=this._lastJoinedInstance;i&&this._metrics.instanceLastJoinDelayTimer().record(Math.max(i._joinTime-e._scheduleTime,0))}_onLeaderElected(e){var t=this;t.role=e.id===t.properties.id?Ve.LEADER:Ve.FOLLOWER,t.role===Ve.LEADER?t._actAsLeader():t.role===Ve.FOLLOWER&&t._followRemoteLeader(e),t._logger.debug("Leader elected",e.id,"my role",t.role),t._doFireEvent(we.ID5_LEADER_ELECTED,t.role,t._leader.getProperties())}getId(){return this.properties.id}lookupForCachedId(){return this._logger.info("Self lookup for cachedId triggered"),this._cachedIdProvider.provisionFromCache(this._followerRole)}}class ze extends d{constructor(e,t){super(),n(this,"_instance",void 0),this._delegate=e||h,this._instance=t}_prefix(){return"Instance(id=".concat(this._instance.getId(),", role=").concat(this._instance.role,")")}debug(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this._delegate.debug((new Date).toISOString(),this._prefix(),...t)}info(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this._delegate.info((new Date).toISOString(),this._prefix(),...t)}warn(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this._delegate.warn((new Date).toISOString(),this._prefix(),...t)}error(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this._delegate.error((new Date).toISOString(),this._prefix(),...t)}}const Ke=new class{createInstance(e,t,r,i,n,s){return new Je(e,{},i,r,t,n,s)}},Xe="TRUE"===rt("id5_debug").toUpperCase(),Ye="TRACE"===rt("id5_debug").toUpperCase(),Ze=Boolean(window.console);let Qe=!1;function $e(e,t,r,i,n){et()&&Ze&&e&&e.apply(console,["%cID5 - ".concat(t,"#").concat(r),"color: #fff; background: #1c307e; padding: 1px 4px; border-radius: 3px;",i].concat(n))}function et(){return Xe||Ye||Qe}class tt extends d{constructor(e,t){super(),n(this,"_invocationId",void 0),n(this,"_origin",void 0),this._invocationId=t,this._origin=e}debug(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];!function(e,t){for(var r=arguments.length,i=new Array(2<r?r-2:0),n=2;n<r;n++)i[n-2]=arguments[n];$e(console.info,e,t,"DEBUG",i)}(this._origin,this._invocationId,...t)}info(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];!function(e,t){for(var r=arguments.length,i=new Array(2<r?r-2:0),n=2;n<r;n++)i[n-2]=arguments[n];$e(console.info,e,t,"INFO",i)}(this._origin,this._invocationId,...t)}warn(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];!function(e,t){for(var r=arguments.length,i=new Array(2<r?r-2:0),n=2;n<r;n++)i[n-2]=arguments[n];$e(console.warn,e,t,"WARNING",i)}(this._origin,this._invocationId,...t)}error(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];!function(e,t){for(var r=arguments.length,i=new Array(2<r?r-2:0),n=2;n<r;n++)i[n-2]=arguments[n];$e(console.error,e,t,"ERROR",i)}(this._origin,this._invocationId,...t)}}function rt(e){const t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(window.location.search);return null===t?"":decodeURIComponent(t[1].replace(/\+/g," "))}const it=E,nt=A,st=P,ot=O,at=x,ct=R,lt=function(e){return E(e,"Boolean")},dt=U;function ht(e){(new Image).src=e}function ut(e,t,r,i,n){for(t=t.split?t.split("."):t,i=0;i<t.length;i++)e=e?e[t[i]]:n;return e===n?r:e}new tt("ajax");const gt=e=>null!=e&&"object"==typeof e,pt=(ne=window,function(){try{var e=function(){let e=function(){let e,t=[];do{try{e=e?e.parent:ne;try{var r=e===ne.top;let i={referrer:e.document.referrer||null,location:e.location.href||null,isTop:r};r&&(i=s(i,{canonicalUrl:function(e){try{var t=e.querySelector("link[rel='canonical']");if(null!==t)return t.href}catch(e){}return null}(e.document)})),t.push(i)}catch(r){t.push({referrer:null,location:null,isTop:e===ne.top})}}catch(e){return t.push({referrer:null,location:null,isTop:!1}),t}}while(e!==ne.top);return t}();var t=function(){try{return ne.location.ancestorOrigins?ne.location.ancestorOrigins:void 0}catch(e){}}();if(t)for(let r=0,i=t.length;r<i;r++)e[r].ancestor=t[r];return e}(),t=e.length-1,r=null!==e[t].location||0<t&&null!==e[t-1].referrer,i=function(e){let t=[];var r;let i,n=null,s=null,o=null,a=null;for(i=e.length-1;0<=i;i--){try{n=e[i].location}catch(e){}if(n)t.push(n),a=a||n;else if(0!==i){r=e[i-1];try{s=r.referrer,o=r.ancestor}catch(e){}s?(t.push(s),a=a||s):o?(t.push(o),a=a||o):t.push(null)}else t.push(null)}return{stack:t,detectedRefererUrl:a}}(e);let n,o;e[e.length-1].canonicalUrl&&(n=e[e.length-1].canonicalUrl);try{o=ne.top.document.referrer}catch(e){}return{topmostLocation:i.detectedRefererUrl,ref:o||null,reachedTop:r,numIframes:t,stack:i.stack,canonicalUrl:n}}catch(e){}});const vt={A:0,B:1,C:2,D:3,E:4,F:5,G:6,H:7,I:8,J:9,K:10,L:11,M:12,N:13,O:14,P:15,Q:16,R:17,S:18,T:19,U:20,V:21,W:22,X:23,Y:24,Z:25,a:26,b:27,c:28,d:29,e:30,f:31,g:32,h:33,i:34,j:35,k:36,l:37,m:38,n:39,o:40,p:41,q:42,r:43,s:44,t:45,u:46,v:47,w:48,x:49,y:50,z:51,0:52,1:53,2:54,3:55,4:56,5:57,6:58,7:59,8:60,9:61,"-":62,_:63,"+":62,"/":63},ft=Object.freeze({tcfv2:{objName:"__tcfapiCall",objKeys:["command","version"],returnObjName:"__tcfapiReturn"},uspv1:{objName:"__uspapiCall",objKeys:["command","version"],returnObjName:"__uspapiReturn"},gppv1:{objName:"__gppCall",objKeys:["command","parameter"],returnObjName:"__gppReturn"}}),_t=Object.freeze({TCF:0,USP:1,GPP:2});class mt{constructor(e,t){n(this,"direct",void 0),n(this,"version",void 0),this.direct=e,this.version=t}getConsentData(){var e=this;return i((function*(){return e.getClientConsentData()}))()}static create(e){return i((function*(){var t=(r=St._findCmpApi("__gpp")).cmpApiFrame,r=r.cmpApiFunction;let i,n=!1;if(!t)return e.warn("cmpApi: GPP not found! Using defaults."),Promise.resolve();if(nt(r))n=!0,e.info("cmpApi: Detected GPP is directly accessible, calling it now."),i=r;else{e.info("cmpApi: Detected GPP is outside the current iframe. Using message passing.");const r=St._buildCmpSurrogate(ft.gppv1,t);i=function(e,t,i){r(e,i,t)}}var s=yield new Promise((e=>{var t=i("ping",(function(t){e(t)}));t&&e(t)}));switch(s.gppVersion){case yt.version:return new yt(s,i,n);case It.version:return new It(s,i,n);default:var o="Unsupported version of gpp: ".concat(s.gppVersion);return e.warn(o),Promise.reject(o)}}))()}static tcfDataHasLocalStorageGrant(e){return ot(e.PurposeConsent)&&!0===e.PurposeConsent[0]}static tcfDataHasID5VendorConsented(e){return 0<=(null===(e=e.VendorConsent)||void 0===e?void 0:e.indexOf("131"))}static getTcfData(e){let t;return e=null==e?void 0:e.tcfeuv2,ot(e)&&ct(e[0])?t=e[0]:ct(e)&&(t=e),t}}class yt extends mt{constructor(e,t,r){super(r,yt.version),n(this,"gppFn",void 0),n(this,"ready",void 0),this.gppFn=t,this.ready=this.isReady(e)}isReady(e){return"loaded"===e.cmpStatus&&"visible"!==e.cmpDisplayStatus}getClientConsentData(){var e=this;return i((function*(){e.ready||(e.ready=yield new Promise((t=>{e.gppFn("addEventListener",(r=>!!e.isReady(r.pingData)&&void t(!0)))})));var t=new Promise((t=>{e.gppFn("getGPPData",(e=>{t(e)}))})),r=new Promise((t=>{e.gppFn("getSection",(e=>{t(e)}),"tcfeuv2")}));r=(t=o(yield Promise.all([t,r]),2))[0],t=t[1];const i=new j;return i.version=V.GPP_V1_0,i.gppString=r.gppString,i.applicableSections=r.applicableSections,t&&(i.localStoragePurposeConsent=mt.tcfDataHasLocalStorageGrant(t),i.vendorsConsentForId5Granted=mt.tcfDataHasID5VendorConsented(t)),i}))()}}function wt(e,t,r){r&&(e.apiTypes.push(t),s(e,r))}n(yt,"version","1.0");class It extends mt{constructor(e,t,r){super(r,It.version),n(this,"gppFn",void 0),n(this,"readyPingData",void 0),this.gppFn=t,"ready"===e.signalStatus&&(this.readyPingData=e)}getClientConsentData(){var e=this;return i((function*(){return new Promise((t=>{e.readyPingData?t(e.parsePingData(e.readyPingData)):e.gppFn("addEventListener",(r=>"ready"===r.pingData.signalStatus&&void t(e.parsePingData(r.pingData))))}))}))()}parsePingData(e){const t=new j;return t.gppString=e.gppString,t.version=V.GPP_V1_1,t.applicableSections=e.applicableSections,(e=mt.getTcfData(e.parsedSections))&&(t.localStoragePurposeConsent=mt.tcfDataHasLocalStorageGrant(e),t.vendorsConsentForId5Granted=mt.tcfDataHasID5VendorConsented(e)),t}}n(It,"version","1.1");class St{constructor(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:h;n(this,"_lookupInProgress",void 0),n(this,"_log",void 0),n(this,"_metrics",void 0),n(this,"_consentDataPromise",void 0),this._metrics=e,this._log=t}refreshConsentData(e,t,r){const i=this;return i._lookupInProgress||(i._lookupInProgress=!0,i._consentDataPromise=this._lookupConsentData(e,t,r).finally((()=>{i._lookupInProgress=!1}))),this._consentDataPromise}_lookupConsentData(e,t,r){if(e){this._log.warn("cmpApi: ID5 is operating in forced consent mode and will not retrieve any consent signals from the CMP");let e=new G;return e.forcedGrantByConfig=!0,e.source=F.partner,Promise.resolve(e)}switch(t){case"static":return new Promise((e=>{this._parseStaticConsentData(r,e)}));case"iab":return new Promise((e=>{this._lookupIabConsent(e)}));default:return this._log.error("cmpApi: Unknown consent API: ".concat(t)),Promise.reject(new Error("Unknown consent API: ".concat(t)))}}_parseStaticConsentData(e,t){e=e||{};let r=new G;if(r.source=F.partner,ct(e.getTCData)){const t=this._parseTcfData(e.getTCData);wt(r,V.TCF_V2,t);try{const e=this._metrics;this._lookupTcf((r=>{e.consentDiscrepancyCounter({apiType:V.TCF_V2,sameString:(null==r?void 0:r.consentString)===(null==t?void 0:t.consentString),sameLSPC:(null==r?void 0:r.localStoragePurposeConsent)===(null==t?void 0:t.localStoragePurposeConsent),sameGdpr:(null==r?void 0:r.gdprApplies)===(null==t?void 0:t.gdprApplies)}).inc()}))}catch(e){}}if(ot(e.allowedVendors)&&wt(r,V.ID5_ALLOWED_VENDORS,{allowedVendors:e.allowedVendors.map((e=>e.toString())),gdprApplies:!0}),ct(e.getUSPData)){const t=this._parseUspData(e.getUSPData);wt(r,V.USP_V1,t);try{const e=this._metrics;this._lookupUsp((r=>{e.consentDiscrepancyCounter({apiType:V.USP_V1,sameString:(null==r?void 0:r.ccpaString)===(null==t?void 0:t.ccpaString)}).inc()}))}catch(e){}}0===r.apiTypes.length&&this._log.warn("cmpApi: No static consent data detected! Using defaults."),this._log.info("cmpApi: Detected APIs '".concat(r.apiTypes,"' from static consent data"),e),t(r)}_lookupIabConsent(e){const t=[];let r=new G;r.source=F.cmp;var i=i=>(t[i]=0,(n,s)=>{t[i]||(t[i]=Date.now(),n&&wt(r,s,n),t.every((e=>0<e))&&e(r))}),n=i(_t.TCF),s=i(_t.USP);i=i(_t.GPP);this._lookupGpp(i),this._lookupTcf(n),this._lookupUsp(s)}_lookupUsp(e){var t=(r=St._findCmpApi("__uspapi")).cmpApiFrame,r=r.cmpApiFunction;let i;if(!t)return this._log.warn("cmpApi: USP not found! Using defaults for CCPA."),void e();i=nt(r)?(this._log.info("cmpApi: Detected USP is directly accessible, calling it now."),r):(this._log.info("cmpApi: Detected USP is outside the current iframe. Using message passing."),St._buildCmpSurrogate(ft.uspv1,t)),i("getUSPData",1,((t,r)=>{r?e(this._parseUspData(t),V.USP_V1):(this._log.error("cmpApi: USP callback not successful. Using defaults for CCPA."),e())}))}_lookupGpp(e){var t=this;return i((function*(){var r=Date.now();try{let a=yield mt.create(t._log);if(a){var i={gppVersion:a.version,directCmp:a.direct};try{var n=yield a.getConsentData();e({gppData:n},n.version);var o=Date.now();t._metrics.timer("gpp.delay",i).record(o-r)}catch(r){t._metrics.counter("gpp.failure",s({type:"CONSENT"},i)).inc(),t._log.error("cmpApi: getting GPP consent not successful. Using defaults for Gpp."),e()}}else e()}catch(r){t._metrics.counter("gpp.failure",{type:"CLIENT"}).inc(),t._log.error("cmpApi: creating GPP client not successful. Using defaults for Gpp."),e()}}))()}static _buildCmpSurrogate(e,t){return(r,i,n)=>{const s=Math.random()+"",o={},a={};a[e.objKeys[0]]=r,a[e.objKeys[1]]=i,a.callId=s,o[e.objName]=a;const c=t=>{(t=ut(t,"data.".concat(e.returnObjName)))&&t.callId===s&&(void 0!==(t=n(t.returnValue,t.success))&&!0!==t||window.removeEventListener("message",c))};window.addEventListener("message",c,!1),t.postMessage(o,"*")}}_lookupTcf(e){var t=(r=St._findTCF()).cmpFrame,r=r.cmpFunction;if(!t)return this._log.warn("cmpApi: TCF not found! Using defaults for GDPR."),void e();nt(r)?this._lookupDirectTcf(r,e):(this._log.info("cmpApi: Detected TCF is outside the current iframe. Using message passing."),this._lookupMessageTcf(t,e))}_lookupMessageTcf(e,t){e=St._buildCmpSurrogate(ft.tcfv2,e),this._lookupDirectTcf(e,t)}_lookupDirectTcf(e,t){const r=this._log;e("addEventListener",2,((e,i)=>{var n;return"event",n=e,r.info("cmpApi: TCFv2 - Received a call back: ".concat("event"),n),i?!(!e||!1!==e.gdprApplies&&"tcloaded"!==e.eventStatus&&"useractioncomplete"!==e.eventStatus)&&void t(this._parseTcfData(e),V.TCF_V2):(r.error("cmpApi: TCFv2 - Received insuccess: ".concat("addEventListener",". Please check your CMP setup. Using defaults for GDPR.")),void t())}))}_parseUspData(e){if(ct(e)&&st(e.uspString))return{ccpaString:e.uspString};this._log.error("cmpApi: No or malformed USP data. Using defaults for CCPA.")}_parseTcfData(e){let t,r,i=this._log;if(t=St._isValidV2ConsentObject,r=St._normalizeV2Data,t(e))return r(e);i.error("cmpApi: Invalid CMP data. Using defaults for GDPR.",e)}static _isValidV2ConsentObject(e){var t=e&&e.gdprApplies;e=e&&e.tcString;return!1===t||st(e)}static _tcfDataHasID5VendorConsented(e){var t,r;return!0===(null==e||null===(t=e.vendor)||void 0===t||null===(r=t.consents)||void 0===r?void 0:r[131])}static _normalizeV2Data(e){let t=ut(e,"purpose.consents.1");lt(t)||(t=function(e,t){var r=152+t-1;t=~~(r/6);if(e&&"C"===e.charAt(0)&&!(e.length<=t)&&(t=e.charAt(t),void 0!==(t=vt[t])))return 0!=(t&1<<6-r%6-1)}(e.tcString,1));var r=St._tcfDataHasID5VendorConsented(e);return{consentString:e.tcString,localStoragePurposeConsent:t,gdprApplies:e.gdprApplies,vendorsConsentForId5Granted:r}}static _findTCF(){let e,t,r=window;for(;!e;){try{if("function"==typeof r.__tcfapi){t=r.__tcfapi,e=r;break}}catch(r){}try{if(r.frames.__tcfapiLocator){e=r;break}}catch(r){}if(r===window.top)break;r=r.parent}return{cmpFrame:e,cmpFunction:t}}static _findCmpApi(e){let t,r,i=window;for(;!t;){try{if("function"==typeof i[e]){r=i[e],t=i;break}}catch(e){}try{if(i.frames["".concat(e,"Locator")]){t=i;break}}catch(e){}if(i===window.top)break;i=i.parent}return{cmpApiFrame:t,cmpApiFunction:r}}}const Ct="1.0.75";class bt{static gatherUaHints(e,t){return i((function*(){if(U(window.navigator.userAgentData)&&!e){let e;try{e=yield window.navigator.userAgentData.getHighEntropyValues(["architecture","fullVersionList","model","platformVersion"])}catch(e){return void t.error("Error while calling navigator.userAgentData.getHighEntropyValues()",e)}return bt.filterUaHints(e)}}))()}static filterUaHints(e){if(U(e)){const t=/[()-.:;=?_/]/g;return O(e.brands)&&(e.brands=e.brands.filter((e=>P(e.brand)&&e.brand.search(t)<0))),O(e.fullVersionList)&&(e.fullVersionList=e.fullVersionList.filter((e=>P(e.brand)&&e.brand.search(t)<0))),e}}}const Dt=Object.freeze({NEVER:"never",AFTER_UID_SET:"after-uid-set",ASAP:"asap"}),Tt=Object.freeze({allowGCReclaim:Object.values(Dt)});class Et{constructor(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:h;if(n(this,"invocationId",void 0),n(this,"options",void 0),n(this,"providedOptions",void 0),n(this,"invalidSegments",void 0),this._log=t,this.options={debugBypassConsent:!1,allowLocalStorageWithoutConsentApi:!1,cmpApi:"iab",consentData:{},refreshInSeconds:7200,partnerId:void 0,partnerUserId:void 0,callbackOnAvailable:void 0,callbackOnUpdates:void 0,callbackTimeoutInMs:void 0,pd:void 0,abTesting:{enabled:!1,controlGroupPct:0},provider:void 0,maxCascades:8,applyCreativeRestrictions:!1,acr:!1,segments:void 0,disableUaHints:!1,storageExpirationDays:void 0,att:void 0,diagnostics:{publishingDisabled:!1,publishAfterLoadInMsec:3e4,publishBeforeWindowUnload:!0,publishingSampleRatio:.01},multiplexing:{_disabled:!1},allowGCReclaim:Dt.AFTER_UID_SET},this.providedOptions={},!at(e.partnerId)&&!st(e.partnerId))throw new Error("partnerId is required and must be a number or a string");this.invalidSegments=0,this.updOptions(e),this.storageConfig=new J(e.storageExpirationDays)}getOptions(){return this.options}getProvidedOptions(){return this.providedOptions}getInvalidSegments(){return this.invalidSegments}hasCreativeRestrictions(){return this.options.applyCreativeRestrictions||this.options.acr}updOptions(e){const r=this,i=r._log;if(ct(e)){this.setPartnerId(e.partnerId);const n=(e,t)=>{this.options[e]=t,this.providedOptions[e]=t};Object.keys(e).forEach((s=>{if("segments"===s){const t=e[s],o=[];U(t)&&(ot(t)?(t.forEach(((e,t)=>(t="segments[".concat(t,"]"),ot(e.ids)&&function(e,t){let r=!0;return k(e,(e=>r=r&&t(e))),r}(e.ids,st)?e.ids.length<1?(i.error("Config option ".concat(t,".ids should contain at least one segment ID")),void(r.invalidSegments+=1)):st(e.destination)?void o.push(e):(At(i,"".concat(t,".destination"),"String",e.destination),void(r.invalidSegments+=1)):(At(i,"".concat(t,".ids"),"Array of String",e.ids),void(r.invalidSegments+=1))))),n(s,o)):At(i,s,"Array",t))}else if("diagnostics"===s){const r=this.options.diagnostics,i=e.diagnostics;if(it(i,Et.configTypes.diagnostics)){let e=t({},r);Object.keys(i).forEach((t=>{void 0!==r[t]&&typeof r[t]==typeof i[t]&&(e[t]=i[t])})),this.options[s]=e}this.providedOptions[s]=e[s]}else{var o,a;void 0!==Tt[s]?(a=e[s])&&Tt[s].includes(a)&&n(s,a):"partnerId"!==s&&(o=Et.configTypes[s],U(a=e[s])&&(it(a,o)?n(s,a):At(i,s,o,a)))}}))}else i.error("Config options must be an object")}setPartnerId(e){let t;if(st(e)){if(t=parseInt(e),isNaN(t)||t<0)throw new Error("partnerId is required and must parse to a positive integer")}else at(e)&&(t=e);if(at(t)){if(at(this.options.partnerId)&&t!==this.options.partnerId)throw new Error("Cannot update config with a different partnerId");this.options.partnerId=t,this.providedOptions.partnerId=e}}}function At(e,t,r,i){e.error("Config option ".concat(t," must be of type ").concat(r," but was ").concat(toString.call(i),". Ignoring..."))}n(Et,"configTypes",{debugBypassConsent:"Boolean",allowLocalStorageWithoutConsentApi:"Boolean",cmpApi:"String",consentData:"Object",refreshInSeconds:"Number",partnerUserId:"String",callbackOnAvailable:"Function",callbackOnUpdates:"Function",callbackTimeoutInMs:"Number",pd:"String",abTesting:"Object",provider:"String",maxCascades:"Number",applyCreativeRestrictions:"Boolean",acr:"Boolean",disableUaHints:"Boolean",storageExpirationDays:"Number",att:"Number",diagnostics:"Object",multiplexing:"Object",dynamicConfig:"Object",allowGCReclaim:"String"});class Pt{constructor(e,t,r,i,s,o,a){n(this,"_called",void 0),n(this,"_callbackFn",void 0),n(this,"_callbackArgs",void 0),n(this,"_beforeTrigger",void 0),n(this,"_watchdog",void 0),n(this,"_log",void 0),n(this,"_metrics",void 0),n(this,"_callbackName",void 0),this._callbackName=e,this._log=t,this._metrics=r,this._callbackFn=i;for(var c=arguments.length,l=new Array(7<c?c-7:0),d=7;d<c;d++)l[d-7]=arguments[d];this._callbackArgs=l,this._beforeTrigger=a,this._called=!1,this._callbackTriggerTimer=pe(),this._timeout=s,o?this._watchdog=setTimeout((()=>this._trigger("immediate")),0):0<s&&(this._watchdog=setTimeout((()=>this._trigger("timeout")),s))}_trigger(){let e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"unknown";this._watchdog=void 0;let t=this._callbackTriggerTimer.record(this._metrics.timer("callback.trigger.time",{trigger:e,callbackName:this._callbackName,timeout:this._timeout}));this._called||(this._called=!0,setTimeout((()=>{this._log.debug("Firing ".concat(this._callbackName," callback after ").concat(t,"ms. Triggered by ").concat(e,", configured timeoutMs=").concat(this._timeout)),this._beforeTrigger(),this._callbackFn.call(globalThis,...this._callbackArgs)}),0))}triggerNow(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"eventOccurred";this.disableWatchdog(),this._trigger(e)}disableWatchdog(){this._watchdog&&(clearTimeout(this._watchdog),this._watchdog=void 0)}}class Ot{constructor(e,t,r){n(this,"refererInfo",void 0),n(this,"apiVersion",void 0),n(this,"isUsingCdn",void 0),this.refererInfo=e,this.apiVersion=t,this.isUsingCdn=r}}class xt{constructor(e,t){n(this,"_targets",void 0),n(this,"_metrics",void 0),n(this,"_survivalTimer",void 0),this._targets=[e,t],this._metrics=t,this._survivalTimer=pe()}unregister(e){this._survivalTimer&&this._metrics&&this._survivalTimer.record(this._metrics.instanceSurvivalTime({unregisterTrigger:e})),this._targets.forEach((e=>{try{dt(e)&&nt(e.unregister)&&e.unregister()}catch(e){}}))}}globalThis.__id5_finalization_registry||(globalThis.__id5_finalization_registry=new class{constructor(){n(this,"_finalizationRegistry",void 0),n(this,"_instancesHolder",void 0),this._instancesHolder=new Set;try{this._finalizationRegistry=new FinalizationRegistry((e=>{try{dt(e)&&nt(e.unregister)&&e.unregister("gc-reclaim")}catch(e){}}))}catch(e){}}register(e){try{e.getOptions().allowGCReclaim!==Dt.ASAP&&this._instancesHolder.add(e),this._finalizationRegistry.register(e,e._unregisterTargets,e)}catch(e){}}unregister(e){try{this.releaseInstance(e,!0),this._finalizationRegistry.unregister(e)}catch(e){}}releaseInstance(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];!e.getOptions().allowGCReclaim===Dt.NEVER&&!t||this._instancesHolder.delete(e)}});const Rt=globalThis.__id5_finalization_registry;class Ut{constructor(e){n(this,"_ref",void 0),this._ref=e}deref(){return this._ref}}class kt{getOptions(){return this.config.getOptions()}getProvidedOptions(){return this.config.getProvidedOptions()}getInvalidSegments(){return this.config.getInvalidSegments()}getUserId(){return!1===this._isExposed?"0":this._userId}getGpId(){return!1===this._isExposed?void 0:this._gpId}getLinkType(){return!1===this._isExposed?0:this.getExt().linkType}getExt(){var e=!1===this._isExposed?{}:this._ext;return s({abTestingControlGroup:!this.exposeUserId()},e)}getPublisherTrueLinkId(){return!1===this._isExposed?void 0:this._publisherTrueLinkId}isFromCache(){return this._fromCache}exposeUserId(){return this._isExposed}getUserIdAsEid(){return{source:B.ID5_EIDS_SOURCE,uids:[{atype:1,id:this.getUserId(),ext:this.getExt()}]}}onAvailable(e,t){if(!nt(e))throw new Error("onAvailable expects a function");return this._availableCallback?this._log.warn("onAvailable was already called, ignoring"):this._availableCallback=new Pt("onAvailable",this._log,this._metrics,e,t,this._userIdAvailable,(()=>{}),this),this}onUpdate(e){if(!nt(e))throw new Error("onUpdate expects a function");return this._updateCallback=e,this._userIdAvailable&&this._fireOnUpdate(),this}onRefresh(e,t){if(!nt(e))throw new Error("onRefresh expects a function");this._refreshCallback&&this._refreshCallback.disableWatchdog();var r=!0===this._isRefreshing&&!1===this._isRefreshingWithFetch&&this._userIdAvailable;return this._refreshCallback=new Pt("onRefresh",this._log,this._metrics,e,t,r,(()=>{this._isRefreshing=!1,this._isRefreshingWithFetch=!1}),this),this}unregister(){try{this._unregisterTargets.unregister("api-call"),Rt.unregister(this)}catch(e){}}collectEvent(e,t){const r=r=>(r=new Request("https://id5-sync.com/event",{method:"POST",mode:"no-cors",body:JSON.stringify({partnerId:this.config.getOptions().partnerId,id5id:r,eventType:e,metadata:t})}),this._log.info("Sending event",r),fetch(r).catch((t=>this._log.error("Error while sending event to ID5 of type "+e,t))));return this._userIdAvailable?r(this._userId):this._userIdAvailablePromise.then((e=>r(e)))}constructor(e,t,r,i,s,o,a,c,l,d){n(this,"_availableCallback",void 0),n(this,"_updateCallback",void 0),n(this,"_refreshCallback",void 0),n(this,"_isExposed",void 0),n(this,"_fromCache",void 0),n(this,"_isRefreshing",!1),n(this,"_isRefreshingWithFetch",!1),n(this,"_userId",void 0),n(this,"_ext",void 0),n(this,"_userIdAvailable",!1),n(this,"_userIdAvailablePromise",void 0),n(this,"_userIdAvailablePromiseResolver",void 0),n(this,"invocationId",void 0),n(this,"config",void 0),n(this,"clientStore",void 0),n(this,"consentManagement",void 0),n(this,"_consentDataProvider",void 0),n(this,"_metrics",void 0),n(this,"_log",void 0),n(this,"_multiplexingInstance",void 0),n(this,"_pageLevelInfo",void 0),n(this,"_trueLinkAdapter",void 0),n(this,"_publisherTrueLinkId",void 0),n(this,"_gpId",void 0),n(this,"_origin",void 0),this.config=e,this.clientStore=t,this.consentManagement=r,this._metrics=i,this._consentDataProvider=s,this._log=new u("Id5Instance:",o),this._multiplexingInstance=a,this._userIdAvailablePromise=new Promise((e=>{this._userIdAvailablePromiseResolver=e})),this._pageLevelInfo=c,this._unregisterTargets=new xt(this._multiplexingInstance,this._metrics),this._trueLinkAdapter=l,this._origin=d||"api",Rt.register(this)}bootstrap(){const e=pe();var r=this.config.getOptions();const i=this._ref();this._multiplexingInstance.on(ye.CASCADE_NEEDED,(e=>{const t=i.deref();t&&t._doCascade(e)})).on(ye.USER_ID_READY,((r,n)=>{const s=i.deref();if(s){try{var o=null!=n&&n.tags?t({},n.tags):{};const i=s._metrics;null!=n&&n.timestamp&&i.userIdNotificationDeliveryDelayTimer(o).record(Date.now()-n.timestamp),e.record(i.userIdProvisioningDelayTimer(r.isFromCache,t(t({},o),{},{isUpdate:s._userIdAvailable,hasOnAvailable:void 0!==s._availableCallback,hasOnRefresh:void 0!==s._refreshCallback,hasOnUpdate:void 0!==s._updateCallback,provisioner:(null==n?void 0:n.provisioner)||"leader",hasChanged:s._userId!==r.responseObj.universal_uid})))}catch(r){s._log.error("Failed to measure provisioning metrics",r)}s._setUserId(r.responseObj,r.isFromCache,r.willBeRefreshed)}})).on(ye.USER_ID_FETCH_CANCELED,(e=>{const t=i.deref();t&&t._log.info("ID5 User ID fetch canceled:",e.reason)})),this._log.info("bootstrapped for partner ".concat(r.partnerId," with referer ").concat(this._refererInfo," and options"),this.getProvidedOptions())}firstFetch(){const e=this.config.getOptions(),t=this._gatherFetchIdData().then((t=>{var r;this._multiplexingInstance.register({source:this._origin,sourceVersion:Ct,sourceConfiguration:{options:e},fetchIdData:t,singletonMode:!0===(null==e||null===(r=e.multiplexing)||void 0===r?void 0:r._disabled),canDoCascade:!this.config.hasCreativeRestrictions(),forceAllowLocalStorageGrant:this.consentManagement.isForceAllowLocalStorageGrant(),storageExpirationDays:e.storageExpirationDays})})),r=this._submitRefreshConsent().then((e=>{e&&this.consentManagement.setConsentData(e)}));return t.then((()=>{this._multiplexingInstance.lookupForCachedId().provisioned||(this._log.info("Couldn't find cached userId. Will try again when consent is resolved"),r.then((()=>{this._log.info("Consent resolved. Looking for cached id again"),this._multiplexingInstance.lookupForCachedId()})))})),Promise.allSettled([t,r])}refreshId(e,t){let r,i;this._log.info("ID refresh requested (force=".concat(e,") with additional options "),t);try{this._isRefreshing=!0,this._isRefreshingWithFetch=e,this.config.updOptions(t);var n=this.config.getOptions();const s=n.allowLocalStorageWithoutConsentApi||n.debugBypassConsent;r=this._gatherFetchIdData().then((t=>{this._multiplexingInstance.updateFetchIdData(t),this._multiplexingInstance.refreshUid({resetConsent:!0,forceAllowLocalStorageGrant:s,forceFetch:e}),i=this._submitRefreshConsent()})),this._metrics.refreshCallCounter("public-api").inc()}catch(t){return this._log.error("Exception caught from refreshId()",t),Promise.reject(t)}return Promise.allSettled([r,i])}_doCascade(e){var t,r=this.config.getOptions();if(e.partnerId===r.partnerId&&0<=r.maxCascades&&!this.config.hasCreativeRestrictions()){var i=r.partnerUserId&&0<r.partnerUserId.length,n=new URL("/".concat(i?"s":"i","/").concat(r.partnerId,"/").concat(r.maxCascades,".gif"),"https://id5-sync.com");const s=n.searchParams;s.set("o","api"),s.set("id5id",e.userId),s.set("gdpr_consent",e.consentString),s.set("gdpr",e.gdprApplies),e.gppString&&(s.set("gpp",e.gppString),s.set("gpp_sid",e.gppSid)),i&&s.set("puid",r.partnerUserId),this._log.info("Opportunities to cascade available",n.href),t=n.href,"loading"!==document.readyState?ht(t):document.addEventListener("DOMContentLoaded",(function(){ht(t)}))}}_gatherFetchIdData(){var e=this;return i((function*(){var t=e.config.getOptions(),r=yield bt.gatherUaHints(t.disableUaHints,e._log);return{partnerId:t.partnerId,refererInfo:e._pageLevelInfo.refererInfo,origin:e._origin,originVersion:e._pageLevelInfo.apiVersion,isUsingCdn:e._pageLevelInfo.isUsingCdn,att:t.att,uaHints:r,abTesting:t.abTesting,segments:t.segments,invalidSegmentsCount:e.getInvalidSegments(),provider:t.provider,pd:t.pd,partnerUserId:t.partnerUserId,refreshInSeconds:t.refreshInSeconds,providedRefreshInSeconds:e.getProvidedOptions().refreshInSeconds,trace:Ye,allowedVendors:null===(r=t.consentData)||void 0===r?void 0:r.allowedVendors,consentSource:"iab"===t.cmpApi&&!0!==t.debugBypassConsent?F.cmp:F.partner,trueLink:e._trueLinkAdapter.getTrueLink()}}))()}_ref(){return new("undefined"!=typeof WeakRef?WeakRef:Ut)(this)}_submitRefreshConsent(){var e=this;return i((function*(){var r=e.config.getOptions();let i=pe();var n=r.debugBypassConsent?"bypass":r.cmpApi;let s;try{s=yield e._consentDataProvider.refreshConsentData(r.debugBypassConsent,r.cmpApi,r.consentData);const o={};s.apiTypes.forEach((e=>o[e]=!0)),i.record(e._metrics.consentRequestTimer(n,t({success:!0},o))),e._multiplexingInstance.updateConsent(s)}catch(r){e._log.error("Couldn't get consent data",r),i.record(e._metrics.consentRequestTimer(n,{success:!1,error:r.message}))}return s}))()}_setUserId(e,t){var r=2<arguments.length&&void 0!==arguments[2]&&arguments[2],i=e.universal_uid;if(this._isExposed=!0,ct(e.ab_testing))switch(e.ab_testing.result){case"normal":break;default:case"error":this._log.error("There was an error with A/B Testing. Make sure controlGroupRatio is a number >= 0 and <= 1");break;case"control":this._isExposed=!1,this._log.info("User is in control group!")}var n=this._userId!==i||!1===function e(t,r){if(!gt(t)||!gt(r))return t===r;var i=Object.keys(t),n=Object.keys(r);if(i.length!==n.length)return!1;for(var s=0,o=i;s<o.length;s++){var a=o[s];if(!e(t[a],r[a]))return!1}return!0}(this._ext,e.ext);this._userIdAvailable=!0,this._userId=i,this._gpId=e.gp,this._userIdAvailablePromiseResolver(i),this._ext=e.ext,this._publisherTrueLinkId=e.publisherTrueLinkId,this._fromCache=t,this._log.info("User id updated",{hasChanged:n,fromCache:t}),this._availableCallback&&this._availableCallback.triggerNow(),this._isRefreshing&&this._refreshCallback&&(!1===t||!1===this._isRefreshingWithFetch)&&this._refreshCallback.triggerNow(),n&&this._fireOnUpdate(),this.getOptions().allowGCReclaim!==Dt.AFTER_UID_SET||t&&r||Rt.releaseInstance(this)}_fireOnUpdate(){setTimeout((()=>{nt(this._updateCallback)&&(this._log.debug("Firing onUpdate"),this._updateCallback(this))}),0)}localStorageGrant(){return this.clientStore.localStorageGrant()}}class Nt{isBooted(){return R(window.id5Bootstrap)}getTrueLink(){return this.isBooted()?window.id5Bootstrap.getTrueLinkInfo():{booted:!1}}setPrivacy(e){this.isBooted()&&window.id5Bootstrap.setPrivacy&&window.id5Bootstrap.setPrivacy(e)}clearPrivacy(){this.setPrivacy(void 0)}}class Lt{set debug(e){Qe=!!e}get debug(){return et()}constructor(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"api";n(this,"origin",void 0),n(this,"loaded",!1),n(this,"_isUsingCdn",!1),n(this,"_referer",!1),n(this,"_version",Ct),n(this,"versions",{}),n(this,"invocationId",0),this.loaded=!0,this._isUsingCdn=!!(document&&document.currentScript&&document.currentScript.src&&0===document.currentScript.src.indexOf("https://cdn.id5-sync.com")),this._referer=pt(),this.versions[Ct]=!0,this.origin=e}init(e){this.invocationId+=1;const t=new tt(this.origin,this.invocationId);try{t.info("ID5 API version ".concat(this._version,". Invoking init()"),e);const d=new Et(e,t);var r=d.getOptions();const h=this._configureDiagnostics(r,t);h&&(h.loadDelayTimer().recordNow(),h.invocationCountSummary().record(this.invocationId,{fenced:"function"==typeof window.Fence&&window.fence instanceof window.Fence}));var i=new $(window,!d.hasCreativeRestrictions()),n=new Y(i,t),s=r.allowLocalStorageWithoutConsentApi||r.debugBypassConsent;const u=new Ne(n,d.storageConfig,s,t,h),g=new Le((()=>u.localStorageGrant()),n,d.storageConfig,t);var o=new Nt,a=Ke.createInstance(window,t,h,i,o,g),c=new St(h,t),l=new Ot(this._referer,this._version,this._isUsingCdn);const p=new kt(d,g,u,h,c,t,a,l,o,this.origin);return p.bootstrap(),p.firstFetch(),g.scheduleGC(h),p}catch(e){t.error("Exception caught during init()",e)}}refreshId(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};if(!lt(t))throw new Error("Invalid usage of refreshId(): second parameter must be a boolean");return e.refreshId(t,r),e}_configureDiagnostics(e,r){try{var i=e.partnerId;const r=new fe(this.origin,Ct);var n,s=e.diagnostics;return r.addCommonTags(t(t({},ve(i)),{},{tml:this._referer.topmostLocation,provider:e.provider||"default"})),null!=s&&s.publishingDisabled||(o=s.publishingSampleRatio,n=Math.random()<o&&te?(e,t)=>new re(undefined,{sampling:o}).publish(e,t):e=>e,null!=s&&s.publishAfterLoadInMsec&&0<s.publishAfterLoadInMsec&&r.schedulePublishAfterMsec(s.publishAfterLoadInMsec,n),null!=s&&s.publishBeforeWindowUnload&&r.schedulePublishBeforeUnload(n)),r}catch(e){return void r.error("Failed to configure diagnostics",e)}var o}}new Lt,window.ID5&&"api"===window.ID5.origin||(window.ID5=new Lt("api"))}();var cmpChecker=function(){var e="https://req.adx.ws",t=e+"/ad",r={tcfeu:"",gpp:"",usp:""},i=!1,n=null,s=!0,o=null,a={},c=[],l=[],d={},h={},u=[],g=[],p=[],v=!1,f=null,_=[],m=[],y=!1,w=new URLSearchParams(window.location.search).get("sevioDebug"),I=localStorage.getItem("sevioDebug"),S=0,C="?rand="+Math.random().toString(36).substr(2,10);"true"!==w&&"true"!==I||(y=!0),setInterval((function(){m.length=0}),1e4);var b=function(e){var t=e.key,r=e.nestedKey,i=e.value,n=JSON.parse(localStorage.getItem(t))||{};n[r]=i,localStorage.setItem(t,JSON.stringify(n))},D=function(e){var t=e.key,r=e.nestedKey,i=JSON.parse(localStorage.getItem(t))||{};return r?i[r]:i},T=function(e,t){var r=D({key:"sevioads",nestedKey:"refreshParams_"+e});return null!=r?r[t]:null},E=function(e){var t=0;for(var r in a)a.hasOwnProperty(r)&&0===r.indexOf("adZone_"+e)&&t++;return t},A=function(){return["ethereum","web3","cardano","BinanceChain","solana","tron","tronLink","tronWeb","tronLink","starknet_argentX","walletLinkExtension","coinbaseWalletExtension","__venom","martian","razor","razorWallet","ic","cosmos","ronin","starknet_braavos","XverseProviders","compass","solflare","solflareWalletStandardInitialized","sender","rainbow"].some((e=>void 0!==window[e]))?1:0},P=!1,O=function(e){P||(P=!0,"function"==typeof sevioads?.cookieSyncing&&sevioads.cookieSyncing(p))},x=function(){var e=D({key:"sevioads",nestedKey:"cmp"});if(e&&"cookieyes"===e.provider){var t=document.createElement("script");t.src="https://cdn-cookieyes.com/client_data/"+e.id+"/script.js",function(){for(var e=document.getElementsByTagName("script"),t=0;t<e.length;t++)if(-1!==e[t].src.indexOf("cookieyes.com"))return!0;return!1}()||document.getElementsByTagName("head")[0].appendChild(t)}},R=function(){Object.values(a).some((e=>!1===e.cmp))?O():(x(),function(e,t,r){if(U)return void console.log("waitForTcfApi already called. Skipping.");t=t||100,r=r||10;var i=0;function n(){i++,void 0!==window.__tcfapi?(e(),U=!0):i<r?setTimeout(n,t):(console.log("sevioads: Max attempts reached. __tcfapi not found."),O(),U=!0)}n()}((function(){console.log("sevioads: __tcfapi is now available.");!function(){if("undefined"!=typeof __gpp&&"function"==typeof __gpp)try{var e=__gpp("ping");r.gpp=e.gppString||"",O()}catch(e){}if("undefined"!=typeof __uspapi&&"function"==typeof __uspapi)try{__uspapi("getUSPData",1,(function(e,t){t&&(r.usp=e.uspString||"",O())}))}catch(e){}if("undefined"!=typeof __tcfapi&&"function"==typeof __tcfapi)try{__tcfapi("addEventListener",2,(function(e,t){t&&"tcloaded"===e.eventStatus?(r.tcfeu=e.tcString,r.state="tcloaded",O()):t&&"useractioncomplete"===e.eventStatus?(console.log("completed the action"),r.tcfeu=e.tcString,r.state="useractioncomplete",O()):__tcfapi("ping",2,(e=>{e.cmpLoaded&&"disabled"===e.displayStatus&&!e.gdprApplies&&O()}))}))}catch(e){console.log("sevioads: TCF error:",e)}else r.state="UNKNOWN",O()}()})))};window.sevioads=function(){var s=[],h={},w=window.location.pathname;if(window.sevioadsInitialized)return window.sevioads;window.sevioadsInitialized=!0,setInterval((function(){for(var e=0;e<s.length;e++)P.loadServerUrl({serverUrl:s[e],cFunction:function(){P.fetchJsonParams.apply(this,arguments)},serverMethod:"GET",cType:"application/json",xNonce:P.getNonce(),settings:function(){}})}),9e5),S=A();var I=function(){for(var e=document.querySelectorAll('script[type="application/ld+json"]'),t=[],r=0;r<e.length;r++){var i=e[r];try{for(var n=JSON.parse(i.textContent),s=Array.isArray(n)?n:[n],o=0;o<s.length;o++){var a=s[o];a.keywords&&"string"==typeof a.keywords&&(t=t.concat(a.keywords.split(",").map((function(e){return e.trim()})).filter((function(e){return e.length>0}))))}}catch(e){console.error("Error parsing JSON-LD:",e)}}return t}();if(I.length)_=I;else{var T=function(){for(var e=document.getElementsByTagName("meta"),t=0;t<e.length;t++){var r=e[t];if("keywords"===r.getAttribute("name")){var i=r.getAttribute("content");return i?i.split(",").map((function(e){return e.trim()})):[]}}return[]}();_=T.length?T:[]}var P={push:function(e){if(window.sevioadsData=window.sevioadsData||[],Array.isArray(e)){for(var t=[],r=0;r<e.length;r++){var i=E(e[r].zone);e[r].placeholderId=e[r].zone+"_id_"+i,e[r].loaded=!0,o=e[r].inventoryId,window.sevioadsData.push(e[r]),t.push(e[r].zone),!1===e[r]?.cmp&&(v=!0,f=!0);var n=document.querySelectorAll('[data-zone="'+e[r].zone+'"]');a["adZone_"+e[r].zone+"_id_"+i]=e[r],b({key:"sevioads",nestedKey:"adZone_"+e[r].zone+"_id_"+i,value:e[r]}),D({key:"sevioads",nestedKey:"initialStartTime_"+e[r].zone+"_id_"+i})||b({key:"sevioads",nestedKey:"initialStartTime_"+e[r].zone+"_id_"+i,value:Date.now()}),d[e[r].zone+"_id_"+i]="stopped";var s=0;if(n&&n.length>0)for(var c=0;c<n.length;c++)n[c].setAttribute("id",e[r].zone+"_id_"+s++)}var l=document.querySelectorAll(".sevioads"),h=[];for(c=0;c<l.length;c++)h.push(l[c]);for(var u=[],g=0;g<h.length;g++){var p=h[g],_=p.getAttribute("data-zone");-1!==t.indexOf(_)&&-1===m.indexOf(p)&&(u.push(p),m.push(p))}}P.loadingRequest({foundAds:u}),x.initialized=function(e){return new this(e)},x.initialized(e)},cookieSyncing:function(){P.loadServerUrl({serverUrl:e+"/uids",cFunction:function(e){if(4===e.xhttp.readyState&&200===e.xhttp.status){var t=JSON.parse(e.xhttp.responseText);if(t.hasOwnProperty("eids")){var r=t.eids;P.processID5Request(r)}!0!==f&&P.processQueuedAds(),P.biddersHandler(t.bidders,(function(){}))}else P.processQueuedAds();v=!0,N||(N=setInterval(k,1e3))},serverMethod:"POST",cType:"application/json",data:JSON.stringify({inventoryId:o,wdb:S,tcfeu:r.tcfeu,usp:r.usp,gpp:r.gpp})})},loadSyncItem:function(e,t){if("REDIRECT"===e.userSyncMethod){var r=new Image;r.onload=function(){t()},r.onerror=function(){t()},r.src=e.url,r.style.display="none",document.body.appendChild(r)}if("IFRAME"===e.userSyncMethod){var i=document.createElement("iframe");i.style.display="none",i.onload=function(){t(),document.body.removeChild(i)},i.onerror=function(){t(),document.body.removeChild(i)},i.src=e.url,document.body.appendChild(i),t()}},processID5Request:function(e){y&&(ID5.debug=!0),ID5.init({partnerId:1741,cmpApi:"iab",pd:""}).onUpdate((function(t){if(t.getUserId())for(var r=0;r<e.length;r++)e[r].hasOwnProperty("url")&&(e[r].url=e[r].url.replace("$%UID_PLACEHOLDER%$",t.getUserId()),P.loadServerUrl({serverUrl:e[r].url,cFunction:function(){},serverMethod:"GET",cType:"application/json",data:JSON.stringify({})}),y&&(console.log("Debug_sevio_url:",e[r].url),console.log("Debug_sevio_id5:",t.getUserId())))}))},biddersHandler:function(e,t){var r=0;if(e&&e.length>0){function i(){++r===e.length&&t()}for(var n=0;n<e.length;n++)this.loadSyncItem(e[n],i)}else t()},processQueuedAds:function(){for(var e=P.getNonce(),r=0;r<p.length;r++)P.loadServerUrl({serverUrl:t+"?t="+Date.now(),cFunction:P.fetchServerData,serverMethod:"POST",cType:"application/json",xNonce:e,data:JSON.stringify(p[r])})},renderAds:function(e){for(var t=Object.keys(e.winningBidsByTagId),r=0;r<t.length;r++)for(var i=e.winningBidsByTagId[t[r]],n=0;n<i.referenceIDs.length;n++){this.associateViewableIdToZone({referenceId:i.referenceIDs[n],viewableURL:i.viewableURL});var s=c.indexOf(i.viewableURL);-1!==s&&c.splice(s,1);var o=l.indexOf(i.impURL);-1!==o&&l.splice(o,1);var a=document.getElementById(i.referenceIDs[n]);if("native"!==this.getParamsById(t[r]).adType){a.setAttribute("data-rendered","true"),i.eventTrackers&&a.setAttribute("data-event-trackers",JSON.stringify(i.eventTrackers));var d="%"===i.widthUnit||"%"===i.heightUnit,h="",u=document.createElement("div");u.id="sevio_iframe_markup_"+i.width+"x"+i.height,u.setAttribute("data-rendered","true");try{if("r"===i.render)g.push(t[r]),a.setAttribute("style","display: inline-block; width: inherit; height: inherit;"),u.setAttribute("style","display: inline-block; width: inherit; height: inherit;"),P.loadServerUrl({serverUrl:i.admURL,cFunction:function(e){if(4===e.xhttp.readyState&&200===e.xhttp.status){var t="var adContainer = (function() { "+e.xhttp.responseText+"  return container; })();";try{eval.call(u,t)}catch(e){console.log("Error on external script execution.")}"undefined"!=typeof adContainer&&u.appendChild(adContainer)}},serverMethod:"GET",cType:"application/json",settings:{}});else{d?(a.setAttribute("style","display: inline-block; width: inherit; height: inherit; max-height: inherit; max-width: inherit;"),u.setAttribute("style","display: inline-block; width: inherit; height: inherit; max-height: inherit; max-width: inherit;")):(a.setAttribute("style","max-width:"+i.width+"px; width:"+i.width+"px; height:"+i.height+"px; display: inline-block;"),u.setAttribute("style","max-width: "+i.width+"px; width:"+i.width+"px; height:"+i.height+"px; display: inline-block;"));var p=document.createElement("iframe");i.admURL&&(p.src=i.admURL),p.setAttribute("scrolling","no"),h=d?"max-height: inherit; max-width: inherit;":"max-height: "+i.height+"px;",p.setAttribute("style","border: 0; overflow: hidden; margin:0 auto; width: 100%; max-width: "+i.width+"px;height: 100%;"+h),p.setAttribute("frameborder","0"),p.setAttribute("allowtransparency","true"),u.appendChild(p)}}catch(e){console.log("Error during ad rendering:",e)}a.innerHTML="",a.appendChild(u),i.eventTrackers&&a.setAttribute("data-event-trackers",JSON.stringify(i.eventTrackers)),-1!==l.indexOf(i.impURL)||(P.loadServerUrl({serverUrl:i.impURL,cFunction:P.onRender,serverMethod:"GET",cType:"text/html",eventTrackerType:1,eventTrackers:i.eventTrackers}),l.push(i.impURL),P.markLoadedAd(t[r]),O.unobserve(a),O.observe(a))}else{var v=i.adm,f=JSON.parse(v),_=y?f.link.ext.defaults+C:f.link.ext.defaults,m=y?f.link.ext.template+C:f.link.ext.template,w={name:"clickURL",type:"TEXT",value:f.link.url};P.loadServerUrl({serverUrl:_,cFunction:function(e){if(4===e.xhttp.readyState&&200===e.xhttp.status){var n=JSON.parse(e.xhttp.responseText),s=P.formatUsingDefaultValues({defaultItemVars:n,assets:e.settings.assets});s.push(e.settings.nativeLanding),P.loadServerUrl({serverUrl:e.settings.htmlNativeTemplateUrl,cFunction:function(n){if(4===n.xhttp.readyState&&200===n.xhttp.status){var o=n.xhttp.responseText,a=P.replaceNativeVars({htmlNativeTemplate:o,formattedValues:s});e.settings.adPlaceholder.innerHTML=a,P.loadServerUrl({serverUrl:i.impURL,cFunction:P.onRender,serverMethod:"GET",cType:"text/html",eventTrackerType:1,eventTrackers:i.eventTrackers}),P.markLoadedAd(t[r])}},serverMethod:"GET",cType:"text/html",settings:"read-native-template"})}},serverMethod:"GET",cType:"application/json",settings:{htmlNativeTemplateUrl:m,adPlaceholder:a,nativeLanding:w,assets:f.assets}}),a.setAttribute("data-rendered","true"),i.eventTrackers&&a.setAttribute("data-event-trackers",JSON.stringify(i.eventTrackers)),O.unobserve(a),O.observe(a)}}},markLoadedAd:function(e){window.sevioadsData.map((function(t){return t.zone===e&&(t.loaded=!0),t}))},onUrlChange:function(){console.log("Called onUrlChange")},associateViewableIdToZone:function(e){try{var t=e.referenceId,r=e.viewableURL;if(sevioadsData.length)for(var i=0;i<sevioadsData.length;i++)sevioadsData[i].placeholderId===t&&(sevioadsData[i].viewableURL=r)}catch(e){console.log("Error: ",e)}},refresh:function(){},onRender:function(e){4===e.xhttp.readyState&&e.xhttp.status},formatUsingDefaultValues:function({defaultItemVars:e,assets:t}){if(e.length)for(var r=0;r<e.length;r++)for(var i=0;i<t.length;i++)e[r].name===t[i].name&&null!==t[i].value&&(e[r]=t[i]);return e},replaceNativeVars:function(e){var t=e.formattedValues,r=e.htmlNativeTemplate.replace(/"?\[%([^%]+)%\]"?/g,(function(e,r){for(var i=0;i<t.length;i++)if(t[i].name===r){if("["===e[0]&&"]"===e[e.length-1])return t[i].value;var n="IMAGE"===t[i].type&&y?t[i].value+C:t[i].value;return e[0]+n+e[e.length-1]}return e}));return r},fetchServerData:function(e){if(4===e.xhttp.readyState&&200===e.xhttp.status)try{var t=JSON.parse(e.xhttp.responseText);"refresh"===e.settings?P.reRenderAds(t):P.renderAds(t)}catch(e){console.log("Error loading ad"+e)}if(4===e.xhttp.readyState&&204===e.xhttp.status){var r=new CustomEvent("sevio:empty",{detail:{message:"No ad was served",time:new Date,postParams:e.data}});window.dispatchEvent(r);try{if(e.data){var i=JSON.parse(e.data);if(i&&i.ads){refAdKey=i.ads[0].referenceId;for(var n=0;n<i.ads.length;n++)a["adZone_"+i.ads[n].referenceId].empty()}}}catch{}}},getNonce:function(){return Math.floor(1e12*Math.random())+(new Date).getTime()},loadingRequest:function(e){var i=e.foundAds,o={ads:[]};if(i){for(var a=0;a<i.length;a++){var c={},l=i[a].getAttribute("data-zone"),d=i[a].getAttribute("id"),h=P.getParamsById(l);c.type=h.adType.toUpperCase(),c.tagId=l,c.referenceId=d,y&&console.log("AdParams:",h);var g="https://cdn.adx.ws/"+h.accountId+"/inventories/"+h.inventoryId+".json";h.hasOwnProperty("inventoryId")&&h.hasOwnProperty("accountId")&&-1===s.indexOf(g)&&s.push(g),"banner"===h.adType.toLowerCase()&&h.width&&h.height&&(c.sizes=[{width:h.width,height:h.height}]);var f=document.querySelector('[data-zone="'+h.zone+'"]');c.maxSize={width:f.parentNode.offsetWidth,height:f.parentNode.offsetHeight},u.push(d),c.referenceId=d,o.ads.push(c)}if(o.privacy=r,o.keywords={},o.keywords.tokens=_,o.wdb=S,o.xPageUrl=window.location.href,y&&console.log("RequestDATA:",o),o.ads.length>0&&(null===n&&(n=1,P.prereqRefresh(R)),p.push(o),v)){var m=P.getNonce();P.loadServerUrl({serverUrl:t+"?t="+Date.now(),cFunction:P.fetchServerData,serverMethod:"POST",cType:"application/json",xNonce:m,data:JSON.stringify(o)})}}},fetchJsonParams:function(e){var t;if(t=JSON.parse(localStorage.getItem("sevioads")||"{}"),Object.keys(t).forEach((function(e){e.startsWith("refreshParams_")&&delete t[e]})),localStorage.setItem("sevioads",JSON.stringify(t)),4===e.xhttp.readyState&&200===e.xhttp.status)try{for(var r in d)d.hasOwnProperty(r)&&(d[r]="stopped");var i=JSON.parse(e.xhttp.response),n={};i.hasOwnProperty("zones")&&void 0!==i.zones?(n=i.zones,i.cmp,b({key:"sevioads",nestedKey:"cmp",value:i.cmp})):n=i,b({key:"sevioads",nestedKey:"configInventoryTS",value:Date.now()});for(var s=Object.keys(n),o=0;o<s.length;o++)if(b({key:"sevioads",nestedKey:"refreshParams_"+s[o],value:n[s[o]]}),P.getParamsById(s[o])){var a="rRate_"+n[s[o]].refreshRate+"_rMaxTimes_"+n[s[o]].refreshMaxTimes+"_rCounterInterval_"+n[s[o]].refreshCounterInterval;h.hasOwnProperty(a)?h[a].zones.push(s[o]):h[a]={refreshParams:n[s[o]],zones:[s[o]]}}e.settings()}catch(e){console.log("Error parsing remote params"+e)}},isAdInViewport:function(e){var t=document.getElementById(e);if(!t)return!1;var r=t.getBoundingClientRect(),i=r.top,n=r.bottom,s=r.left,o=r.right,a=window.innerHeight||document.documentElement.clientHeight,c=window.innerWidth||document.documentElement.clientWidth;return n>.5*r.height&&i<a-.5*r.height&&o>0&&s<c},prereqRefresh:function(e){if(s.length){var t=1;function r(){++t>=s.length&&(!0,e())}var i=P.getNonce(),n=D({key:"sevioads",nestedKey:"configInventoryTS"});if(void 0!==n&&Date.now()-n<=9e5)return void r();for(var o=0;o<s.length;o++)P.loadServerUrl({serverUrl:s[o],cFunction:function(){P.fetchJsonParams.apply(this,arguments),r()},serverMethod:"GET",cType:"application/json",xNonce:i,settings:function(){}})}},reRenderAds:function(e){for(var t=Object.keys(e.winningBidsByTagId),r=0;r<t.length;r++)for(var i=0;i<e.winningBidsByTagId[t[r]].referenceIDs.length;i++){var n=document.getElementById(e.winningBidsByTagId[t[r]].referenceIDs[i]);n&&(n.innerHTML="",O.unobserve(n),O.observe(n))}P.renderAds(e)},getParamsByElementId:function(e){return D({key:"sevioads",nestedKey:"adZone_"+e})},getParamsById:function(e){return window.sevioadsData.filter((function(t){return t.zone===e}))[0]},prepareRefreshRequest:function(e){var i={ads:[]};i.privacy=r;for(var n=0;n<e.length;n++){var s={},o=this.getParamsByElementId(e[n]);s.referenceId=o.placeholderId,s.type=o.adType.toUpperCase(),s.tagId=o.zone,"banner"===o.adType.toLowerCase()&&o.width&&o.height&&(requestDataAdElement.sizes=[{width:o.width,height:o.height}]);var a=document.getElementById(e[n]);s.maxSize={width:a.parentNode.offsetWidth,height:a.parentNode.offsetHeight},i.ads.push(s)}if(i.ads=i.ads.filter((function(e){return-1===g.indexOf(e.tagId)})),i.ads.length>0){var c=P.getNonce();i.privacy=r,i.keywords={},i.keywords.tokens=_,i.wdb=S,i.xPageUrl=window.location.href,P.loadServerUrl({serverUrl:t+"?t="+Date.now()+"&refresh=true",cFunction:P.fetchServerData,serverMethod:"POST",cType:"application/json",xNonce:c,data:JSON.stringify(i),settings:"refresh"})}},loadServerUrl:function(e){if(!e.serverUrl)return!1;var t=new XMLHttpRequest;if(t.onload=function(){e.cFunction({xhttp:this,data:e.data,settings:e.settings})},t.open(e.serverMethod,e.serverUrl),e.cType&&t.setRequestHeader("Content-Type",e.cType),e.xNonce&&t.setRequestHeader("X-Nonce",e.xNonce),e.eventTrackers&&e.eventTrackers.length>0){var r=e.eventTrackers.filter((function(t){return t.type===e.eventTrackerType}));if(r.length>0)for(var i=0;i<r.length;i++)t.setRequestHeader("TB-Event-Tracker"+i,r[i].url)}e.data?t.send(e.data):t.send()},onHideDocument:function(){for(var e in d)if(d.hasOwnProperty(e)){d[e]="stopped";var t=document.getElementById(e);t&&O.unobserve(t)}},onDocumentVisible:function(){for(var e in d)if(d.hasOwnProperty(e)){var t=document.getElementById(e);t&&O.observe(t)}},getViewableURLById:function(e){var t="";if(sevioadsData.length)for(var r=0;r<sevioadsData.length;r++)sevioadsData[r].placeholderId===e&&(t=sevioadsData[r].viewableURL);return t},adInViewport:function(e){setTimeout((function(){i=!1}),1e3);var t=e.getAttribute("data-zone"),r=e.getAttribute("id"),n=this.getViewableURLById(r),s=-1!==g.indexOf(t);if(d[r]=s?"stopped":"started",!(-1!==c.indexOf(n))){var o=JSON.parse(e.getAttribute("data-event-trackers"));if(!P.isAdInViewport(r))return;P.loadServerUrl({serverUrl:n,cFunction:function(){c.push(n)},serverMethod:"GET",cType:"text/html",eventTrackerType:2,eventTrackers:o})}}},O=new IntersectionObserver((function(e){e.forEach((function(t){var r=t.isIntersecting&&t.intersectionRatio>=.5;if(y&&(console.log("Entries:",e),console.log("OBSERVER initialized")),r)setTimeout((function(){r&&(document.hidden||"visible"===window.getComputedStyle(t.target).getPropertyValue("visibility")&&(y&&(console.log("Ad in viewport",t.target.getAttribute("data-zone")),console.log("Intersection ratio:",t.intersectionRatio)),P.adInViewport(t.target)))}),1e3);else{var i=t.target.getAttribute("data-zone");setTimeout((function(){y&&(console.log("Intersection ratio OUTofViewport:",t.intersectionRatio),console.log("Ad not in viewport:",i)),d[t.target.getAttribute("id")]="stopped"}),1e3)}}))}),{threshold:.5}),x=function(e){this.construct(e)};if(x.prototype.construct=function(e){this.props=e},void 0!==window.sevioads)for(var U=0;U<window.sevioads.length;U++)P.push(window.sevioads[U]);document.addEventListener("visibilitychange",(function(){document.hidden?P.onHideDocument():P.onDocumentVisible()}));var L=document.documentElement;return new MutationObserver((function(e){e.forEach((function(e){e.target.querySelectorAll(".sevioads").forEach((function(e){var t=window.getComputedStyle(e),r=t.getPropertyValue("visibility"),n=t.getPropertyValue("display"),s=t.getPropertyValue("opacity");if("hidden"===r&&"block"===n&&1===parseInt(s))y&&console.log('Child Element with class "sevioads" is visible and has changed display:',e),i||w!==window.location.pathname||(P.adInViewport(e),i=!0);else{var o=e.getAttribute("id");d[o]="stopped"}}))}))})).observe(L,{attributes:!0,subtree:!0,attributeFilter:["style","class"]}),P}();var U=!1;if(void 0===window.loaderJsExecuted){window.loaderJsExecuted=!0;var k=function(){var e=[];if(!1!==s&&!1!==v||(clearInterval(N),N=null),y){console.log("---- secondsZone: ----"),console.table(h);var t={},r={},i={},n={},o={};Object.keys(h).forEach((function(e){var s=e.split("_")[0],a=T(s,"refreshRate"),c=T(s,"refreshMaxTimes");o[e]=c;var l=T(s,"refreshCounterInterval");n[e]=l,r[e]=D({key:"sevioads",nestedKey:"counterZone_"+e}),i[e]=D({key:"sevioads",nestedKey:"initialStartTime_"+e}),t[e]=a}));const e=new CustomEvent("sevioDebugForward",{detail:{secondsZone:h,refreshToZone:t,counterToZone:r,zoneStatus:d,initialStartInfo:i,counterIntervalToZone:n,refreshMaxTimesToZone:o}});window.dispatchEvent(e)}for(var a=document.querySelectorAll(".sevioads"),c=0;c<a.length;c++){var l=a[c].getAttribute("id");if(l&&void 0===h[l]){h[l]=0;var u=D({key:"sevioads",nestedKey:"counterZone_"+l});void 0!==u&&"null"!==u||b({key:"sevioads",nestedKey:"counterZone_"+l,value:0})}}for(c=0;c<a.length;c++)if(void 0!==window.sevioads&&"function"==typeof sevioads.isAdInViewport&&sevioads.isAdInViewport(a[c].getAttribute("id"))){var p=a[c].getAttribute("id"),f=D({key:"sevioads",nestedKey:"adZone_"+a[c].getAttribute("id")});if(f){var _=T(f.zone,"refreshRate"),m=T(f.zone,"refreshMaxTimes"),w=T(f.zone,"refreshCounterInterval"),I=parseInt(D({key:"sevioads",nestedKey:"initialStartTime_"+p})),C=(Date.now()-I)/1e3;if(C>=w&&(b({key:"sevioads",nestedKey:"counterZone_"+p,value:0}),b({key:"sevioads",nestedKey:"initialStartTime_"+p,value:Date.now()})),h[p]===_){var E=D({key:"sevioads",nestedKey:"counterZone_"+p});if(-1!==g.indexOf(f.zone))P=E;else var P=E+1;P>m?P=m:e.push(p),C>=w&&P>=m&&(P=0,b({key:"sevioads",nestedKey:"initialStartTime_"+p,value:Date.now()})),b({key:"sevioads",nestedKey:"counterZone_"+p,value:P}),h[p]=0}else h[p]++}}S=A(),void 0!==sevioads.prepareRefreshRequest&&"function"==typeof sevioads.prepareRefreshRequest&&sevioads.prepareRefreshRequest(e),e=[]},N=setInterval(k,1e3);document.addEventListener("visibilitychange",(function(){document.hidden?(clearInterval(N),N=null):N||(N=setInterval(k,1e3))}))}function L(){localStorage.removeItem("refreshTB"),localStorage.removeItem("refreshStoreTB"),window.removeEventListener("beforeunload",L)}window.addEventListener("beforeunload",(function(e){setTimeout(L,0)})),window.addEventListener("focus",(()=>{s=!0,N||(N=setInterval(k,1e3))})),window.addEventListener("load",(function(){for(var e=0;e<localStorage.length;e++){var t=localStorage.key(e);0===t.indexOf("remainingTime_")&&localStorage.removeItem(t)}}))}();
/*! This file is auto-generated */
window.addComment=function(v){var I,C,h,E=v.document,b={commentReplyClass:"comment-reply-link",commentReplyTitleId:"reply-title",cancelReplyId:"cancel-comment-reply-link",commentFormId:"commentform",temporaryFormId:"wp-temp-form-div",parentIdFieldId:"comment_parent",postIdFieldId:"comment_post_ID"},e=v.MutationObserver||v.WebKitMutationObserver||v.MozMutationObserver,r="querySelector"in E&&"addEventListener"in v,n=!!E.documentElement.dataset;function t(){d(),e&&new e(o).observe(E.body,{childList:!0,subtree:!0})}function d(e){if(r&&(I=g(b.cancelReplyId),C=g(b.commentFormId),I)){I.addEventListener("touchstart",l),I.addEventListener("click",l);function t(e){if((e.metaKey||e.ctrlKey)&&13===e.keyCode)return C.removeEventListener("keydown",t),e.preventDefault(),C.submit.click(),!1}C&&C.addEventListener("keydown",t);for(var n,d=function(e){var t=b.commentReplyClass;e&&e.childNodes||(e=E);e=E.getElementsByClassName?e.getElementsByClassName(t):e.querySelectorAll("."+t);return e}(e),o=0,i=d.length;o<i;o++)(n=d[o]).addEventListener("touchstart",a),n.addEventListener("click",a)}}function l(e){var t,n,d=g(b.temporaryFormId);d&&h&&(g(b.parentIdFieldId).value="0",t=d.textContent,d.parentNode.replaceChild(h,d),this.style.display="none",n=(d=(d=g(b.commentReplyTitleId))&&d.firstChild)&&d.nextSibling,d&&d.nodeType===Node.TEXT_NODE&&t&&(n&&"A"===n.nodeName&&n.id!==b.cancelReplyId&&(n.style.display=""),d.textContent=t),e.preventDefault())}function a(e){var t=g(b.commentReplyTitleId),t=t&&t.firstChild.textContent,n=this,d=m(n,"belowelement"),o=m(n,"commentid"),i=m(n,"respondelement"),r=m(n,"postid"),n=m(n,"replyto")||t;d&&o&&i&&r&&!1===v.addComment.moveForm(d,o,i,r,n)&&e.preventDefault()}function o(e){for(var t=e.length;t--;)if(e[t].addedNodes.length)return void d()}function m(e,t){return n?e.dataset[t]:e.getAttribute("data-"+t)}function g(e){return E.getElementById(e)}return r&&"loading"!==E.readyState?t():r&&v.addEventListener("DOMContentLoaded",t,!1),{init:d,moveForm:function(e,t,n,d,o){var i,r,l,a,m,c,s,e=g(e),n=(h=g(n),g(b.parentIdFieldId)),y=g(b.postIdFieldId),p=g(b.commentReplyTitleId),u=(p=p&&p.firstChild)&&p.nextSibling;if(e&&h&&n){void 0===o&&(o=p&&p.textContent),a=h,m=b.temporaryFormId,c=g(m),s=(s=g(b.commentReplyTitleId))?s.firstChild.textContent:"",c||((c=E.createElement("div")).id=m,c.style.display="none",c.textContent=s,a.parentNode.insertBefore(c,a)),d&&y&&(y.value=d),n.value=t,I.style.display="",e.parentNode.insertBefore(h,e.nextSibling),p&&p.nodeType===Node.TEXT_NODE&&(u&&"A"===u.nodeName&&u.id!==b.cancelReplyId&&(u.style.display="none"),p.textContent=o),I.onclick=function(){return!1};try{for(var f=0;f<C.elements.length;f++)if(i=C.elements[f],r=!1,"getComputedStyle"in v?l=v.getComputedStyle(i):E.documentElement.currentStyle&&(l=i.currentStyle),(i.offsetWidth<=0&&i.offsetHeight<=0||"hidden"===l.visibility)&&(r=!0),"hidden"!==i.type&&!i.disabled&&!r){i.focus();break}}catch(e){}return!1}}}}(window);
window.CRYPTO_GLOSSARY_TERMS={init:function(){this.deactivateGlossary=this.cookieExists('hideallterms');this.termsToggleHideText='Hide All Glossary Terms';this.termsToggleShowText='Show All Glossary Terms';var $glossaryTermsToggle=$('.glossary-terms-circle');if(this.deactivateGlossary){this.hideAllTerms();$glossaryTermsToggle.addClass('showTerms');$('.glossary-terms-launcher-message > p').text(this.termsToggleShowText);}else{$glossaryTermsToggle.addClass('hideTerms');$('.glossary-terms-launcher-message > p').text(this.termsToggleHideText);}
$('#main').on('click','span.bubbleClose',this.closeBubble);$('#main').on('click','span.bubbleHideDefinitions',function(){$glossaryTermsToggle.click();});$('span.glossaryTerm').click(this.open);$glossaryTermsToggle.click(function(e){e.preventDefault();var $this=$(this);if($this.hasClass('showTerms')){window.CRYPTO_GLOSSARY_TERMS.issueCookie('hideallterms','');window.CRYPTO_GLOSSARY_TERMS.showAllTerms();$this.removeClass('showTerms').addClass('hideTerms').find('p').text(window.CRYPTO_GLOSSARY_TERMS.termsToggleHideText);}else{window.CRYPTO_GLOSSARY_TERMS.closeAllBubbles(false);window.CRYPTO_GLOSSARY_TERMS.issueCookie('hideallterms','true');window.CRYPTO_GLOSSARY_TERMS.hideAllTerms();$this.removeClass('hideTerms').addClass('showTerms').find('p').text(window.CRYPTO_GLOSSARY_TERMS.termsToggleShowText);}});},open:function(e){if(e.target!==this)return;if(window.CRYPTO_GLOSSARY_TERMS.deactivateGlossary)return false;var $this=$(this),title=$this.attr('data-title'),content=$this.attr('data-content'),url=$this.attr('data-url'),bubbleContent=window.CRYPTO_GLOSSARY_TERMS.generateBubble(title,content,url);if($this.find('.glossaryBubbleContainer').html().length)return false;window.CRYPTO_GLOSSARY_TERMS.closeAllBubbles(false);$this.find('.glossaryBubbleContainer').append(bubbleContent).fadeIn();},closeBubble:function(){var $this=$(this);$this.closest('.glossaryBubbleContainer').empty().hide();},closeAllBubbles:function(issueCookie){$('.glossaryBubbleContainer').each(function(){$(this).empty().hide();});if(issueCookie){window.CRYPTO_GLOSSARY_TERMS.issueCookie('hideallterms','true');window.CRYPTO_GLOSSARY_TERMS.hideAllTerms();}},hideAllTerms:function(){$('.glossaryTerm').each(function(){var $this=$(this);if(!$this.hasClass('glossaryTermHidden'))$this.addClass('glossaryTermHidden');});window.CRYPTO_GLOSSARY_TERMS.deactivateGlossary=true;},showAllTerms:function(){$('.glossaryTerm').each(function(){$(this).removeClass('glossaryTermHidden');});window.CRYPTO_GLOSSARY_TERMS.deactivateGlossary=false;},generateBubble:function(title,content,url){var bubble='';bubble+='<div class="glossaryBubble">';bubble+='<span class="bubbleClose">x</span>';bubble+='<h3>'+title+'</h3>';bubble+='<p>'+content+'</p>';bubble+='<a href="'+url+'" target="_blank">Learn more</a>';bubble+='<span class="bubbleHideDefinitions">Hide all definitions</span>';bubble+='</div>';return bubble;},issueCookie:function(cookieName,value){if(typeof Cookies==='undefined')return false;Cookies.set('crypto-glossary-'+cookieName,value,{expires:365});},cookieExists:function(cookieName){if(typeof Cookies==='undefined')return false;var cookieFullName='crypto-glossary-'+cookieName;return Cookies.get(cookieFullName)==='true';}};jQuery(document).ready(window.CRYPTO_GLOSSARY_TERMS.init.bind(CRYPTO_GLOSSARY_TERMS));
jQuery(document).ready(function($){var maxNew=9,newLoaded=0,articles=null,$window=$(window),windowHeight=$window.height(),loadingArticle=false,isSending=false,loadingFailureMsg='Whoops, looks like we had trouble loading the next article...';$(document).on('alphaHolepunch',loadInitialPaywallPosts);function loadInitialPaywallPosts(){let $teasers=$('.cs-alpha-paywall-teaser');if(!$teasers.length)return;$teasers.each(function(){const $container=$(this).closest('.single-post-box-container');const $parent=$(this).closest('div.post');const postId=$parent.attr('data-id');$.ajax({url:adminAjaxUrl,type:'post',dataType:'JSON',data:{action:'infinite_scroll_handler',post_id:postId,alpha:window.CRYPTO_ALPHA.isAlpha?'alpha':false,alphaInitial:'alphaInitial'},success:function(response){if(!response||!response.post)return;$container.replaceWith(response.post);handleAdGeofencing();windowHeight=$window.height();$(".sidebar").trigger("sticky_kit:detach");if(response.visitorIsFromUS){$('.international-block').removeClass('hidden');}else{$('.international-block').remove();}}});});}
function scrollStatRecalc(){articles=[];$('div.single-post-box-container').each(function(){var $this=$(this),$post=$this.find('div.post'),position=$this.position(),articleData={url:$post.attr('data-url'),id:$post.attr('data-id'),title:$post.attr('data-title'),height:$this.outerHeight(),top:position.top};articles.push(articleData);});}
function determineUrlAndArticle(){if(loadingArticle||isSending)return false;var scrolled=document.body.scrollTop||document.documentElement.scrollTop;for(var i=0,len=articles.length;i<len;i++){if(i===len-1&&newLoaded<=maxNew&&$window.width()>980){var remainingScroll=articles[i].top+articles[i].height-scrolled-$window.height();if(remainingScroll<1)loadArticle(articles[i]);}
if(scrolled>articles[i].top&&scrolled<=(articles[i].top+articles[i].height)){if(window.location.href!==articles[i].url){window.history.pushState({id:articles[i].id},articles[i].title,articles[i].url);if(typeof ga!=='undefined'){ga('set','page',window.location.pathname);ga('send','pageview');}}}}}
function loadArticle(articleObj){loadingArticle=true;if(isSending)return false;var $this=$(this),$loader=$('#infiniteLoader');$.ajax({url:adminAjaxUrl,type:'post',dataType:'JSON',data:{action:'infinite_scroll_handler',post_id:articleObj.id,alpha:window.CRYPTO_ALPHA.isAlpha?'alpha':false},beforeSend:function(){isSending=true;$loader.show();},error:handleError,success:function(response){if(response&&response.post){$('#main').append(response.post);if(!window.CRYPTO_ALPHA.isAlpha){$('.infiniteLoaderTeaser').remove();$('.cs-alpha-paywall-teaser').removeClass('hidden');}
scrollStatRecalc();handleAdGeofencing();if(response.visitorIsFromUS){$('.international-block').removeClass('hidden');}else{$('.international-block').remove();}}
setTimeout(function(){isSending=false;loadingArticle=false;newLoaded++;},2000);$loader.hide();}});}
function handleError(){isSending=false;$('#infiniteLoader').hide();alert(loadingFailureMsg);}
function handleAdGeofencing(){if(window.cryptoConfig.visitorCountryCode==='US'){$('.us-deny-hide').remove();$('.international-block').removeClass('hidden');if($('span#blockUSRedirect').length)return window.location.href='/';}else{if(window.cryptoConfig.visitorCountryCode&&window.cryptoConfig.visitorCountryCode!=='US'){$('.us-deny-hide').removeClass('hidden');$('.international-block').remove();if(window.cryptoConfig.visitorCountryCode==='ES'){$('.spain-deny-hide').remove();}}}
if(window.cryptoConfig.visitorCountryCode&&(window.cryptoConfig.visitorCountryCode==='FR'||window.cryptoConfig.visitorCountryCode==='US')){$('.france-us-deny-hide').remove();}else{$('.france-us-deny-hide').removeClass('hidden');}
if(window.cryptoConfig.visitorCountryCode&&(window.cryptoConfig.visitorCountryCode==='SG')){$('.sg-deny-hide').remove();}else{$('.sg-deny-hide').removeClass('hidden');}
if(window.cryptoConfig.visitorCountryCode&&(window.cryptoConfig.visitorCountryCode==='CN')){$('.cn-deny-hide').remove();}else{$('.cn-deny-hide').removeClass('hidden');}
if(window.cryptoConfig.visitorCountryCode&&(window.cryptoConfig.visitorCountryCode==='KR')){$('.kr-deny-hide').remove();}else{$('.kr-deny-hide').removeClass('hidden');}
if(window.CRYPTO_HOLEPUNCH&&window.CRYPTO_HOLEPUNCH.punchPlacements)window.CRYPTO_HOLEPUNCH.punchPlacements();}});